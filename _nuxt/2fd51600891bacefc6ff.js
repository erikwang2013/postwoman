/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{251:function(t,e,n){"use strict";var r,o=(r=n(301))&&"object"==typeof r&&"default"in r?r.default:r;o.registerVersion("firebase","7.12.0","app"),t.exports=o},301:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,c=n(781),h=n(302),component=n(345),f=n(346),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),d=new h.ErrorFactory("app","Firebase",l),v=((o={})["@firebase/app"]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),y=new f.Logger("@firebase/app"),m=function(){function t(t,e,n){var r,o,f=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=h.deepCopy(t),this.container=new component.ComponentContainer(e.name),this._addComponent(new component.Component("app",(function(){return f}),"PUBLIC"));try{for(var l=c.__values(this.firebase_.INTERNAL.components.values()),d=l.next();!d.done;d=l.next()){var v=d.value;this._addComponent(v)}}catch(t){r={error:t}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(component){try{this.container.addComponent(component)}catch(t){y.debug("Component "+component.name+" failed to register with FirebaseApp "+this.name,t)}},t.prototype._addOrOverwriteComponent=function(component){this.container.addOrOverwriteComponent(component)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw d.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var w=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={});if("object"!=typeof o||null===o){o={name:o}}var c=o;void 0===c.name&&(c.name="[DEFAULT]");var f=c.name;if("string"!=typeof f||!f)throw d.create("bad-app-name",{appName:String(f)});if(h.contains(e,f))throw d.create("duplicate-app",{appName:f});var l=new t(n,c,r);return e[f]=l,l},app:o,registerVersion:function(t,e,n){var r,o=null!==(r=v[t])&&void 0!==r?r:t;n&&(o+="-"+n);var c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){var f=['Unable to register library "'+o+'" with version "'+e+'":'];return c&&f.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),c&&h&&f.push("and"),h&&f.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void y.warn(f.join(" "))}l(new component.Component(o+"-version",(function(){return{library:o,version:e}}),"VERSION"))},setLogLevel:f.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw d.create("invalid-log-argument",{appName:name});f.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.12.0",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function o(t){if(t=t||"[DEFAULT]",!h.contains(e,t))throw d.create("no-app",{appName:t});return e[t]}function l(component){var f,l,v=component.name;if(n.has(v))return y.debug("There were multiple attempts to register component "+v+"."),"PUBLIC"===component.type?r[v]:null;if(n.set(v,component),"PUBLIC"===component.type){var m=function(t){if(void 0===t&&(t=o()),"function"!=typeof t[v])throw d.create("invalid-app-argument",{appName:v});return t[v]()};void 0!==component.serviceProps&&h.deepExtend(m,component.serviceProps),r[v]=m,t.prototype[v]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,v);return n.apply(this,component.multipleInstances?t:[])}}try{for(var w=c.__values(Object.keys(e)),I=w.next();!I.done;I=w.next()){var E=I.value;e[E]._addComponent(component)}}catch(t){f={error:t}}finally{try{I&&!I.done&&(l=w.return)&&l.call(w)}finally{if(f)throw f.error}}return"PUBLIC"===component.type?r[v]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),o.App=t,r}(m);return e.INTERNAL=c.__assign(c.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){h.deepExtend(e,t)},createSubscribe:h.createSubscribe,ErrorFactory:h.ErrorFactory,deepExtend:h.deepExtend}),e}(),I=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var component=t.getComponent();return"VERSION"===(null==component?void 0:component.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(h.isBrowser()&&void 0!==self.firebase){y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var E=self.firebase.SDK_VERSION;E&&E.indexOf("LITE")>=0&&y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=w.initializeApp;w.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h.isNode()&&y.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),_.apply(void 0,t)};var T=w;!function(t,e){t.INTERNAL.registerComponent(new component.Component("platform-logger",(function(t){return new I(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.0",e),t.registerVersion("fire-js","")}(T),e.default=T,e.firebase=T},302:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(782),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(t,e){if(!t)throw h(e)},h=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},f=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,t){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,h=c?input[i+2]:0,f=n>>2,l=(3&n)<<4|o>>4,d=(15&o)<<2|h>>6,v=63&h;c||(v=64,r||(d=64)),output.push(e[f],e[l],e[d],e[v])}return output.join("")},encodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(input):this.encodeByteArray(f(input),t)},decodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(input):function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=t[n++]))<<12|(63&(h=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{c=t[n++];var h=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&h)}}return e.join("")}(this.decodeStringToByteArray(input,t))},decodeStringToByteArray:function(input,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=e[input.charAt(i++)],r=i<input.length?e[input.charAt(i)]:0,o=++i<input.length?e[input.charAt(i)]:64,c=++i<input.length?e[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var h=n<<2|r>>4;if(output.push(h),64!==o){var f=r<<4&240|o>>2;if(output.push(f),64!==c){var l=o<<6&192|c;output.push(l)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},d=function(t){try{return l.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v(t,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return source}for(var e in source)source.hasOwnProperty(e)&&(t[e]=v(t[e],source[e]));return t}var y=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w=function(t){function e(code,n){var r=t.call(this,n)||this;return r.code=code,r.name="FirebaseError",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,I.prototype.create),r}return r.__extends(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(code){for(var data=[],t=1;t<arguments.length;t++)data[t-1]=arguments[t];for(var e=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?E(template,e):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new w(n,o),h=0,f=Object.keys(e);h<f.length;h++){var l=f[h];"_"!==l.slice(-1)&&(l in c&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),c[l]=e[l])}return c},t}();function E(template,data){return template.replace(_,(function(t,e){var n=data[e];return null!=n?n.toString():"<"+e+"?>"}))}var _=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}var A=function(t){var header={},e={},data={},n="";try{var r=t.split(".");header=T(d(r[0])||""),e=T(d(r[1])||""),n=r[2],data=e.d||{},delete e.d}catch(t){}return{header:header,claims:e,data:data,signature:n}};var N=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],h=this.chain_[2],f=this.chain_[3],l=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=f^b&(h^f),c=1518500249):(o=b^h^f,c=1859775393):i<60?(o=b&h|f&(b|h),c=2400959708):(o=b^h^f,c=3395469782);r=(a<<5|a>>>27)+o+l+c+n[i]&4294967295;l=f,f=h,h=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<e;){if(0===c)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(o[c]=t.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<e;)if(o[c]=t[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t},t}();var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),c},t.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,t)},t.prototype.sendOne=function(i,t){var e=this;this.task.then((function(){if(void 0!==e.observers&&void 0!==e.observers[i])try{t(e.observers[i])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function k(){}function O(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=r+" argument "}e.CONSTANTS=o,e.Deferred=y,e.ErrorFactory=I,e.FirebaseError=w,e.Sha1=N,e.assert=c,e.assertionError=h,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=l,e.base64Decode=d,e.base64Encode=function(t){var e=f(t);return l.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.decode=A,e.deepCopy=function(t){return v(void 0,t)},e.deepExtend=v,e.errorPrefix=O,e.getUA=m,e.isAdmin=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return m().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return m().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=A(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),o=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},e.issuedAtTime=function(t){var e=A(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=T,e.map=function(t,e,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,o=Object.entries(t);r<o.length;r++){var c=o[r];n(c[0],c[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var p=0,i=0;i<t.length;i++){var e=t.charCodeAt(i);e<128?p++:e<2048?p+=2:e>=55296&&e<=56319?(p+=4,i++):p+=3}return p},e.stringToByteArray=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,c(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(i)-56320)}n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):n<65536?(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},e.stringify=function(data){return JSON.stringify(data)},e.validateArgCount=function(t,e,n,r){var o;if(r<e?o="at least "+e:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(O(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(O(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(O(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(21))},303:function(t,e,n){"use strict";n(784)},304:function(t,e,n){"use strict";n(787)},345:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(783),o=n(302),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,o=e.optional,c=this.normalizeInstanceIdentifier(n);try{var h=this.getOrInitializeService(c);if(!h){if(o)return null;throw Error("Service "+this.name+" is not available")}return h}catch(t){if(o)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(component){var t,e;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=component,function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var n=r.__values(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var c=r.__read(o.value,2),h=c[0],f=c[1],l=this.normalizeInstanceIdentifier(h);try{var d=this.getOrInitializeService(l);f.resolve(d)}catch(t){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var f=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(component){var t=this.getProvider(component.name);if(t.isComponentSet())throw new Error("Component "+component.name+" has already been registered with "+this.name);t.setComponent(component)},t.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=c,e.ComponentContainer=f,e.Provider=h},346:function(t,e,n){"use strict";function r(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}var o;n.r(e),n.d(e,"LogLevel",(function(){return c})),n.d(e,"Logger",(function(){return y})),n.d(e,"setLogLevel",(function(){return m})),n.d(e,"setUserLogHandler",(function(){return w}));var c,h=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(c||(c={}));var f={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},l=c.INFO,d=((o={})[c.DEBUG]="log",o[c.VERBOSE]="log",o[c.INFO]="info",o[c.WARN]="warn",o[c.ERROR]="error",o),v=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var c=(new Date).toISOString(),h=d[e];if(!h)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[h].apply(console,r(["["+c+"]  "+t.name+":"],n))}},y=function(){function t(t){this.name=t,this._logLevel=l,this._logHandler=v,this._userLogHandler=null,h.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in c))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.DEBUG],t)),this._logHandler.apply(this,r([this,c.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.VERBOSE],t)),this._logHandler.apply(this,r([this,c.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.INFO],t)),this._logHandler.apply(this,r([this,c.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.WARN],t)),this._logHandler.apply(this,r([this,c.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,c.ERROR],t)),this._logHandler.apply(this,r([this,c.ERROR],t))},t}();function m(t){var e="string"==typeof t?f[t]:t;h.forEach((function(t){t.logLevel=e}))}function w(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=f[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var o=[],h=2;h<arguments.length;h++)o[h-2]=arguments[h];var f=o.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:c[n].toLowerCase(),message:f,args:o,type:e.name})}},r=0,o=h;r<o.length;r++){n(o[r])}}},781:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return C})),n.d(e,"__classPrivateFieldSet",(function(){return R}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function C(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function R(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},782:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return C})),n.d(e,"__classPrivateFieldSet",(function(){return R}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function C(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function R(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},783:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return C})),n.d(e,"__classPrivateFieldSet",(function(){return R}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function C(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function R(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},784:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(301))&&"object"==typeof r&&"default"in r?r.default:r,c=n(785),h=n(346),f=n(302),component=n(345),l=n(786),d=o.SDK_VERSION,v=new h.Logger("@firebase/firestore");function y(){return v.logLevel===h.LogLevel.DEBUG?0:v.logLevel===h.LogLevel.SILENT?2:1}function m(t){switch(t){case 0:v.logLevel=h.LogLevel.DEBUG;break;case 1:v.logLevel=h.LogLevel.ERROR;break;case 2:v.logLevel=h.LogLevel.SILENT;break;default:v.error("Firestore ("+d+"): Invalid value passed to `setLogLevel`")}}function w(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];if(v.logLevel<=h.LogLevel.DEBUG){var u=e.map(E);v.debug.apply(v,c.__spreadArrays(["Firestore ("+d+") ["+t+"]: "+i],u))}}function I(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];if(v.logLevel<=h.LogLevel.ERROR){var n=i.map(E);v.error.apply(v,c.__spreadArrays(["Firestore ("+d+"): "+t],n))}}function E(t){if("string"==typeof t)return t;var e=fn.t();try{return e.i(t)}catch(e){return t}}function _(t){var e="FIRESTORE ("+d+") INTERNAL ASSERTION FAILED: "+t;throw I(e),new Error(e)}function T(t,e){t||_(e)}var A=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",i=0;i<20;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return T(20===e.length,"Invalid auto ID: "+e),e},t}();function N(t,e){return t<e?-1:t>e?1:0}function S(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].isEqual(e[i]))return!1;return!0}function k(t){return t+"\0"}var O=function(t,e,i,n,r){this.s=t,this.persistenceKey=e,this.host=i,this.ssl=n,this.forceLongPolling=r},D=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return N(this.projectId,t.projectId)||N(this.database,t.database)},t}(),C=function(){function t(t){this.uid=t}return t.prototype.l=function(){return null!=this.uid},t.prototype.v=function(){return this.l()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.m=new t("google-credentials-uid"),t.p=new t("first-party-uid"),t}(),R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=function(t){function e(e,i){var n=t.call(this,i)||this;return n.code=e,n.message=i,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return c.__extends(e,t),e}(Error),x=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},q=function(){function t(){this._=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.I=function(){},t.prototype.T=function(t){T(!this._,"Can only call setChangeListener() once."),this._=t,t(C.UNAUTHENTICATED)},t.prototype.D=function(){T(null!==this._,"removeChangeListener() when no listener registered"),this._=null},t}(),L=function(){function t(t){var e=this;this.S=null,this.currentUser=C.UNAUTHENTICATED,this.R=!1,this.C=0,this._=null,this.forceRefresh=!1,this.S=function(){e.C++,e.currentUser=e.A(),e.R=!0,e._&&e._(e.currentUser)},this.C=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.S):(this.S(null),t.get().then((function(t){e.auth=t,e.S&&e.auth.addAuthTokenListener(e.S)}),(function(){})))}return t.prototype.getToken=function(){var t=this;T(null!=this.S,"getToken cannot be called after listener removed.");var e=this.C,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((function(i){if(t.C!==e)throw new P(R.ABORTED,"getToken aborted due to token change.");return i?(T("string"==typeof i.accessToken,"Invalid tokenData returned from getToken():"+i),new x(i.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.I=function(){this.forceRefresh=!0},t.prototype.T=function(t){T(!this._,"Can only call setChangeListener() once."),this._=t,this.R&&t(this.currentUser)},t.prototype.D=function(){T(null!=this.S,"removeChangeListener() called twice"),T(null!==this._,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.S),this.S=null,this._=null},t.prototype.A=function(){var t=this.auth&&this.auth.getUid();return T(null===t||"string"==typeof t,"Received invalid UID: "+t),new C(t)},t}(),M=function(){function t(t,e){this.P=t,this.k=e,this.type="FirstParty",this.user=C.p}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.P.auth.N([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),U=function(){function t(t,e){this.P=t,this.k=e}return t.prototype.getToken=function(){return Promise.resolve(new M(this.P,this.k))},t.prototype.T=function(t){t(C.p)},t.prototype.D=function(){},t.prototype.I=function(){},t}();function j(t){if(!t)return new q;switch(t.type){case"gapi":var e=t.O;return T(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new U(e,t.k||"0");case"provider":return t.O;default:throw new P(R.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function V(t,e){return void 0!==t?t:e}function G(t,e){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Number(i);isNaN(n)||e(n,t[i])}}function B(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function H(t){for(var e in T(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function z(t,e){if(0!==e.length)throw new P(R.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ct(e.length,"argument")+".")}function W(t,e,i){if(e.length!==i)throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires "+ct(i,"argument")+", but was called with "+ct(e.length,"argument")+".")}function K(t,e,i){if(e.length<i)throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ct(i,"argument")+", but was called with "+ct(e.length,"argument")+".")}function Y(t,e,i,n){if(e.length<i||e.length>n)throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires between "+i+" and "+n+" arguments, but was called with "+ct(e.length,"argument")+".")}function J(t,e,i,n){if(!(e instanceof Array)||e.length<n)throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires its "+i+" argument to be an array with at least "+ct(n,"element")+".")}function X(t,e,i,n){et(t,e,ut(i)+" argument",n)}function Q(t,e,i,n){void 0!==n&&X(t,e,i,n)}function $(t,e,i,n){et(t,e,i+" option",n)}function rt(t,e,i,n){void 0!==n&&$(t,e,i,n)}function Z(t,e,i,n,r){void 0!==n&&function(t,e,i,n,r){for(var u=[],s=0,o=r;s<o.length;s++){var c=o[s];if(c===n)return;u.push(it(c))}var h=it(n);throw new P(R.INVALID_ARGUMENT,"Invalid value "+h+" provided to function "+t+'() for option "'+i+'". Acceptable values: '+u.join(", "))}(t,0,i,n,r)}function tt(t,e,i,n){if(!e.some((function(t){return t===n})))throw new P(R.INVALID_ARGUMENT,"Invalid value "+it(n)+" provided to function "+t+"() for its "+ut(i)+" argument. Acceptable values: "+e.join(", "))}function et(t,e,i,n){if(!("object"===e?nt(n):"non-empty string"===e?"string"==typeof n&&""!==n:typeof n===e)){var r=it(n);throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires its "+i+" to be of type "+e+", but it was: "+r)}}function nt(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function it(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":_("Unknown wrong type: "+typeof t)}function ot(t,e,i){if(void 0===i)throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+ut(e)+" argument, but it was undefined.")}function st(t,e,i){B(e,(function(e,n){if(i.indexOf(e)<0)throw new P(R.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+i.join(", "))}))}function dt(t,e,i,n){var r=it(n);return new P(R.INVALID_ARGUMENT,"Function "+t+"() requires its "+ut(i)+" argument to be a "+e+", but it was: "+r)}function at(t,e,i){if(i<=0)throw new P(R.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+ut(e)+" argument to be a positive number, but it was: "+i+".")}function ut(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ct(t,e){return t+" "+e+(1===t?"":"s")}var ht=function(){function t(t,e){if(W("GeoPoint",arguments,2),X("GeoPoint","number",1,t),X("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.F=t,this.V=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.F},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.V},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.F===t.F&&this.V===t.V},t.prototype.U=function(t){return N(this.F,t.F)||N(this.V,t.V)},t}(),ft=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var i=Math.floor(e/1e3);return new t(i,1e6*(e-1e3*i))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?N(this.nanoseconds,t.nanoseconds):N(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),lt=function(){function t(t){this.timestamp=t}return t.j=function(e){var i=Math.floor(e/1e6);return new t(new ft(i,e%1e6*1e3))},t.L=function(e){return new t(e)},t.q=function(){return t.MIN},t.prototype.h=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.B=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t.MIN=new t(new ft(0,0)),t}(),pt=function(){function t(t,e,i){void 0===e?e=0:e>t.length&&_("offset "+e+" out of range "+t.length),void 0===i?i=t.length-e:i>t.length-e&&_("length "+i+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=i}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.G(this,e)},t.prototype.child=function(e){var i=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){i.push(t)})):i.push(e),this.W(i)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.K=function(t){return t=void 0===t?1:t,T(this.length>=t,"Can't call popFirst() with less segments"),this.W(this.segments,this.offset+t,this.length-t)},t.prototype.H=function(){return T(!this.J(),"Can't call popLast() on empty path"),this.W(this.segments,this.offset,this.length-1)},t.prototype.Y=function(){return T(!this.J(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.X=function(){return this.get(this.length-1)},t.prototype.get=function(t){return T(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.J=function(){return 0===this.length},t.prototype.$=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.Z=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])},t.prototype.tt=function(){return this.segments.slice(this.offset,this.limit())},t.G=function(t,e){for(var i=Math.min(t.length,e.length),n=0;n<i;n++){var r=t.get(n),u=e.get(n);if(r<u)return-1;if(r>u)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(e,t),e.prototype.W=function(t,i,n){return new e(t,i,n)},e.prototype.nt=function(){return this.tt().join("/")},e.prototype.toString=function(){return this.nt()},e.it=function(t){if(t.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.et=new e([]),e}(pt),yt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(e,t),e.prototype.W=function(t,i,n){return new e(t,i,n)},e.rt=function(t){return yt.test(t)},e.prototype.nt=function(){return this.tt().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.rt(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.nt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.st=function(){return new e(["__name__"])},e.ot=function(t){for(var i=[],n="",r=0,u=function(){if(0===n.length)throw new P(R.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");i.push(n),n=""},s=!1;r<t.length;){var o=t[r];if("\\"===o){if(r+1===t.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[r+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,r+=2}else"`"===o?(s=!s,r++):"."!==o||s?(n+=o,r++):(u(),r++)}if(u(),s)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(i)},e.et=new e([]),e}(pt),gt=function(){function t(e){this.path=e,T(t.ht(e),"Invalid DocumentKey with an odd number of segments: "+e.tt().join("/"))}return t.prototype.ct=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===vt.G(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.G=function(t,e){return vt.G(t.path,e.path)},t.ht=function(t){return t.length%2==0},t.at=function(e){return new t(new vt(e.slice()))},t.ft=function(e){return new t(vt.it(e))},t.EMPTY=new t(new vt([])),t}(),wt=function(){function t(t,e){this.G=t,this.root=e||It.EMPTY}return t.prototype.lt=function(e,i){return new t(this.G,this.root.lt(e,i,this.G).copy(null,null,It.dt,null,null))},t.prototype.remove=function(e){return new t(this.G,this.root.remove(e,this.G).copy(null,null,It.dt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.J();){var i=this.G(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,i=this.root;!i.J();){var n=this.G(t,i.key);if(0===n)return e+i.left.size;n<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1},t.prototype.J=function(){return this.root.J()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.vt=function(){return this.root.vt()},t.prototype.wt=function(){return this.root.wt()},t.prototype.pt=function(t){return this.root.pt(t)},t.prototype.forEach=function(t){this.pt((function(e,i){return t(e,i),!1}))},t.prototype.toString=function(){var t=[];return this.pt((function(e,i){return t.push(e+":"+i),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.bt=function(){return new bt(this.root,null,this.G,!1)},t.prototype.yt=function(t){return new bt(this.root,t,this.G,!1)},t.prototype._t=function(){return new bt(this.root,null,this.G,!0)},t.prototype.It=function(t){return new bt(this.root,t,this.G,!0)},t}(),bt=function(){function t(t,e,i,n){this.Tt=n,this.Et=[];for(var r=1;!t.J();)if(r=e?i(t.key,e):1,n&&(r*=-1),r<0)t=this.Tt?t.left:t.right;else{if(0===r){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.Dt=function(){T(this.Et.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.J();)this.Et.push(t),t=t.right;else for(t=t.right;!t.J();)this.Et.push(t),t=t.left;return e},t.prototype.St=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),It=function(){function t(e,i,n,r,u){this.key=e,this.value=i,this.color=null!=n?n:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=u?u:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,i,n,r,u){return new t(null!=e?e:this.key,null!=i?i:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=u?u:this.right)},t.prototype.J=function(){return!1},t.prototype.pt=function(t){return this.left.pt(t)||t(this.key,this.value)||this.right.pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.J()?this:this.left.min()},t.prototype.vt=function(){return this.min().key},t.prototype.wt=function(){return this.right.J()?this.key:this.right.wt()},t.prototype.lt=function(t,e,i){var n=this,r=i(t,n.key);return(n=r<0?n.copy(null,null,null,n.left.lt(t,e,i),null):0===r?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.lt(t,e,i))).Ct()},t.prototype.At=function(){if(this.left.J())return t.EMPTY;var e=this;return e.left.Pt()||e.left.left.Pt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.At(),null)).Ct()},t.prototype.remove=function(e,i){var n,r=this;if(i(e,r.key)<0)r.left.J()||r.left.Pt()||r.left.left.Pt()||(r=r.kt()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.Pt()&&(r=r.Nt()),r.right.J()||r.right.Pt()||r.right.left.Pt()||(r=r.Ot()),0===i(e,r.key)){if(r.right.J())return t.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.At())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.Ct()},t.prototype.Pt=function(){return this.color},t.prototype.Ct=function(){var t=this;return t.right.Pt()&&!t.left.Pt()&&(t=t.Ft()),t.left.Pt()&&t.left.left.Pt()&&(t=t.Nt()),t.left.Pt()&&t.right.Pt()&&(t=t.Vt()),t},t.prototype.kt=function(){var t=this.Vt();return t.right.left.Pt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Nt())).Ft()).Vt()),t},t.prototype.Ot=function(){var t=this.Vt();return t.left.left.Pt()&&(t=(t=t.Nt()).Vt()),t},t.prototype.Ft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Nt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Vt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.xt();return Math.pow(2,t)<=this.size+1},t.prototype.xt=function(){if(this.Pt()&&this.left.Pt())throw _("Red node has red child("+this.key+","+this.value+")");if(this.right.Pt())throw _("Right child of ("+this.key+","+this.value+") is red");var t=this.left.xt();if(t!==this.right.xt())throw _("Black depths differ");return t+(this.Pt()?0:1)},t.EMPTY=null,t.RED=!0,t.dt=!1,t}(),Et=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw _("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw _("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw _("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw _("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw _("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,i,n,r){return this},t.prototype.lt=function(t,e,i){return new It(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.J=function(){return!0},t.prototype.pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.vt=function(){return null},t.prototype.wt=function(){return null},t.prototype.Pt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.xt=function(){return 0},t}();It.EMPTY=new Et;var _t=function(){function t(t){this.G=t,this.data=new wt(this.G)}return t.jt=function(e){var i=new t(e.G);return e.forEach((function(t){i=i.add(t)})),i},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.vt()},t.prototype.last=function(){return this.data.wt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.pt((function(e,i){return t(e),!1}))},t.prototype.Lt=function(t,e){for(var i=this.data.yt(t[0]);i.St();){var n=i.Dt();if(this.G(n.key,t[1])>=0)return;e(n.key)}},t.prototype.qt=function(t,e){var i;for(i=void 0!==e?this.data.yt(e):this.data.bt();i.St();)if(!t(i.Dt().key))return},t.prototype.Bt=function(t){var e=this.data.yt(t);return e.St()?e.Dt().key:null},t.prototype.bt=function(){return new Tt(this.data.bt())},t.prototype.yt=function(t){return new Tt(this.data.yt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).lt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.J=function(){return this.data.J()},t.prototype.Mt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var i=this.data.bt(),n=e.data.bt();i.St();){var r=i.Dt().key,u=n.Dt().key;if(0!==this.G(r,u))return!1}return!0},t.prototype.tt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var i=new t(this.G);return i.data=e,i},t}(),Tt=function(){function t(t){this.Qt=t}return t.prototype.Dt=function(){return this.Qt.Dt().key},t.prototype.St=function(){return this.Qt.St()},t}(),At=function(){function t(){}return t.prototype.Gt=function(t,e){return new Xt(e,t)},t.prototype.Wt=function(t,e){return e},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),Nt=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=Ot(t),i=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},n=0,r=this.elements;n<r.length;n++)i(r[n]);return new ne(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&S(e.elements,this.elements)},t}(),St=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=Ot(t),i=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},n=0,r=this.elements;n<r.length;n++)i(r[n]);return new ne(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&S(e.elements,this.elements)},t}(),kt=function(){function t(t){this.Kt=t}return t.prototype.Gt=function(t,e){var i=this.zt(t);if(i instanceof Wt&&this.Kt instanceof Wt){var n=i.Ht+this.Kt.Ht;return new Wt(n)}return n=i.Ht+this.Kt.Ht,new Kt(n)},t.prototype.Wt=function(t,e){return T(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.zt=function(t){return t instanceof Ht?t:new Wt(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.Kt.isEqual(e.Kt)},t}();function Ot(t){return t instanceof ne?t.Ht.slice():[]}var Dt=function(){function t(t){this.fields=t}return t.Jt=function(e){return new t(e)},t.Yt=function(e){var i=new _t(mt.G);return e.forEach((function(t){return i=i.add(t)})),new t(i)},t.prototype.Xt=function(t){var e=!1;return this.fields.forEach((function(i){i.$(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Ct=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Rt=function(t,e){this.version=t,this.transformResults=e},Pt=function(){function t(t,e){this.updateTime=t,this.exists=e,T(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"$t",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Zt=function(t){return void 0!==this.updateTime?t instanceof ie&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof ie:(T(this.$t,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,i=t.updateTime,(null!=e?!(!i||!e.isEqual(i)):e===i)&&this.exists===t.exists;var e,i},t.NONE=new t,t}(),xt=function(){function t(){}return t.prototype.tn=function(t){null!=t&&T(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.nn=function(t){return t instanceof ie?t.version:lt.MIN},t}(),Lt=function(t){function e(e,i,n){var r=t.call(this)||this;return r.key=e,r.value=i,r.in=n,r.type=0,r}return c.__extends(e,t),e.prototype.Wt=function(t,e){this.tn(t),T(null==e.transformResults,"Transform results received by SetMutation.");var i=e.version;return new ie(this.key,i,{hasCommittedMutations:!0},this.value)},e.prototype.Gt=function(t,e,i){if(this.tn(t),!this.in.Zt(t))return t;var n=xt.nn(t);return new ie(this.key,n,{en:!0},this.value)},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.in.isEqual(t.in)},e}(xt),Mt=function(t){function e(e,i,n,r){var u=t.call(this)||this;return u.key=e,u.data=i,u.un=n,u.in=r,u.type=1,u}return c.__extends(e,t),e.prototype.Wt=function(t,e){if(this.tn(t),T(null==e.transformResults,"Transform results received by PatchMutation."),!this.in.Zt(t))return new se(this.key,e.version);var i=this.sn(t);return new ie(this.key,e.version,{hasCommittedMutations:!0},i)},e.prototype.Gt=function(t,e,i){if(this.tn(t),!this.in.Zt(t))return t;var n=xt.nn(t),r=this.sn(t);return new ie(this.key,n,{en:!0},r)},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.un.isEqual(t.un)&&this.in.isEqual(t.in)},e.prototype.sn=function(t){var e;return e=t instanceof ie?t.data():te.EMPTY,this.on(e)},e.prototype.on=function(t){var e=this,i=t.hn();return this.un.fields.forEach((function(t){if(!t.J()){var n=e.data.field(t);null!==n?i.set(t,n):i.delete(t)}})),i.cn()},e}(xt),Ut=function(t){function e(e,i){var n=t.call(this)||this;return n.key=e,n.fieldTransforms=i,n.type=2,n.in=Pt.exists(!0),n}return c.__extends(e,t),e.prototype.Wt=function(t,e){if(this.tn(t),T(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.in.Zt(t))return new se(this.key,e.version);var i=this.an(t),n=this.fn(t,e.transformResults),r=e.version,u=this.ln(i.data(),n);return new ie(this.key,r,{hasCommittedMutations:!0},u)},e.prototype.Gt=function(t,e,i){if(this.tn(t),!this.in.Zt(t))return t;var n=this.an(t),r=this.dn(i,t,e),u=this.ln(n.data(),r);return new ie(this.key,n.version,{en:!0},u)},e.prototype.rn=function(t){for(var e=null,i=0,n=this.fieldTransforms;i<n.length;i++){var r=n[i],u=t instanceof ie?t.field(r.field):void 0,s=r.transform.zt(u||null);null!=s&&(e=null==e?te.vn().set(r.field,s):e.set(r.field,s))}return e?e.cn():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&S(this.fieldTransforms,t.fieldTransforms)&&this.in.isEqual(t.in)},e.prototype.an=function(t){return T(t instanceof ie,"Unknown MaybeDocument type "+t),T(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.fn=function(t,e){var i=[];T(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var n=0;n<e.length;n++){var r=this.fieldTransforms[n],u=r.transform,s=null;t instanceof ie&&(s=t.field(r.field)),i.push(u.Wt(s,e[n]))}return i},e.prototype.dn=function(t,e,i){for(var n=[],r=0,u=this.fieldTransforms;r<u.length;r++){var s=u[r],o=s.transform,c=null;e instanceof ie&&(c=e.field(s.field)),null===c&&i instanceof ie&&(c=i.field(s.field)),n.push(o.Gt(c,t))}return n},e.prototype.ln=function(t,e){T(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var i=t.hn(),n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;i.set(r,e[n])}return i.cn()},e}(xt),jt=function(t){function e(e,i){var n=t.call(this)||this;return n.key=e,n.in=i,n.type=3,n}return c.__extends(e,t),e.prototype.Wt=function(t,e){return this.tn(t),T(null==e.transformResults,"Transform results received by DeleteMutation."),new oe(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.Gt=function(t,e,i){return this.tn(t),this.in.Zt(t)?(t&&T(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new oe(this.key,lt.q())):t},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},e}(xt),Ft=function(t){function e(e,i){var n=t.call(this)||this;return n.key=e,n.in=i,n.type=4,n}return c.__extends(e,t),e.prototype.Wt=function(t,e){_("VerifyMutation should only be used in Transactions.")},e.prototype.Gt=function(t,e,i){_("VerifyMutation should only be used in Transactions.")},e.prototype.rn=function(t){_("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},e}(xt),Vt=function(){function t(t,e){this.wn=t,this.timestampsInSnapshots=e}return t.mn=function(e,i){switch(e.serverTimestamps){case"estimate":return new t(1,i);case"previous":return new t(2,i);case"none":case void 0:return new t(0,i);default:return _("fromSnapshotOptions() called with invalid options.")}},t}(),qt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.pn=function(t){return T(this.gn!==t.gn,"Default compareTo should not be used for values of same type."),N(this.gn,t.gn)},t}(),Gt=function(t){function e(){var e=t.call(this)||this;return e.gn=0,e.Ht=null,e}return c.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.h=function(t){return t instanceof e?0:this.pn(t)},e.prototype.bn=function(){return 4},e.yn=new e,e}(qt),Bt=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=1,i}return c.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?N(this.Ht,t.Ht):this.pn(t)},e.prototype.bn=function(){return 4},e.of=function(t){return t?e._n:e.In},e._n=new e(!0),e.In=new e(!1),e}(qt),Ht=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=2,i}return c.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.h=function(t){return t instanceof e?(i=this.Ht)<(n=t.Ht)?-1:i>n?1:i===n?0:isNaN(i)?isNaN(n)?0:-1:1:this.pn(t);var i,n},e.prototype.bn=function(){return 8},e}(qt);function zt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&zt(this.Ht,t.Ht)},e}(Ht),Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&zt(this.Ht,t.Ht)},e.Tn=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ht),Yt=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=4,i}return c.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?N(this.Ht,t.Ht):this.pn(t)},e.prototype.bn=function(){return 2*this.Ht.length},e}(qt),Jt=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=3,i}return c.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Ht:this.Ht.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):t instanceof Xt?-1:this.pn(t)},e.prototype.bn=function(){return 16},e}(qt),Xt=function(t){function e(e,i){var n=t.call(this)||this;return n.En=e,n.previousValue=i,n.gn=3,n}return c.__extends(e,t),e.prototype.value=function(t){return t&&1===t.wn?new Jt(this.En).value(t):t&&2===t.wn&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.En.isEqual(t.En)},e.prototype.h=function(t){return t instanceof e?this.En.U(t.En):t instanceof Jt?1:this.pn(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.En.toString()+">"},e.prototype.bn=function(){return 16+(this.previousValue?this.previousValue.bn():0)},e}(qt),Qt=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=5,i}return c.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.pn(t)},e.prototype.bn=function(){return this.Ht.Dn()},e}(qt),$t=function(t){function e(e,i){var n=t.call(this)||this;return n.s=e,n.key=i,n.gn=6,n}return c.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.s.isEqual(t.s)},e.prototype.h=function(t){if(t instanceof e){var i=this.s.h(t.s);return 0!==i?i:gt.G(this.key,t.key)}return this.pn(t)},e.prototype.bn=function(){return this.s.projectId.length+this.s.database.length+this.key.toString().length},e}(qt),Zt=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=7,i}return c.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.pn(t)},e.prototype.bn=function(){return 16},e}(qt),te=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=9,i}return c.__extends(e,t),e.vn=function(){return new ee(e.EMPTY.Ht)},e.prototype.value=function(t){var e={};return this.Ht.pt((function(i,n){e[i]=n.value(t)})),e},e.prototype.forEach=function(t){this.Ht.pt(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var i=this.Ht.bt(),n=t.Ht.bt();i.St()&&n.St();){var r=i.Dt(),u=n.Dt();if(r.key!==u.key||!r.value.isEqual(u.value))return!1}return!i.St()&&!n.St()}return!1},e.prototype.h=function(t){if(t instanceof e){for(var i=this.Ht.bt(),n=t.Ht.bt();i.St()&&n.St();){var r=i.Dt(),u=n.Dt(),s=N(r.key,u.key)||r.value.h(u.value);if(s)return s}return N(i.St(),n.St())}return this.pn(t)},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){T(!t.J(),"Can't get field of empty path");var i=this;return t.forEach((function(t){i=i instanceof e?i.Ht.get(t):null})),i},e.prototype.un=function(){var t=new _t(mt.G);return this.Ht.forEach((function(i,n){var r=new mt([i]);if(n instanceof e){var u=n.un().fields;u.J()?t=t.add(r):u.forEach((function(e){t=t.add(r.child(e))}))}else t=t.add(r)})),Dt.Jt(t)},e.prototype.bn=function(){var t=0;return this.Ht.pt((function(e,i){t+=e.length+i.bn()})),t},e.prototype.toString=function(){return this.Ht.toString()},e.prototype.hn=function(){return new ee(this.Ht)},e.EMPTY=new e(new wt(N)),e}(qt),ee=function(){function t(t){this.Ht=t}return t.prototype.set=function(t,e){T(!t.J(),"Cannot set field for empty path on ObjectValue");var i=t.Y();if(1===t.length)this.Ht=this.Ht.lt(i,e);else{var n=this.Ht.get(i),r=(n instanceof te?n:te.EMPTY).hn().set(t.K(),e).cn();this.Ht=this.Ht.lt(i,r)}return this},t.prototype.delete=function(t){T(!t.J(),"Cannot delete field for empty path on ObjectValue");var e=t.Y();if(1===t.length)this.Ht=this.Ht.remove(e);else{var i=this.Ht.get(e);if(i instanceof te){var n=i.hn().delete(t.K()).cn();this.Ht=this.Ht.lt(t.Y(),n)}}return this},t.prototype.cn=function(){return new te(this.Ht)},t}(),ne=function(t){function e(e){var i=t.call(this)||this;return i.Ht=e,i.gn=8,i}return c.__extends(e,t),e.prototype.value=function(t){return this.Ht.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,i=this.Ht;e<i.length;e++)if(i[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.Ht.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.Ht.length!==t.Ht.length)return!1;for(var i=0;i<this.Ht.length;i++)if(!this.Ht[i].isEqual(t.Ht[i]))return!1;return!0}return!1},e.prototype.h=function(t){if(t instanceof e){for(var i=Math.min(this.Ht.length,t.Ht.length),n=0;n<i;n++){var r=this.Ht[n].h(t.Ht[n]);if(r)return r}return N(this.Ht.length,t.Ht.length)}return this.pn(t)},e.prototype.bn=function(){return this.Ht.reduce((function(t,e){return t+e.bn()}),0)},e.prototype.toString=function(){return"["+this.Ht.map((function(t){return t.toString()})).join(",")+"]"},e}(qt),re=function(){function t(t,e){this.key=t,this.version=e}return t.Sn=function(t,e){return gt.G(t.key,e.key)},t}(),ie=function(t){function e(e,i,n,r,u,s){var o=t.call(this,e,i)||this;return o.Rn=r,o.proto=u,o.converter=s,T(void 0!==o.Rn||void 0!==o.proto&&void 0!==o.converter,"If objectValue is not defined, proto and converter need to be set."),o.en=!!n.en,o.hasCommittedMutations=!!n.hasCommittedMutations,o}return c.__extends(e,t),e.prototype.field=function(t){if(this.Rn)return this.Rn.field(t);this.Cn||(this.Cn=new Map);var e=t.nt(),i=this.Cn.get(e);if(void 0===i){var n=this.An(t);i=void 0===n?null:this.converter(n),this.Cn.set(e,i)}return i},e.prototype.data=function(){var t=this;if(!this.Rn){var e=te.vn();B(this.proto.fields||{},(function(i,n){e.set(new mt([i]),t.converter(n))})),this.Rn=e.cn(),this.Cn=void 0}return this.Rn},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.en===t.en&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.en+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.en||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.An=function(t){T(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.Y()]:void 0,i=1;i<t.length;++i){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(i)]}return e},e.Pn=function(t,e,i){var n=e.field(t),r=i.field(t);return null!==n&&null!==r?n.h(r):_("Trying to compare documents on fields that don't exist")},e}(re),oe=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}return c.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(re),se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(re);function ae(t){return null==t}function ue(t){return-0===t&&1/t==-1/0}function ce(t){return"number"==typeof t&&Number.isInteger(t)&&!ue(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var he=function(){function t(t,e,i,n,r,u,s){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===u&&(u=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=n,this.limit=r,this.startAt=u,this.endAt=s,this.kn=null}return t.prototype.canonicalId=function(){if(null===this.kn){var t=this.path.nt();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,i=this.filters;e<i.length;e++)t+=i[e].canonicalId(),t+=",";t+="|ob:";for(var n=0,r=this.orderBy;n<r.length;n++)t+=r[n].canonicalId(),t+=",";ae(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.kn=t}return this.kn},t.prototype.toString=function(){var t=this.path.nt();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ae(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Nn=function(){return gt.ht(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),fe=function(){function t(t,e,i,n,r,u,s,o){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===u&&(u="F"),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.On=i,this.filters=n,this.limit=r,this.Fn=u,this.startAt=s,this.endAt=o,this.Vn=null,this.Un=null,this.startAt&&this.xn(this.startAt),this.endAt&&this.xn(this.endAt)}return t.jn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Vn){var t=this.Ln(),e=this.qn();if(null!==t&&null===e)t.ut()?this.Vn=[Ee]:this.Vn=[new Ie(t),Ee];else{T(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.Vn=[];for(var i=!1,n=0,r=this.On;n<r.length;n++){var u=r[n];this.Vn.push(u),u.field.ut()&&(i=!0)}if(!i){var s=this.On.length>0?this.On[this.On.length-1].dir:we.ASCENDING;this.Vn.push(s===we.ASCENDING?Ee:_e)}}}return this.Vn},enumerable:!0,configurable:!0}),t.prototype.Bn=function(e){T(null==this.Ln()||!(e instanceof pe)||!e.Mn()||e.field.isEqual(this.Ln()),"Query must only have one inequality field."),T(!this.Nn(),"No filtering allowed for document query");var i=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.On.slice(),i,this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Qn=function(e){T(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var i=this.On.concat([e]);return new t(this.path,this.collectionGroup,i,this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Gn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Wn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.zn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,e,this.endAt)},t.prototype.Kn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,e)},t.prototype.Hn=function(e){return new t(e,null,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Jn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.On.length||1===this.On.length&&this.On[0].field.ut())},t.prototype.canonicalId=function(){return this.Yn().canonicalId()+"|lt:"+this.Fn},t.prototype.toString=function(){return"Query(target="+this.Yn().toString()+"; limitType="+this.Fn+")"},t.prototype.isEqual=function(t){return this.Yn().isEqual(t.Yn())&&this.Fn===t.Fn},t.prototype.Xn=function(t,e){for(var i=!1,n=0,r=this.orderBy;n<r.length;n++){var u=r[n],s=u.compare(t,e);if(0!==s)return s;i=i||u.field.ut()}return T(i,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.$n(t)&&this.Zn(t)&&this.ti(t)&&this.ni(t)},t.prototype.ii=function(){return!ae(this.limit)&&"F"===this.Fn},t.prototype.ei=function(){return!ae(this.limit)&&"L"===this.Fn},t.prototype.qn=function(){return this.On.length>0?this.On[0].field:null},t.prototype.Ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var i=e[t];if(i instanceof pe&&i.Mn())return i.field}return null},t.prototype.ri=function(t){for(var e=0,i=this.filters;e<i.length;e++){var n=i[e];if(n instanceof pe&&t.indexOf(n.op)>=0)return n.op}return null},t.prototype.Nn=function(){return this.Yn().Nn()},t.prototype.ui=function(){return null!==this.collectionGroup},t.prototype.Yn=function(){if(!this.Un)if("F"===this.Fn)this.Un=new he(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,i=this.orderBy;e<i.length;e++){var n=i[e],r=n.dir===we.DESCENDING?we.ASCENDING:we.DESCENDING;t.push(new Ie(n.field,r))}var u=this.endAt?new be(this.endAt.position,!this.endAt.before):null,s=this.startAt?new be(this.startAt.position,!this.startAt.before):null;this.Un=new he(this.path,this.collectionGroup,t,this.filters,this.limit,u,s)}return this.Un},t.prototype.$n=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.ct(this.collectionGroup)&&this.path.$(e):gt.ht(this.path)?this.path.isEqual(e):this.path.Z(e)},t.prototype.Zn=function(t){for(var e=0,i=this.On;e<i.length;e++){var n=i[e];if(!n.field.ut()&&null===t.field(n.field))return!1}return!0},t.prototype.ti=function(t){for(var e=0,i=this.filters;e<i.length;e++)if(!i[e].matches(t))return!1;return!0},t.prototype.ni=function(t){return!(this.startAt&&!this.startAt.si(this.orderBy,t)||this.endAt&&this.endAt.si(this.orderBy,t))},t.prototype.xn=function(t){T(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),le=function(){function t(t){this.name=t}return t.it=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return _("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),pe=function(t){function e(e,i,n){var r=t.call(this)||this;return r.field=e,r.op=i,r.value=n,r}return c.__extends(e,t),e.create=function(t,i,n){if(t.ut())return i===le.IN?(T(n instanceof ne,"Comparing on key with IN, but filter value not an ArrayValue"),T(n.Ht.every((function(t){return t instanceof $t})),"Comparing on key with IN, but an array value was not a RefValue"),new ve(t,n)):(T(n instanceof $t,"Comparing on key, but filter value not a RefValue"),T(i!==le.ARRAY_CONTAINS&&i!==le.ARRAY_CONTAINS_ANY,"'"+i.toString()+"' queries don't make sense on document keys."),new de(t,i,n));if(n.isEqual(Gt.yn)){if(i!==le.EQUAL)throw new P(R.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,i,n)}if(n.isEqual(Kt.Tn)){if(i!==le.EQUAL)throw new P(R.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,i,n)}return i===le.ARRAY_CONTAINS?new ye(t,n):i===le.IN?(T(n instanceof ne,"IN filter has invalid value: "+n.toString()),new me(t,n)):i===le.ARRAY_CONTAINS_ANY?(T(n instanceof ne,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new ge(t,n)):new e(t,i,n)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.gn===e.gn&&this.oi(e.h(this.value))},e.prototype.oi=function(t){switch(this.op){case le.LESS_THAN:return t<0;case le.LESS_THAN_OR_EQUAL:return t<=0;case le.EQUAL:return 0===t;case le.GREATER_THAN:return t>0;case le.GREATER_THAN_OR_EQUAL:return t>=0;default:return _("Unknown FieldFilter operator: "+this.op)}},e.prototype.Mn=function(){return[le.LESS_THAN,le.LESS_THAN_OR_EQUAL,le.GREATER_THAN,le.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.nt()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.nt()+" "+this.op+" "+this.value.value()},e}((function(){})),de=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(e,t),e.prototype.matches=function(t){var e=this.value,i=gt.G(t.key,e.key);return this.oi(i)},e}(pe),ve=function(t){function e(e,i){var n=t.call(this,e,le.IN,i)||this;return n.value=i,n}return c.__extends(e,t),e.prototype.matches=function(t){return this.value.Ht.some((function(e){return t.key.isEqual(e.key)}))},e}(pe),ye=function(t){function e(e,i){return t.call(this,e,le.ARRAY_CONTAINS,i)||this}return c.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof ne&&e.contains(this.value)},e}(pe),me=function(t){function e(e,i){var n=t.call(this,e,le.IN,i)||this;return n.value=i,n}return c.__extends(e,t),e.prototype.matches=function(t){var e=this.value,i=t.field(this.field);return null!==i&&e.contains(i)},e}(pe),ge=function(t){function e(e,i){var n=t.call(this,e,le.ARRAY_CONTAINS_ANY,i)||this;return n.value=i,n}return c.__extends(e,t),e.prototype.matches=function(t){var e=this,i=t.field(this.field);return i instanceof ne&&i.Ht.some((function(t){return e.value.contains(t)}))},e}(pe),we=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),be=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,i=this.position;e<i.length;e++)t+=i[e].toString();return t},t.prototype.si=function(t,e){T(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var i=0,n=0;n<this.position.length;n++){var r=t[n],u=this.position[n];if(r.field.ut())T(u instanceof $t,"Bound has a non-key value where the key path is being used."),i=gt.G(u.key,e.key);else{var s=e.field(r.field);T(null!==s,"Field should exist since document matched the orderBy already."),i=u.h(s)}if(r.dir===we.DESCENDING&&(i*=-1),0!==i)break}return this.before?i<=0:i<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var i=this.position[e],n=t.position[e];if(!i.isEqual(n))return!1}return!0},t}(),Ie=function(){function t(t,e){this.field=t,void 0===e&&(e=we.ASCENDING),this.dir=e,this.hi=t.ut()}return t.prototype.compare=function(t,e){var i=this.hi?ie.Sn(t,e):ie.Pn(this.field,t,e);switch(this.dir){case we.ASCENDING:return i;case we.DESCENDING:return-1*i;default:return _("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.nt()+this.dir.toString()},t.prototype.toString=function(){return this.field.nt()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Ee=new Ie(mt.st(),we.ASCENDING),_e=new Ie(mt.st(),we.DESCENDING),Te=function(){function t(t){this.ci=t}return t.fromBase64String=function(e){return new t(fn.t().atob(e))},t.fromUint8Array=function(e){return new t(Ae(e))},t.prototype.toBase64=function(){return fn.t().btoa(this.ci)},t.prototype.toUint8Array=function(){return Ne(this.ci)},t.prototype.bn=function(){return 2*this.ci.length},t.prototype.isEqual=function(t){return this.ci===t.ci},t.ai=new t(""),t}();function Ae(t){for(var e="",i=0;i<t.length;++i)e+=String.fromCharCode(t[i]);return e}function Ne(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}var Se,ke,Oe=function(){function t(t,e,i,n,r,u,s){void 0===r&&(r=lt.MIN),void 0===u&&(u=lt.MIN),void 0===s&&(s=Te.ai),this.target=t,this.targetId=e,this.fi=i,this.sequenceNumber=n,this.li=r,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return t.prototype.di=function(e){return new t(this.target,this.targetId,this.fi,e,this.li,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.vi=function(e,i){return new t(this.target,this.targetId,this.fi,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)},t.prototype.wi=function(e){return new t(this.target,this.targetId,this.fi,this.sequenceNumber,this.li,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.fi===t.fi&&this.sequenceNumber===t.sequenceNumber&&this.li.isEqual(t.li)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},t}(),De=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Ce(t){switch(t){case R.OK:return _("Treated status OK as error");case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return _("Unknown status code: "+t)}}function Re(t){if(void 0===t)return I("GRPC error has no .code"),R.UNKNOWN;switch(t){case Se.OK:return R.OK;case Se.CANCELLED:return R.CANCELLED;case Se.UNKNOWN:return R.UNKNOWN;case Se.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Se.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Se.INTERNAL:return R.INTERNAL;case Se.UNAVAILABLE:return R.UNAVAILABLE;case Se.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Se.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Se.NOT_FOUND:return R.NOT_FOUND;case Se.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Se.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Se.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Se.ABORTED:return R.ABORTED;case Se.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Se.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Se.DATA_LOSS:return R.DATA_LOSS;default:return _("Unknown status code: "+t)}}function Pe(t){if(void 0===t)return Se.OK;switch(t){case R.OK:return Se.OK;case R.CANCELLED:return Se.CANCELLED;case R.UNKNOWN:return Se.UNKNOWN;case R.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case R.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case R.INTERNAL:return Se.INTERNAL;case R.UNAVAILABLE:return Se.UNAVAILABLE;case R.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case R.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case R.NOT_FOUND:return Se.NOT_FOUND;case R.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case R.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case R.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case R.ABORTED:return Se.ABORTED;case R.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case R.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case R.DATA_LOSS:return Se.DATA_LOSS;default:return _("Unknown status code: "+t)}}(ke=Se||(Se={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";var xe=new wt(gt.G);function Le(){return xe}function Me(){return Le()}var Ue=new wt(gt.G);function je(){return Ue}var Fe=new wt(gt.G);function Ve(){return Fe}var qe=new _t(gt.G);function Ge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=qe,n=0,r=t;n<r.length;n++){var u=r[n];i=i.add(u)}return i}var Be=new _t(N);function He(){return Be}var ze=function(){function t(t){this.G=t?function(e,i){return t(e,i)||gt.G(e.key,i.key)}:function(t,e){return gt.G(t.key,e.key)},this.mi=je(),this.pi=new wt(this.G)}return t.gi=function(e){return new t(e.G)},t.prototype.has=function(t){return null!=this.mi.get(t)},t.prototype.get=function(t){return this.mi.get(t)},t.prototype.first=function(){return this.pi.vt()},t.prototype.last=function(){return this.pi.wt()},t.prototype.J=function(){return this.pi.J()},t.prototype.indexOf=function(t){var e=this.mi.get(t);return e?this.pi.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pi.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.pi.pt((function(e,i){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.mi.lt(t.key,t),e.pi.lt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.mi.remove(t),this.pi.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var i=this.pi.bt(),n=e.pi.bt();i.St();){var r=i.Dt().key,u=n.Dt().key;if(!r.isEqual(u))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,i){var n=new t;return n.G=this.G,n.mi=e,n.pi=i,n},t}(),We=function(){function t(){this.bi=new wt(gt.G)}return t.prototype.track=function(t){var e=t.doc.key,i=this.bi.get(e);i?0!==t.type&&3===i.type?this.bi=this.bi.lt(e,t):3===t.type&&1!==i.type?this.bi=this.bi.lt(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.bi=this.bi.lt(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.bi=this.bi.remove(e):1===t.type&&2===i.type?this.bi=this.bi.lt(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):_("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(i)):this.bi=this.bi.lt(e,t)},t.prototype.yi=function(){var t=[];return this.bi.pt((function(e,i){t.push(i)})),t},t}(),Ke=function(){function t(t,e,i,n,r,u,s,o){this.query=t,this.docs=e,this._i=i,this.docChanges=n,this.Ii=r,this.fromCache=u,this.Ti=s,this.Ei=o}return t.Di=function(e,i,n,r){var u=[];return i.forEach((function(t){u.push({type:0,doc:t})})),new t(e,i,ze.gi(i),u,n,r,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ii.J()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ti===t.Ti&&this.Ii.isEqual(t.Ii)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this._i.isEqual(t._i)))return!1;var e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(var n=0;n<e.length;n++)if(e[n].type!==i[n].type||!e[n].doc.isEqual(i[n].doc))return!1;return!0},t}(),Ye=function(){function t(t,e,i,n,r){this.li=t,this.Si=e,this.Ri=i,this.Ci=n,this.Ai=r}return t.Pi=function(e,i){var n,r=((n={})[e]=Je.ki(e,i),n);return new t(lt.MIN,r,He(),Le(),Ge())},t}(),Je=function(){function t(t,e,i,n,r){this.resumeToken=t,this.Ni=e,this.Oi=i,this.Fi=n,this.Vi=r}return t.ki=function(e,i){return new t(Te.ai,i,Ge(),Ge(),Ge())},t}(),Xe=function(t,e,i,n){this.Ui=t,this.removedTargetIds=e,this.key=i,this.xi=n},Qe=function(t,e){this.targetId=t,this.ji=e},$e=function(t,e,i,n){void 0===i&&(i=Te.ai),void 0===n&&(n=null),this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=n},Ze=function(){function t(){this.Li=0,this.qi=nn(),this.Bi=Te.ai,this.Mi=!1,this.Qi=!0}return Object.defineProperty(t.prototype,"Ni",{get:function(){return this.Mi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Bi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Gi",{get:function(){return 0!==this.Li},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wi",{get:function(){return this.Qi},enumerable:!0,configurable:!0}),t.prototype.zi=function(t){t.bn()>0&&(this.Qi=!0,this.Bi=t)},t.prototype.Ki=function(){var t=Ge(),e=Ge(),i=Ge();return this.qi.forEach((function(n,r){switch(r){case 0:t=t.add(n);break;case 2:e=e.add(n);break;case 1:i=i.add(n);break;default:_("Encountered invalid change type: "+r)}})),new Je(this.Bi,this.Mi,t,e,i)},t.prototype.Hi=function(){this.Qi=!1,this.qi=nn()},t.prototype.Ji=function(t,e){this.Qi=!0,this.qi=this.qi.lt(t,e)},t.prototype.Yi=function(t){this.Qi=!0,this.qi=this.qi.remove(t)},t.prototype.Xi=function(){this.Li+=1},t.prototype.$i=function(){this.Li-=1},t.prototype.Zi=function(){this.Qi=!0,this.Mi=!0},t}(),tn=function(){function t(t){this.te=t,this.ne={},this.ie=Le(),this.ee=en(),this.re=new _t(N)}return t.prototype.ue=function(t){for(var e=0,i=t.Ui;e<i.length;e++){var n=i[e];t.xi instanceof ie?this.se(n,t.xi):t.xi instanceof oe&&this.oe(n,t.key,t.xi)}for(var r=0,u=t.removedTargetIds;r<u.length;r++)n=u[r],this.oe(n,t.key,t.xi)},t.prototype.he=function(t){var e=this;this.ce(t,(function(i){var n=e.ae(i);switch(t.state){case 0:e.fe(i)&&n.zi(t.resumeToken);break;case 1:n.$i(),n.Gi||n.Hi(),n.zi(t.resumeToken);break;case 2:n.$i(),n.Gi||e.removeTarget(i),T(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:e.fe(i)&&(n.Zi(),n.zi(t.resumeToken));break;case 4:e.fe(i)&&(e.le(i),n.zi(t.resumeToken));break;default:_("Unknown target watch change state: "+t.state)}}))},t.prototype.ce=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):G(this.ne,e)},t.prototype.de=function(t){var e=t.targetId,i=t.ji.count,n=this.ve(e);if(n){var r=n.target;if(r.Nn())if(0===i){var u=new gt(r.path);this.oe(e,u,new oe(u,lt.q()))}else T(1===i,"Single document existence filter with count: "+i);else this.we(e)!==i&&(this.le(e),this.re=this.re.add(e))}},t.prototype.me=function(t){var e=this,i={};G(this.ne,(function(n,r){var u=e.ve(n);if(u){if(r.Ni&&u.target.Nn()){var s=new gt(u.target.path);null!==e.ie.get(s)||e.pe(n,s)||e.oe(n,s,new oe(s,t))}r.Wi&&(i[n]=r.Ki(),r.Hi())}}));var n=Ge();this.ee.forEach((function(t,i){var r=!0;i.qt((function(t){var i=e.ve(t);return!i||2===i.fi||(r=!1,!1)})),r&&(n=n.add(t))}));var r=new Ye(t,i,this.re,this.ie,n);return this.ie=Le(),this.ee=en(),this.re=new _t(N),r},t.prototype.se=function(t,e){if(this.fe(t)){var i=this.pe(t,e.key)?2:0;this.ae(t).Ji(e.key,i),this.ie=this.ie.lt(e.key,e),this.ee=this.ee.lt(e.key,this.ge(e.key).add(t))}},t.prototype.oe=function(t,e,i){if(this.fe(t)){var n=this.ae(t);this.pe(t,e)?n.Ji(e,1):n.Yi(e),this.ee=this.ee.lt(e,this.ge(e).delete(t)),i&&(this.ie=this.ie.lt(e,i))}},t.prototype.removeTarget=function(t){delete this.ne[t]},t.prototype.we=function(t){var e=this.ae(t).Ki();return this.te.be(t).size+e.Oi.size-e.Vi.size},t.prototype.Xi=function(t){this.ae(t).Xi()},t.prototype.ae=function(t){return this.ne[t]||(this.ne[t]=new Ze),this.ne[t]},t.prototype.ge=function(t){var e=this.ee.get(t);return e||(e=new _t(N),this.ee=this.ee.lt(t,e)),e},t.prototype.fe=function(t){var e=null!==this.ve(t);return e||w("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ve=function(t){var e=this.ne[t];return e&&e.Gi?null:this.te.ye(t)},t.prototype.le=function(t){var e=this;T(!this.ne[t].Gi,"Should only reset active targets"),this.ne[t]=new Ze,this.te.be(t).forEach((function(i){e.oe(t,i,null)}))},t.prototype.pe=function(t,e){return this.te.be(t).has(e)},t}();function en(){return new wt(gt.G)}function nn(){return new wt(gt.G)}var rn,li,on=((rn={})[we.ASCENDING.name]="ASCENDING",rn[we.DESCENDING.name]="DESCENDING",rn),sn=((li={})[le.LESS_THAN.name]="LESS_THAN",li[le.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",li[le.GREATER_THAN.name]="GREATER_THAN",li[le.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",li[le.EQUAL.name]="EQUAL",li[le.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",li[le.IN.name]="IN",li[le.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",li),an=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function un(t,e){T(!ae(t),e+" is missing")}function cn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):_("can't parse "+t)}var hn=function(){function t(t,e){this.s=t,this.options=e}return t.prototype._e=function(t){var e=void 0===t.code?R.UNKNOWN:Re(t.code);return new P(e,t.message||"")},t.prototype.Ie=function(t){return this.options.Te||ae(t)?t:{value:t}},t.prototype.Ee=function(t){var e;return ae(e="object"==typeof t?t.value:t)?null:e},t.prototype.M=function(t){return this.options.Te?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.L=function(t){if("string"==typeof t)return this.De(t);T(!!t,"Cannot deserialize null or undefined timestamp.");var e=cn(t.seconds||"0"),i=t.nanos||0;return new ft(e,i)},t.prototype.De=function(t){var e=0,i=an.exec(t);if(T(!!i,"invalid timestamp: "+t),i[1]){var n=i[1];n=(n+"000000000").substr(0,9),e=Number(n)}var r=new Date(t),u=Math.floor(r.getTime()/1e3);return new ft(u,e)},t.prototype.Se=function(t){return this.options.Te?t.toBase64():t.toUint8Array()},t.prototype.Re=function(t){return this.options.Te?(T(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),Te.fromBase64String(t||"")):(T(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),Te.fromUint8Array(t||new Uint8Array))},t.prototype.Ce=function(t){return"string"==typeof t?(T(this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),vn.fromBase64String(t)):(T(!this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),vn.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.M(t.M())},t.prototype.fromVersion=function(t){return T(!!t,"Trying to deserialize version that isn't set"),lt.L(this.L(t))},t.prototype.Ae=function(t,e){return this.Pe(t).child("documents").child(e).nt()},t.prototype.ke=function(t){var e=vt.it(t);return T(this.Ne(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.Oe=function(t){return this.Ae(this.s,t.path)},t.prototype.Fe=function(t){var e=this.ke(t);return T(e.get(1)===this.s.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.s.projectId),T(!e.get(3)&&!this.s.database||e.get(3)===this.s.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.s.database),new gt(this.Ve(e))},t.prototype.Ue=function(t){return this.Ae(this.s,t)},t.prototype.xe=function(t){var e=this.ke(t);return 4===e.length?vt.et:this.Ve(e)},Object.defineProperty(t.prototype,"je",{get:function(){return new vt(["projects",this.s.projectId,"databases",this.s.database]).nt()},enumerable:!0,configurable:!0}),t.prototype.Pe=function(t){return new vt(["projects",t.projectId,"databases",t.database])},t.prototype.Ve=function(t){return T(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.K(5)},t.prototype.Ne=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.Le=function(t){if(t instanceof Gt)return{nullValue:"NULL_VALUE"};if(t instanceof Bt)return{booleanValue:t.value()};if(t instanceof Wt)return{integerValue:""+t.value()};if(t instanceof Kt){var e=t.value();if(this.options.Te){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"};if(ue(e))return{doubleValue:"-0"}}return{doubleValue:t.value()}}return t instanceof Yt?{stringValue:t.value()}:t instanceof te?{mapValue:this.qe(t)}:t instanceof ne?{arrayValue:this.Be(t)}:t instanceof Jt?{timestampValue:this.M(t.Ht)}:t instanceof Zt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Qt?{bytesValue:this.Se(t.value())}:t instanceof $t?{referenceValue:this.Ae(t.s,t.key.path)}:_("Unknown FieldValue "+JSON.stringify(t))},t.prototype.Me=function(t){var e=this;if("nullValue"in t)return Gt.yn;if("booleanValue"in t)return Bt.of(t.booleanValue);if("integerValue"in t)return new Wt(cn(t.integerValue));if("doubleValue"in t){if(this.options.Te){if("NaN"===t.doubleValue)return Kt.Tn;if("Infinity"===t.doubleValue)return Kt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Kt.NEGATIVE_INFINITY;if("-0"===t.doubleValue)return new Kt(-0)}return new Kt(t.doubleValue)}if("stringValue"in t)return new Yt(t.stringValue);if("mapValue"in t)return this.Qe(t.mapValue.fields||{});if("arrayValue"in t){un(t.arrayValue,"arrayValue");var i=t.arrayValue.values||[];return new ne(i.map((function(t){return e.Me(t)})))}if("timestampValue"in t)return un(t.timestampValue,"timestampValue"),new Jt(this.L(t.timestampValue));if("geoPointValue"in t){un(t.geoPointValue,"geoPointValue");var n=t.geoPointValue.latitude||0,r=t.geoPointValue.longitude||0;return new Zt(new ht(n,r))}if("bytesValue"in t){un(t.bytesValue,"bytesValue");var u=this.Ce(t.bytesValue);return new Qt(u)}if("referenceValue"in t){un(t.referenceValue,"referenceValue");var s=this.ke(t.referenceValue),o=new D(s.get(1),s.get(3)),c=new gt(this.Ve(s));return new $t(o,c)}return _("Unknown Value proto "+JSON.stringify(t))},t.prototype.Ge=function(t,e){return{name:this.Oe(t),fields:this.We(e)}},t.prototype.ze=function(t){return T(!t.en,"Can't serialize documents with mutations."),{name:this.Oe(t.key),fields:this.We(t.data()),updateTime:this.M(t.version.M())}},t.prototype.Ke=function(t,e){var i=this,n=this.Fe(t.name),r=this.fromVersion(t.updateTime);return new ie(n,r,{hasCommittedMutations:!!e},void 0,t,(function(t){return i.Me(t)}))},t.prototype.We=function(t){var e=this,i={};return t.forEach((function(t,n){i[t]=e.Le(n)})),i},t.prototype.Qe=function(t){var e=this,i=t,n=te.vn();return B(i,(function(t,i){n.set(new mt([t]),e.Me(i))})),n.cn()},t.prototype.qe=function(t){return{fields:this.We(t)}},t.prototype.Be=function(t){var e=this,i=[];return t.forEach((function(t){i.push(e.Le(t))})),{values:i}},t.prototype.He=function(t){var e=this;T(!!t.found,"Tried to deserialize a found document from a missing document."),un(t.found.name,"doc.found.name"),un(t.found.updateTime,"doc.found.updateTime");var i=this.Fe(t.found.name),n=this.fromVersion(t.found.updateTime);return new ie(i,n,{},void 0,t.found,(function(t){return e.Me(t)}))},t.prototype.Je=function(t){T(!!t.missing,"Tried to deserialize a missing document from a found document."),T(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.Fe(t.missing),i=this.fromVersion(t.readTime);return new oe(e,i)},t.prototype.Ye=function(t){return"found"in t?this.He(t):"missing"in t?this.Je(t):_("invalid batch get response: "+JSON.stringify(t))},t.prototype.Xe=function(t){switch(t){case 1:return"ADD";case 3:return"CURRENT";case 0:return"NO_CHANGE";case 2:return"REMOVE";case 4:return"RESET";default:return _("Unknown WatchTargetChangeState: "+t)}},t.prototype.$e=function(t){if(t instanceof Qe)return{filter:{count:t.ji.count,targetId:t.targetId}};if(t instanceof Xe){if(t.xi instanceof ie){var e=t.xi;return{documentChange:{document:{name:this.Oe(e.key),fields:this.We(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.Ui,removedTargetIds:t.removedTargetIds}}}if(t.xi instanceof oe)return e=t.xi,{documentDelete:{document:this.Oe(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.xi)return{documentRemove:{document:this.Oe(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof $e){var i=void 0;return t.cause&&(i={code:Pe(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Xe(t.state),targetIds:t.targetIds,resumeToken:this.Se(t.resumeToken),cause:i}}}return _("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.Ze=function(t){var e,i=this;if("targetChange"in t){un(t.targetChange,"targetChange");var n=this.tr(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],u=this.Re(t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&this._e(s);e=new $e(n,r,u,o||null)}else if("documentChange"in t){un(t.documentChange,"documentChange");var c=t.documentChange;un(c.document,"documentChange.name"),un(c.document.name,"documentChange.document.name"),un(c.document.updateTime,"documentChange.document.updateTime");var h=this.Fe(c.document.name),a=this.fromVersion(c.document.updateTime),f=new ie(h,a,{},void 0,c.document,(function(t){return i.Me(t)})),l=c.targetIds||[],d=c.removedTargetIds||[];e=new Xe(l,d,f.key,f)}else if("documentDelete"in t){un(t.documentDelete,"documentDelete");var v=t.documentDelete;un(v.document,"documentDelete.document"),h=this.Fe(v.document),a=v.readTime?this.fromVersion(v.readTime):lt.q(),f=new oe(h,a),d=v.removedTargetIds||[],e=new Xe([],d,f.key,f)}else if("documentRemove"in t){un(t.documentRemove,"documentRemove");var y=t.documentRemove;un(y.document,"documentRemove"),h=this.Fe(y.document),d=y.removedTargetIds||[],e=new Xe([],d,h,null)}else{if(!("filter"in t))return _("Unknown change type "+JSON.stringify(t));un(t.filter,"filter");var m=t.filter;un(m.targetId,"filter.targetId");var p=m.count||0,g=new De(p),b=m.targetId;e=new Qe(b,g)}return e},t.prototype.tr=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:_("Got unexpected TargetChange.state: "+t)},t.prototype.nr=function(t){if(!("targetChange"in t))return lt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?lt.MIN:e.readTime?this.fromVersion(e.readTime):lt.MIN},t.prototype.ir=function(t){var e,i=this;if(t instanceof Lt)e={update:this.Ge(t.key,t.value)};else if(t instanceof jt)e={delete:this.Oe(t.key)};else if(t instanceof Mt)e={update:this.Ge(t.key,t.data),updateMask:this.er(t.un)};else if(t instanceof Ut)e={transform:{document:this.Oe(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return i.rr(t)}))}};else{if(!(t instanceof Ft))return _("Unknown mutation type "+t.type);e={verify:this.Oe(t.key)}}return t.in.$t||(e.currentDocument=this.ur(t.in)),e},t.prototype.sr=function(t){var e=this,i=t.currentDocument?this.or(t.currentDocument):Pt.NONE;if(t.update){un(t.update.name,"name");var n=this.Fe(t.update.name),r=this.Qe(t.update.fields||{});if(t.updateMask){var u=this.hr(t.updateMask);return new Mt(n,r,u,i)}return new Lt(n,r,i)}if(t.delete)return n=this.Fe(t.delete),new jt(n,i);if(t.transform){n=this.Fe(t.transform.document);var s=t.transform.fieldTransforms.map((function(t){return e.cr(t)}));return T(!0===i.exists,'Transforms only support precondition "exists == true"'),new Ut(n,s)}return t.verify?(n=this.Fe(t.verify),new Ft(n,i)):_("unknown mutation proto: "+JSON.stringify(t))},t.prototype.ur=function(t){return T(!t.$t,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:_("Unknown precondition")},t.prototype.or=function(t){return void 0!==t.updateTime?Pt.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Pt.exists(t.exists):Pt.NONE},t.prototype.ar=function(t,e){var i=this,n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(lt.MIN)&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map((function(t){return i.Me(t)}))),new Rt(n,r)},t.prototype.lr=function(t,e){var i=this;return t&&t.length>0?(T(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return i.ar(t,e)}))):[]},t.prototype.rr=function(t){var e=this,i=t.transform;if(i instanceof At)return{fieldPath:t.field.nt(),setToServerValue:"REQUEST_TIME"};if(i instanceof Nt)return{fieldPath:t.field.nt(),appendMissingElements:{values:i.elements.map((function(t){return e.Le(t)}))}};if(i instanceof St)return{fieldPath:t.field.nt(),removeAllFromArray:{values:i.elements.map((function(t){return e.Le(t)}))}};if(i instanceof kt)return{fieldPath:t.field.nt(),increment:this.Le(i.Kt)};throw _("Unknown transform: "+t.transform)},t.prototype.cr=function(t){var e=this,i=null;if("setToServerValue"in t)T("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),i=At.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];i=new Nt(n.map((function(t){return e.Me(t)})))}else if("removeAllFromArray"in t)n=t.removeAllFromArray.values||[],i=new St(n.map((function(t){return e.Me(t)})));else if("increment"in t){var r=this.Me(t.increment);T(r instanceof Ht,"NUMERIC_ADD transform requires a NumberValue"),i=new kt(r)}else _("Unknown transform proto: "+JSON.stringify(t));var u=mt.ot(t.fieldPath);return new Ct(u,i)},t.prototype.dr=function(t){return{documents:[this.Ue(t.path)]}},t.prototype.vr=function(t){var e=t.documents.length;T(1===e,"DocumentsTarget contained other than 1 document: "+e);var i=t.documents[0];return fe.jn(this.xe(i)).Yn()},t.prototype.wr=function(t){var e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(T(i.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Ue(i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(T(i.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Ue(i.H()),e.structuredQuery.from=[{collectionId:i.X()}]);var n=this.mr(t.filters);n&&(e.structuredQuery.where=n);var r=this.pr(t.orderBy);r&&(e.structuredQuery.orderBy=r);var u=this.Ie(t.limit);return null!==u&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=this.gr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.gr(t.endAt)),e},t.prototype.br=function(t){var e=this.xe(t.parent),i=t.structuredQuery,n=i.from?i.from.length:0,r=null;if(n>0){T(1===n,"StructuredQuery.from with more than one collection is not supported.");var u=i.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}var s=[];i.where&&(s=this.yr(i.where));var o=[];i.orderBy&&(o=this._r(i.orderBy));var c=null;i.limit&&(c=this.Ee(i.limit));var h=null;i.startAt&&(h=this.Ir(i.startAt));var a=null;return i.endAt&&(a=this.Ir(i.endAt)),new fe(e,r,o,s,c,"F",h,a).Yn()},t.prototype.Tr=function(t){var e=this.Er(t.fi);return null==e?null:{"goog-listen-tags":e}},t.prototype.Er=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _("Unrecognized query purpose: "+t)}},t.prototype.Yn=function(t){var e,i=t.target;return(e=i.Nn()?{documents:this.dr(i)}:{query:this.wr(i)}).targetId=t.targetId,t.resumeToken.bn()>0&&(e.resumeToken=this.Se(t.resumeToken)),e},t.prototype.mr=function(t){var e=this;if(0!==t.length){var i=t.map((function(t){return t instanceof pe?e.Dr(t):_("Unrecognized filter: "+JSON.stringify(t))}));return 1===i.length?i[0]:{compositeFilter:{op:"AND",filters:i}}}},t.prototype.yr=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Sr(t)]:void 0!==t.fieldFilter?[this.Rr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.yr(t)})).reduce((function(t,e){return t.concat(e)})):_("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.pr=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Cr(t)}))},t.prototype._r=function(t){var e=this;return t.map((function(t){return e.Ar(t)}))},t.prototype.gr=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.Le(t)}))}},t.prototype.Ir=function(t){var e=this,i=!!t.before,n=t.values.map((function(t){return e.Me(t)}));return new be(n,i)},t.prototype.Pr=function(t){return on[t.name]},t.prototype.kr=function(t){switch(t){case"ASCENDING":return we.ASCENDING;case"DESCENDING":return we.DESCENDING;default:return}},t.prototype.Nr=function(t){return sn[t.name]},t.prototype.Or=function(t){switch(t){case"EQUAL":return le.EQUAL;case"GREATER_THAN":return le.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return le.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return le.LESS_THAN;case"LESS_THAN_OR_EQUAL":return le.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return le.ARRAY_CONTAINS;case"IN":return le.IN;case"ARRAY_CONTAINS_ANY":return le.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return _("Unspecified operator");default:return _("Unknown operator")}},t.prototype.Fr=function(t){return{fieldPath:t.nt()}},t.prototype.Vr=function(t){return mt.ot(t.fieldPath)},t.prototype.Cr=function(t){return{field:this.Fr(t.field),direction:this.Pr(t.dir)}},t.prototype.Ar=function(t){return new Ie(this.Vr(t.field),this.kr(t.direction))},t.prototype.Rr=function(t){return pe.create(this.Vr(t.fieldFilter.field),this.Or(t.fieldFilter.op),this.Me(t.fieldFilter.value))},t.prototype.Dr=function(t){if(t.op===le.EQUAL){if(t.value.isEqual(Kt.Tn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NAN"}};if(t.value.isEqual(Gt.yn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.Fr(t.field),op:this.Nr(t.op),value:this.Le(t.value)}}},t.prototype.Sr=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.Vr(t.unaryFilter.field);return pe.create(e,le.EQUAL,Kt.Tn);case"IS_NULL":var i=this.Vr(t.unaryFilter.field);return pe.create(i,le.EQUAL,Gt.yn);case"OPERATOR_UNSPECIFIED":return _("Unspecified filter");default:return _("Unknown filter")}},t.prototype.er=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.nt())})),{fieldPaths:e}},t.prototype.hr=function(t){var e=(t.fieldPaths||[]).map((function(t){return mt.ot(t)}));return Dt.Yt(e)},t}(),fn=function(){function t(){}return t.Ur=function(e){t.platform&&_("Platform already defined"),t.platform=e},t.t=function(){return t.platform||_("Platform not set"),t.platform},t}();function ln(t,e){function i(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new P(R.INVALID_ARGUMENT,t)}return i.prototype=t.prototype,Object.assign(i,t),i}function pn(){if("undefined"==typeof Uint8Array)throw new P(R.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function dn(){if(!fn.t().xr)throw new P(R.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var vn=function(){function t(t){dn(),this.ci=t}return t.fromBase64String=function(e){W("Blob.fromBase64String",arguments,1),X("Blob.fromBase64String","string",1,e),dn();try{var i=fn.t().atob(e);return new t(i)}catch(t){throw new P(R.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(W("Blob.fromUint8Array",arguments,1),pn(),!(e instanceof Uint8Array))throw dt("Blob.fromUint8Array","Uint8Array",1,e);var i=Ae(e);return new t(i)},t.prototype.toBase64=function(){return W("Blob.toBase64",arguments,0),dn(),fn.t().btoa(this.ci)},t.prototype.toUint8Array=function(){W("Blob.toUint8Array",arguments,0),pn();var t=Ne(this.ci);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ci===t.ci},t.prototype.Dn=function(){return 2*this.ci.length},t.prototype.U=function(t){return N(this.ci,t.ci)},t}(),yn=ln(vn,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),mn=function(){function t(t,e){var i=this;this.previousValue=t,e&&(e.jr=function(t){return i.Lr(t)},this.qr=function(t){return e.Br(t)})}return t.prototype.Lr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.qr&&this.qr(t),t},t.Mr=-1,t}(),gn=function(){var t=this;this.promise=new Promise((function(e,i){t.resolve=e,t.reject=i}))},wn=function(){function t(t,e,i,n,r){this.Qr=t,this.Gr=e,this.Wr=i,this.op=n,this.zr=r,this.Kr=new gn,this.then=this.Kr.promise.then.bind(this.Kr.promise),this.catch=this.Kr.promise.catch.bind(this.Kr.promise),this.Kr.promise.catch((function(t){}))}return t.Hr=function(e,i,n,r,u){var s=new t(e,i,Date.now()+n,r,u);return s.start(n),s},t.prototype.start=function(t){var e=this;this.Jr=setTimeout((function(){return e.Yr()}),t)},t.prototype.Xr=function(){return this.Yr()},t.prototype.cancel=function(t){null!==this.Jr&&(this.clearTimeout(),this.Kr.reject(new P(R.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Yr=function(){var t=this;this.Qr.$r((function(){return null!==t.Jr?(t.clearTimeout(),t.op().then((function(e){return t.Kr.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Jr&&(this.zr(this),clearTimeout(this.Jr),this.Jr=null)},t}(),bn=function(){function t(){this.Zr=Promise.resolve(),this.tu=!1,this.nu=[],this.iu=null,this.eu=!1,this.ru=[]}return Object.defineProperty(t.prototype,"uu",{get:function(){return this.tu},enumerable:!0,configurable:!0}),t.prototype.$r=function(t){this.enqueue(t)},t.prototype.su=function(t){this.ou(),this.hu(t)},t.prototype.cu=function(t){return this.ou(),this.hu(t)},t.prototype.au=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return this.ou(),this.tu?[3,2]:(this.tu=!0,[4,this.cu(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.ou(),this.tu?new Promise((function(t){})):this.hu(t)},t.prototype.hu=function(t){var e=this,i=this.Zr.then((function(){return e.eu=!0,t().catch((function(t){e.iu=t,e.eu=!1;var i=t.stack||t.message||"";throw I("INTERNAL UNHANDLED ERROR: ",i),i.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.eu=!1,t}))}));return this.Zr=i,i},t.prototype.fu=function(t,e,i){var n=this;this.ou(),T(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.ru.indexOf(t)>-1&&(e=0);var r=wn.Hr(this,t,e,i,(function(t){return n.lu(t)}));return this.nu.push(r),r},t.prototype.ou=function(){this.iu&&_("AsyncQueue is already failed: "+(this.iu.stack||this.iu.message))},t.prototype.du=function(){T(this.eu,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.vu=function(){return c.__awaiter(this,void 0,void 0,(function(){var t;return c.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Zr];case 1:e.sent(),e.label=2;case 2:if(t!==this.Zr)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.wu=function(t){for(var e=0,i=this.nu;e<i.length;e++)if(i[e].Gr===t)return!0;return!1},t.prototype.mu=function(t){var e=this;return this.vu().then((function(){T("all"===t||e.wu(t),"Attempted to drain to missing operation "+t),e.nu.sort((function(t,e){return t.Wr-e.Wr}));for(var i=0,n=e.nu;i<n.length;i++){var r=n[i];if(r.Xr(),"all"!==t&&r.Gr===t)break}return e.vu()}))},t.prototype.pu=function(t){this.ru.push(t)},t.prototype.lu=function(t){var e=this.nu.indexOf(t);T(e>=0,"Delayed operation not found."),this.nu.splice(e,1)},t}();function In(t){for(var e="",i=0;i<t.length;i++)e.length>0&&(e=_n(e)),e=En(t.get(i),e);return _n(e)}function En(t,e){for(var i=e,n=t.length,r=0;r<n;r++){var u=t.charAt(r);switch(u){case"\0":i+="";break;case"":i+="";break;default:i+=u}}return i}function _n(t){return t+""}function Tn(t){var e=t.length;if(T(e>=2,"Invalid path "+t),2===e)return T(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),vt.et;for(var i=e-2,n=[],r="",u=0;u<e;){var s=t.indexOf("",u);switch((s<0||s>i)&&_('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var o=t.substring(u,s),c=void 0;0===r.length?c=o:(c=r+=o,r=""),n.push(c);break;case"":r+=t.substring(u,s),r+="\0";break;case"":r+=t.substring(u,s+1);break;default:_('Invalid encoded resource path: "'+t+'"')}u=s+2}return new vt(n)}var An=function(){function t(t,e,i,n){this.batchId=t,this.En=e,this.baseMutations=i,this.mutations=n,T(n.length>0,"Cannot create an empty mutation batch")}return t.prototype.Wt=function(t,e,i){e&&T(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var n=i.gu;T(n.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+n.length+").");for(var r=0;r<this.mutations.length;r++){var u=this.mutations[r];if(u.key.isEqual(t)){var s=n[r];e=u.Wt(e,s)}}return e},t.prototype.Gt=function(t,e){e&&T(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var i=0,n=this.baseMutations;i<n.length;i++)(o=n[i]).key.isEqual(t)&&(e=o.Gt(e,e,this.En));for(var r=e,u=0,s=this.mutations;u<s.length;u++){var o;(o=s[u]).key.isEqual(t)&&(e=o.Gt(e,r,this.En))}return e},t.prototype.bu=function(t){var e=this,i=t;return this.mutations.forEach((function(n){var r=e.Gt(n.key,t.get(n.key));r&&(i=i.lt(n.key,r))})),i},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ge())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&S(this.mutations,t.mutations)&&S(this.baseMutations,t.baseMutations)},t}(),Nn=function(){function t(t,e,i,n,r){this.batch=t,this.yu=e,this.gu=i,this.streamToken=n,this._u=r}return t.from=function(e,i,n,r){T(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var u=Ve(),s=e.mutations,o=0;o<s.length;o++)u=u.lt(s[o].key,n[o].version);return new t(e,i,n,r,u)},t}(),Sn=function(){function t(){this.Iu=new _t(kn.Sn),this.Tu=new _t(kn.Eu)}return t.prototype.J=function(){return this.Iu.J()},t.prototype.Du=function(t,e){var i=new kn(t,e);this.Iu=this.Iu.add(i),this.Tu=this.Tu.add(i)},t.prototype.Su=function(t,e){var i=this;t.forEach((function(t){return i.Du(t,e)}))},t.prototype.Ru=function(t,e){this.Cu(new kn(t,e))},t.prototype.Au=function(t,e){var i=this;t.forEach((function(t){return i.Ru(t,e)}))},t.prototype.Pu=function(t){var e=this,i=gt.EMPTY,n=new kn(i,t),r=new kn(i,t+1),u=[];return this.Tu.Lt([n,r],(function(t){e.Cu(t),u.push(t.key)})),u},t.prototype.ku=function(){var t=this;this.Iu.forEach((function(e){return t.Cu(e)}))},t.prototype.Cu=function(t){this.Iu=this.Iu.delete(t),this.Tu=this.Tu.delete(t)},t.prototype.Nu=function(t){var e=gt.EMPTY,i=new kn(e,t),n=new kn(e,t+1),r=Ge();return this.Tu.Lt([i,n],(function(t){r=r.add(t.key)})),r},t.prototype.Ou=function(t){var e=new kn(t,0),i=this.Iu.Bt(e);return null!==i&&t.isEqual(i.key)},t}(),kn=function(){function t(t,e){this.key=t,this.Fu=e}return t.Sn=function(t,e){return gt.G(t.key,e.key)||N(t.Fu,e.Fu)},t.Eu=function(t,e){return N(t.Fu,e.Fu)||gt.G(t.key,e.key)},t}(),On=function(){function t(t){this.Vu=t,this.Uu={}}return t.prototype.get=function(t){var e=this.Vu(t),i=this.Uu[e];if(void 0!==i)for(var n=0,r=i;n<r.length;n++){var u=r[n],s=u[0],o=u[1];if(s.isEqual(t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var i=this.Vu(t),n=this.Uu[i];if(void 0!==n){for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return void(n[r]=[t,e]);n.push([t,e])}else this.Uu[i]=[[t,e]]},t.prototype.delete=function(t){var e=this.Vu(t),i=this.Uu[e];if(void 0===i)return!1;for(var n=0;n<i.length;n++)if(i[n][0].isEqual(t))return 1===i.length?delete this.Uu[e]:i.splice(n,1),!0;return!1},t.prototype.forEach=function(t){B(this.Uu,(function(e,i){for(var n=0,r=i;n<r.length;n++){var u=r[n],s=u[0],o=u[1];t(s,o)}}))},t.prototype.J=function(){return H(this.Uu)},t}(),Dn=function(){function t(t){var e=this;this.xu=null,this.ju=null,this.result=void 0,this.error=void 0,this.Lu=!1,this.qu=!1,t((function(t){e.Lu=!0,e.result=t,e.xu&&e.xu(t)}),(function(t){e.Lu=!0,e.error=t,e.ju&&e.ju(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,i){var n=this;return this.qu&&_("Called next() or catch() twice for PersistencePromise"),this.qu=!0,this.Lu?this.error?this.Bu(i,this.error):this.Mu(e,this.result):new t((function(t,r){n.xu=function(i){n.Mu(e,i).next(t,r)},n.ju=function(e){n.Bu(i,e).next(t,r)}}))},t.prototype.Qu=function(){var t=this;return new Promise((function(e,i){t.next(e,i)}))},t.prototype.Gu=function(e){try{var i=e();return i instanceof t?i:t.resolve(i)}catch(e){return t.reject(e)}},t.prototype.Mu=function(e,i){return e?this.Gu((function(){return e(i)})):t.resolve(i)},t.prototype.Bu=function(e,i){return e?this.Gu((function(){return e(i)})):t.reject(i)},t.resolve=function(e){return new t((function(t,i){t(e)}))},t.reject=function(e){return new t((function(t,i){i(e)}))},t.Wu=function(e){return new t((function(t,i){var n=0,r=0,u=!1;e.forEach((function(e){++n,e.next((function(){++r,u&&r===n&&t()}),(function(t){return i(t)}))})),u=!0,r===n&&t()}))},t.zu=function(e){for(var i=t.resolve(!1),n=function(e){i=i.next((function(i){return i?t.resolve(i):e()}))},r=0,u=e;r<u.length;r++)n(u[r]);return i},t.forEach=function(t,e){var i=this,n=[];return t.forEach((function(t,r){n.push(e.call(i,t,r))})),this.Wu(n)},t}(),Cn=function(){function t(){this.Ku=new On((function(t){return t.toString()})),this.Hu=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return T(void 0!==this.Ju,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Ju},set:function(t){T(void 0===this.Ju||this.Ju.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Ju=t},enumerable:!0,configurable:!0}),t.prototype.Yu=function(t,e){this.Xu(),this.readTime=e,this.Ku.set(t.key,t)},t.prototype.$u=function(t,e){this.Xu(),e&&(this.readTime=e),this.Ku.set(t,null)},t.prototype.Zu=function(t,e){this.Xu();var i=this.Ku.get(e);return void 0!==i?Dn.resolve(i):this.ts(t,e)},t.prototype.getEntries=function(t,e){return this.ns(t,e)},t.prototype.apply=function(t){return this.Xu(),this.Hu=!0,this.es(t)},t.prototype.Xu=function(){T(!this.Hu,"Changes have already been applied.")},t}(),Rn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pn=function(){function t(){this.rs=[]}return t.prototype.us=function(t){this.rs.push(t)},t.prototype.ss=function(){this.rs.forEach((function(t){return t()}))},t}(),xn=function(){function e(t){this.db=t,12.2===e.os(f.getUA())&&I("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.hs=function(t,i,n){return T(e.cs(),"IndexedDB not supported in current environment."),w("SimpleDb","Opening database:",t),new Dn((function(r,u){var s=window.indexedDB.open(t,i);s.onsuccess=function(t){var i=t.target.result;r(new e(i))},s.onblocked=function(){u(new P(R.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?u(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u(e)},s.onupgradeneeded=function(e){w("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var i=e.target.result;n.createOrUpgrade(i,s.transaction,e.oldVersion,gr).next((function(){w("SimpleDb","Database upgrade to version "+gr+" complete")}))}})).Qu()},e.delete=function(t){return w("SimpleDb","Removing database:",t),jn(window.indexedDB.deleteDatabase(t)).Qu()},e.cs=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.as())return!0;if(void 0===window.navigator)return!1;var t=f.getUA(),i=e.os(t),n=0<i&&i<10,r=e.fs(t),u=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||u)},e.as=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.ls)},e.ds=function(t,e){return t.store(e)},e.os=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)},e.fs=function(t){var e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)},e.prototype.vs=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n,r,s,o,h,f;return c.__generator(this,(function(a){switch(a.label){case 0:n=t.startsWith("readonly"),r=t.endsWith("idempotent"),s=0,o=function(){var t,o,f,a;return c.__generator(this,(function(u){switch(u.label){case 0:++s,t=Mn.open(h.db,n?"readonly":"readwrite",e),u.label=1;case 1:return u.trys.push([1,3,,4]),(o=i(t).catch((function(e){return t.abort(e),Dn.reject(e)})).Qu()).catch((function(){})),[4,t.ws];case 2:return u.sent(),[2,{value:o}];case 3:return f=u.sent(),a=r&&"FirebaseError"!==f.name&&s<3,w("SimpleDb","Transaction failed with error: %s. Retrying: %s.",f.message,a),a?[3,4]:[2,{value:Promise.reject(f)}];case 4:return[2]}}))},h=this,a.label=1;case 1:return[5,o()];case 2:return"object"==typeof(f=a.sent())?[2,f.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),Ln=function(){function t(t){this.ms=t,this.ps=!1,this.gs=null}return Object.defineProperty(t.prototype,"Lu",{get:function(){return this.ps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ms=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.ys=function(t){this.gs=t},t.prototype.delete=function(){return jn(this.ms.delete())},t}(),Mn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this._s=new gn,this.transaction.oncomplete=function(){e._s.resolve()},this.transaction.onabort=function(){t.error?e._s.reject(t.error):e._s.resolve()},this.transaction.onerror=function(t){var i=Vn(t.target.error);e._s.reject(i)}}return t.open=function(e,i,n){return new t(e.transaction(n,i))},Object.defineProperty(t.prototype,"ws",{get:function(){return this._s.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(w("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return T(!!e,"Object store not part of transaction: "+t),new Un(e)},t}(),Un=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var i;return void 0!==e?(w("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),jn(i)},t.prototype.add=function(t){return w("SimpleDb","ADD",this.store.name,t,t),jn(this.store.add(t))},t.prototype.get=function(t){var e=this;return jn(this.store.get(t)).next((function(i){return void 0===i&&(i=null),w("SimpleDb","GET",e.store.name,t,i),i}))},t.prototype.delete=function(t){return w("SimpleDb","DELETE",this.store.name,t),jn(this.store.delete(t))},t.prototype.count=function(){return w("SimpleDb","COUNT",this.store.name),jn(this.store.count())},t.prototype.Is=function(t,e){var i=this.cursor(this.options(t,e)),n=[];return this.Ts(i,(function(t,e){n.push(e)})).next((function(){return n}))},t.prototype.Es=function(t,e){w("SimpleDb","DELETE ALL",this.store.name);var i=this.options(t,e);i.Ds=!1;var n=this.cursor(i);return this.Ts(n,(function(t,e,i){return i.delete()}))},t.prototype.Ss=function(t,e){var i;e?i=t:(i={},e=t);var n=this.cursor(i);return this.Ts(n,e)},t.prototype.Rs=function(t){var e=this.cursor({});return new Dn((function(i,n){e.onerror=function(t){var e=Vn(t.target.error);n(e)},e.onsuccess=function(e){var n=e.target.result;n?t(n.primaryKey,n.value).next((function(t){t?n.continue():i()})):i()}}))},t.prototype.Ts=function(t,e){var i=[];return new Dn((function(n,r){t.onerror=function(t){r(t.target.error)},t.onsuccess=function(t){var r=t.target.result;if(r){var u=new Ln(r),s=e(r.primaryKey,r.value,u);if(s instanceof Dn){var o=s.catch((function(t){return u.done(),Dn.reject(t)}));i.push(o)}u.Lu?n():null===u.bs?r.continue():r.continue(u.bs)}else n()}})).next((function(){return Dn.Wu(i)}))},t.prototype.options=function(t,e){var i=void 0;return void 0!==t&&("string"==typeof t?i=t:(T(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:i,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var i=this.store.index(t.index);return t.Ds?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function jn(t){return new Dn((function(e,i){t.onsuccess=function(t){var i=t.target.result;e(i)},t.onerror=function(t){var e=Vn(t.target.error);i(e)}}))}var Fn=!1;function Vn(t){var e=xn.os(f.getUA());if(e>=12.2&&e<13){var i="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(i)>=0){var n=new P("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+i+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Fn||(Fn=!0,setTimeout((function(){throw n}),0)),n}}return t}var qn=function(){function t(t,e,i,n){this.userId=t,this.serializer=e,this.Cs=i,this.As=n,this.Ps={}}return t.ks=function(e,i,n,r){return T(""!==e.uid,"UserID must not be an empty string."),new t(e.l()?e.uid:"",i,n,r)},t.prototype.Ns=function(t){var e=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hn(t).Ss({index:Tr.userMutationsIndex,range:i},(function(t,i,n){e=!1,n.done()})).next((function(){return e}))},t.prototype.Os=function(t,e,i){return this.Fs(t).next((function(e){return e.lastStreamToken=i.toBase64(),Wn(t).put(e)}))},t.prototype.Vs=function(t){return this.Fs(t).next((function(t){return Te.fromBase64String(t.lastStreamToken)}))},t.prototype.Us=function(t,e){return this.Fs(t).next((function(i){return i.lastStreamToken=e.toBase64(),Wn(t).put(i)}))},t.prototype.xs=function(t,e,i,n){var r=this,u=zn(t),s=Hn(t);return s.add({}).next((function(o){T("number"==typeof o,"Auto-generated key is not a number");for(var c=new An(o,e,i,n),h=r.serializer.js(r.userId,c),a=[],f=new _t((function(t,e){return N(t.nt(),e.nt())})),l=0,d=n;l<d.length;l++){var v=d[l],y=Ar.key(r.userId,v.key.path,o);f=f.add(v.key.path.H()),a.push(s.put(h)),a.push(u.put(y,Ar.PLACEHOLDER))}return f.forEach((function(e){a.push(r.Cs.Ls(t,e))})),t.us((function(){r.Ps[o]=c.keys()})),Dn.Wu(a).next((function(){return c}))}))},t.prototype.qs=function(t,e){var i=this;return Hn(t).get(e).next((function(t){return t?(T(t.userId===i.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),i.serializer.Bs(t)):null}))},t.prototype.Ms=function(t,e){var i=this;return this.Ps[e]?Dn.resolve(this.Ps[e]):this.qs(t,e).next((function(t){if(t){var n=t.keys();return i.Ps[e]=n,n}return null}))},t.prototype.Qs=function(t,e){var i=this,n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]),u=null;return Hn(t).Ss({index:Tr.userMutationsIndex,range:r},(function(t,e,r){e.userId===i.userId&&(T(e.batchId>=n,"Should have found mutation after "+n),u=i.serializer.Bs(e)),r.done()})).next((function(){return u}))},t.prototype.Gs=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Hn(t).Ss({index:Tr.userMutationsIndex,range:e,reverse:!0},(function(t,e,n){i=e.batchId,n.done()})).next((function(){return i}))},t.prototype.Ws=function(t){var e=this,i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hn(t).Is(Tr.userMutationsIndex,i).next((function(t){return t.map((function(t){return e.serializer.Bs(t)}))}))},t.prototype.zs=function(t,e){var i=this,n=Ar.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(n),u=[];return zn(t).Ss({range:r},(function(n,r,s){var o=n[0],c=n[1],h=n[2],a=Tn(c);if(o===i.userId&&e.path.isEqual(a))return Hn(t).get(h).next((function(t){if(!t)throw _("Dangling document-mutation reference found: "+n+" which points to "+h);T(t.userId===i.userId,"Unexpected user '"+t.userId+"' for mutation batch "+h),u.push(i.serializer.Bs(t))}));s.done()})).next((function(){return u}))},t.prototype.Ks=function(t,e){var i=this,n=new _t(N),r=[];return e.forEach((function(e){var u=Ar.prefixForPath(i.userId,e.path),s=IDBKeyRange.lowerBound(u),o=zn(t).Ss({range:s},(function(t,r,u){var s=t[0],o=t[1],c=t[2],h=Tn(o);s===i.userId&&e.path.isEqual(h)?n=n.add(c):u.done()}));r.push(o)})),Dn.Wu(r).next((function(){return i.Hs(t,n)}))},t.prototype.Js=function(t,e){var i=this;T(!e.Nn(),"Document queries shouldn't go down this path"),T(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,u=Ar.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(u),o=new _t(N);return zn(t).Ss({range:s},(function(t,e,u){var s=t[0],c=t[1],h=t[2],a=Tn(c);s===i.userId&&n.$(a)?a.length===r&&(o=o.add(h)):u.done()})).next((function(){return i.Hs(t,o)}))},t.prototype.Hs=function(t,e){var i=this,n=[],r=[];return e.forEach((function(e){r.push(Hn(t).get(e).next((function(t){if(null===t)throw _("Dangling document-mutation reference found, which points to "+e);T(t.userId===i.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.push(i.serializer.Bs(t))})))})),Dn.Wu(r).next((function(){return n}))},t.prototype.Ys=function(t,e){var i=this;return Bn(t.Xs,this.userId,e).next((function(n){return t.us((function(){i.$s(e.batchId)})),Dn.forEach(n,(function(e){return i.As.Zs(t,e)}))}))},t.prototype.$s=function(t){delete this.Ps[t]},t.prototype.to=function(t){var e=this;return this.Ns(t).next((function(i){if(!i)return Dn.resolve();var n=IDBKeyRange.lowerBound(Ar.prefixForUser(e.userId)),r=[];return zn(t).Ss({range:n},(function(t,i,n){if(t[0]===e.userId){var u=Tn(t[1]);r.push(u)}else n.done()})).next((function(){T(0===r.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+r.map((function(t){return t.nt()})))}))}))},t.prototype.Ou=function(t,e){return Gn(t,this.userId,e)},t.prototype.Fs=function(t){var e=this;return Wn(t).get(this.userId).next((function(t){return t||new _r(e.userId,-1,"")}))},t}();function Gn(t,e,i){var n=Ar.prefixForPath(e,i.path),r=n[1],u=IDBKeyRange.lowerBound(n),s=!1;return zn(t).Ss({range:u,Ds:!0},(function(t,i,n){var u=t[0],o=t[1];t[2],u===e&&o===r&&(s=!0),n.done()})).next((function(){return s}))}function Bn(t,e,i){var n=t.store(Tr.store),r=t.store(Ar.store),u=[],s=IDBKeyRange.only(i.batchId),o=0,c=n.Ss({range:s},(function(t,e,i){return o++,i.delete()}));u.push(c.next((function(){T(1===o,"Dangling document-mutation reference found: Missing batch "+i.batchId)})));for(var h=[],a=0,f=i.mutations;a<f.length;a++){var l=f[a],d=Ar.key(e,l.key.path,i.batchId);u.push(r.delete(d)),h.push(l.key)}return Dn.Wu(u).next((function(){return h}))}function Hn(t){return zr.ds(t,Tr.store)}function zn(t){return zr.ds(t,Ar.store)}function Wn(t){return zr.ds(t,_r.store)}var Kn=function(){function t(t,e){this.no=t,T((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.io(void 0!==e?e:this.no)}return t.prototype.next=function(){var t=this.eo;return this.eo+=2,t},t.prototype.after=function(t){return this.io(t+2),this.next()},t.prototype.io=function(t){T((1&t)===this.no,"Cannot supply target ID from different generator ID"),this.eo=t},t.ro=function(){return new t(0,2)},t.uo=function(){return new t(1)},t}(),Yn=function(){function t(t,e,i){this.so=t,this.oo=e,this.Cs=i}return t.prototype.ho=function(t,e){var i=this;return this.oo.zs(t,e).next((function(n){return i.co(t,e,n)}))},t.prototype.co=function(t,e,i){return this.so.Zu(t,e).next((function(t){for(var n=0,r=i;n<r.length;n++)t=r[n].Gt(e,t);return t}))},t.prototype.ao=function(t,e,i){var n=Me();return e.forEach((function(t,e){for(var r=0,u=i;r<u.length;r++)e=u[r].Gt(t,e);n=n.lt(t,e)})),n},t.prototype.fo=function(t,e){var i=this;return this.so.getEntries(t,e).next((function(e){return i.lo(t,e)}))},t.prototype.lo=function(t,e){var i=this;return this.oo.Ks(t,e).next((function(n){var r=i.ao(t,e,n),u=Le();return r.forEach((function(t,e){e||(e=new oe(t,lt.q())),u=u.lt(t,e)})),u}))},t.prototype.do=function(t,e,i){return e.Nn()?this.vo(t,e.path):e.ui()?this.wo(t,e,i):this.mo(t,e,i)},t.prototype.vo=function(t,e){return this.ho(t,new gt(e)).next((function(t){var e=je();return t instanceof ie&&(e=e.lt(t.key,t)),e}))},t.prototype.wo=function(t,e,i){var n=this;T(e.path.J(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,u=je();return this.Cs.po(t,r).next((function(s){return Dn.forEach(s,(function(s){var o=e.Hn(s.child(r));return n.mo(t,o,i).next((function(t){t.forEach((function(t,e){u=u.lt(t,e)}))}))})).next((function(){return u}))}))},t.prototype.mo=function(t,e,i){var n,r,u=this;return this.so.do(t,e,i).next((function(i){return n=i,u.oo.Js(t,e)})).next((function(e){return r=e,u.bo(t,r,n).next((function(t){n=t;for(var e=0,i=r;e<i.length;e++)for(var u=i[e],s=0,o=u.mutations;s<o.length;s++){var c=o[s],h=c.key,a=n.get(h),f=c.Gt(a,a,u.En);n=f instanceof ie?n.lt(h,f):n.remove(h)}}))})).next((function(){return n.forEach((function(t,i){e.matches(i)||(n=n.remove(t))})),n}))},t.prototype.bo=function(t,e,i){for(var n=Ge(),r=0,u=e;r<u.length;r++)for(var s=0,o=u[r].mutations;s<o.length;s++){var c=o[s];c instanceof Mt&&null===i.get(c.key)&&(n=n.add(c.key))}var h=i;return this.so.getEntries(t,n).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ie&&(h=h.lt(t,e))})),h}))},t}(),Jn=function(){function t(t,e,i,n){this.targetId=t,this.fromCache=e,this.yo=i,this._o=n}return t.Io=function(e,i){for(var n=Ge(),r=Ge(),u=0,s=i.docChanges;u<s.length;u++){var o=s[u];switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}}return new t(e,i.fromCache,n,r)},t}(),Xn=function(){function t(t,e,i){this.persistence=t,this.To=e,this.Eo=new Sn,this.Do=new wt(N),this.So=new On((function(t){return t.canonicalId()})),this.Ro=lt.MIN,T(t.Co,"LocalStore was passed an unstarted persistence implementation"),this.persistence.As.Ao(this.Eo),this.oo=t.Po(i),this.ko=t.No(),this.Oo=t.Fo(),this.Vo=new Yn(this.ko,this.oo,this.persistence.Uo()),this.To.xo(this.Vo)}return t.prototype.start=function(){return this.jo()},t.prototype.Lo=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r=this;return c.__generator(this,(function(u){switch(u.label){case 0:return e=this.oo,i=this.Vo,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(n){var u;return r.oo.Ws(n).next((function(s){return u=s,e=r.persistence.Po(t),i=new Yn(r.ko,e,r.persistence.Uo()),e.Ws(n)})).next((function(t){for(var e=[],r=[],s=Ge(),o=0,c=u;o<c.length;o++){var h=c[o];e.push(h.batchId);for(var a=0,f=h.mutations;a<f.length;a++){var l=f[a];s=s.add(l.key)}}for(var d=0,v=t;d<v.length;d++){h=v[d],r.push(h.batchId);for(var y=0,m=h.mutations;y<m.length;y++)l=m[y],s=s.add(l.key)}return i.fo(n,s).next((function(t){return{qo:t,Bo:e,Mo:r}}))}))}))];case 1:return n=u.sent(),this.oo=e,this.Vo=i,this.To.xo(this.Vo),[2,n]}}))}))},t.prototype.Qo=function(t){var e,i=this,n=ft.now(),r=t.reduce((function(t,e){return t.add(e.key)}),Ge());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(u){return i.Vo.fo(u,r).next((function(r){e=r;for(var s=[],o=0,c=t;o<c.length;o++){var h=c[o],a=h.rn(e.get(h.key));null!=a&&s.push(new Mt(h.key,a,a.un(),Pt.exists(!0)))}return i.oo.xs(u,n,s,t)}))})).then((function(t){var i=t.bu(e);return{batchId:t.batchId,Ku:i}}))},t.prototype.Go=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(i){return e.oo.Ms(i,t).next((function(t){return t?e.Vo.fo(i,t):Dn.resolve(null)}))}))},t.prototype.Os=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(i){var n=t.batch.keys(),r=e.ko.Wo({zo:!0});return e.oo.Os(i,t.batch,t.streamToken).next((function(){return e.Ko(i,t,r)})).next((function(){return r.apply(i)})).next((function(){return e.oo.to(i)})).next((function(){return e.Vo.fo(i,n)}))}))},t.prototype.Ho=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(i){var n;return e.oo.qs(i,t).next((function(t){return T(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),e.oo.Ys(i,t)})).next((function(){return e.oo.to(i)})).next((function(){return e.Vo.fo(i,n)}))}))},t.prototype.Gs=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.oo.Gs(e)}))},t.prototype.Vs=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.oo.Vs(e)}))},t.prototype.Us=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(i){return e.oo.Us(i,t)}))},t.prototype.Jo=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.Oo.Jo(e)}))},t.prototype.Yo=function(e){var i=this,n=e.li,r=this.Do;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(u){var s=i.ko.Wo({zo:!0});r=i.Do;var o=[];G(e.Si,(function(e,s){var c=r.get(e);if(c){o.push(i.Oo.Xo(u,s.Vi,e).next((function(){return i.Oo.$o(u,s.Oi,e)})));var h=s.resumeToken;if(h.bn()>0){var a=c.vi(h,n).di(u.Zo);r=r.lt(e,a),t.th(c,a,s)&&o.push(i.Oo.nh(u,a))}}}));var c=Le(),h=Ge();if(e.Ci.forEach((function(t,e){h=h.add(t)})),o.push(s.getEntries(u,h).next((function(t){e.Ci.forEach((function(r,h){var a=t.get(r);h instanceof oe&&h.version.isEqual(lt.MIN)?(s.$u(r,n),c=c.lt(r,h)):null==a||h.version.h(a.version)>0||0===h.version.h(a.version)&&a.hasPendingWrites?(T(!lt.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),s.Yu(h,n),c=c.lt(r,h)):w("LocalStore","Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",h.version),e.Ai.has(r)&&o.push(i.persistence.As.ih(u,r))}))}))),!n.isEqual(lt.MIN)){var a=i.Oo.Jo(u).next((function(t){return T(n.h(t)>=0,"Watch stream reverted to previous snapshot?? "+n+" < "+t),i.Oo.eh(u,u.Zo,n)}));o.push(a)}return Dn.Wu(o).next((function(){return s.apply(u)})).next((function(){return i.Vo.lo(u,c)}))})).then((function(t){return i.Do=r,t}))},t.th=function(t,e,i){return T(e.resumeToken.bn()>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.bn()||e.li.B()-t.li.B()>=this.rh||i.Oi.size+i.Fi.size+i.Vi.size>0},t.prototype.uh=function(t){for(var e=this,i=0,n=t;i<n.length;i++){var r=n[i],u=r.targetId;if(this.Eo.Su(r.yo,u),this.Eo.Au(r._o,u),!r.fromCache){var s=this.Do.get(u);T(null!==s,"Can't set limbo-free snapshot version for unknown target: "+u);var o=s.li,c=s.wi(o);this.Do=this.Do.lt(u,c)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(i){return Dn.forEach(t,(function(t){return Dn.forEach(t._o,(function(t){return e.persistence.As.Ru(i,t)}))}))}))},t.prototype.sh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(i){return void 0===t&&(t=-1),e.oo.Qs(i,t)}))},t.prototype.oh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(i){return e.Vo.ho(i,t)}))},t.prototype.hh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(i){var n;return e.Oo.ah(i,t).next((function(r){return r?(n=r,Dn.resolve(n)):e.Oo.fh(i).next((function(r){return n=new Oe(t,r,0,i.Zo),e.Oo.lh(i,n).next((function(){return n}))}))}))})).then((function(i){return null===e.Do.get(i.targetId)&&(e.Do=e.Do.lt(i.targetId,i),e.So.set(t,i.targetId)),i}))},t.prototype.ah=function(t,e){var i=this.So.get(e);return void 0!==i?Dn.resolve(this.Do.get(i)):this.Oo.ah(t,e)},t.prototype.dh=function(t,e){var i=this,n=this.Do.get(t);T(null!==n,"Tried to release nonexistent target: "+t);var r=e?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",r,(function(r){var u=i.Eo.Pu(t);return e?Dn.resolve():Dn.forEach(u,(function(t){return i.persistence.As.Ru(r,t)})).next((function(){i.persistence.As.removeTarget(r,n)}))})).then((function(){i.Do=i.Do.remove(t),i.So.delete(n.target)}))},t.prototype.vh=function(t,e){var i=this,n=lt.MIN,r=Ge();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(u){return i.ah(u,t.Yn()).next((function(t){if(t)return n=t.lastLimboFreeSnapshotVersion,i.Oo.wh(u,t.targetId).next((function(t){r=t}))})).next((function(){return i.To.do(u,t,e?n:lt.MIN,e?r:Ge())})).next((function(t){return{documents:t,mh:r}}))}))},t.prototype.ph=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(i){return e.Oo.wh(i,t)}))},t.prototype.gh=function(){return this.persistence.gh()},t.prototype.bh=function(t){this.oo.$s(t)},t.prototype.yh=function(t){this.persistence.yh(t)},t.prototype.Ko=function(t,e,i){var n=this,r=e.batch,u=r.keys(),s=Dn.resolve();return u.forEach((function(n){s=s.next((function(){return i.Zu(t,n)})).next((function(t){var u=t,s=e._u.get(n);T(null!==s,"ackVersions should contain every doc in the write."),(!u||u.version.h(s)<0)&&((u=r.Wt(n,u,e))?i.Yu(u,e.yu):T(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))}))})),s.next((function(){return n.oo.Ys(t,r)}))},t.prototype._h=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(i){return t.Ih(i,e.Do)}))},t.prototype.Th=function(t){var e=this,i=this.Do.get(t);return i?Promise.resolve(i.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(i){return e.Oo.ye(i,t).next((function(t){return t?t.target:null}))}))},t.prototype.Eh=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.ko.Eh(e,t.Ro)})).then((function(e){var i=e.Dh,n=e.readTime;return t.Ro=n,i}))},t.prototype.jo=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e=this;return c.__generator(this,(function(i){switch(i.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.ko.Sh(t)}))];case 1:return t.Ro=i.sent(),[2]}}))}))},t.rh=3e8,t}();function Qn(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){if(t.code!==R.FAILED_PRECONDITION||t.message!==Rn)throw t;return w("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function $n(t,e){var i=t[0],n=t[1],r=e[0],u=e[1],s=N(i,r);return 0===s?N(n,u):s}var Zn=function(){function t(t){this.Rh=t,this.buffer=new _t($n),this.Ch=0}return t.prototype.Ah=function(){return++this.Ch},t.prototype.Ph=function(t){var e=[t,this.Ah()];if(this.buffer.size<this.Rh)this.buffer=this.buffer.add(e);else{var i=this.buffer.last();$n(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),er={kh:!1,Nh:0,Oh:0,Fh:0},nr=function(){function t(t,e,i){this.Vh=t,this.Uh=e,this.xh=i}return t.jh=function(e){return new t(e,t.Lh,t.qh)},t.Bh=-1,t.Mh=1048576,t.Qh=41943040,t.Lh=10,t.qh=1e3,t.Gh=new t(t.Qh,t.Lh,t.qh),t.DISABLED=new t(t.Bh,0,0),t}(),rr=function(){function t(t,e,i){this.Wh=t,this.Qr=e,this.zh=i,this.Kh=!1,this.Hh=null}return t.prototype.start=function(){T(null===this.Hh,"Cannot start an already started LruScheduler"),this.Wh.params.Vh!==nr.Bh&&this.Jh()},t.prototype.stop=function(){this.Hh&&(this.Hh.cancel(),this.Hh=null)},Object.defineProperty(t.prototype,"Co",{get:function(){return null!==this.Hh},enumerable:!0,configurable:!0}),t.prototype.Jh=function(){var t=this;T(null===this.Hh,"Cannot schedule GC while a task is pending");var e=this.Kh?3e5:6e4;w("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Hh=this.Qr.fu("lru_garbage_collection",e,(function(){return t.Hh=null,t.Kh=!0,t.zh._h(t.Wh).then((function(){return t.Jh()})).catch(Qn)}))},t}(),ir=function(){function t(t,e){this.Yh=t,this.params=e}return t.prototype.Xh=function(t,e){return this.Yh.$h(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Zh=function(t,e){var i=this;if(0===e)return Dn.resolve(mn.Mr);var n=new Zn(e);return this.Yh.ce(t,(function(t){return n.Ph(t.sequenceNumber)})).next((function(){return i.Yh.tc(t,(function(t){return n.Ph(t)}))})).next((function(){return n.maxValue}))},t.prototype.nc=function(t,e,i){return this.Yh.nc(t,e,i)},t.prototype.ic=function(t,e){return this.Yh.ic(t,e)},t.prototype.Ih=function(t,e){var i=this;return this.params.Vh===nr.Bh?(w("LruGarbageCollector","Garbage collection skipped; disabled"),Dn.resolve(er)):this.ec(t).next((function(n){return n<i.params.Vh?(w("LruGarbageCollector","Garbage collection skipped; Cache size "+n+" is lower than threshold "+i.params.Vh),er):i.rc(t,e)}))},t.prototype.ec=function(t){return this.Yh.ec(t)},t.prototype.rc=function(t,e){var i,n,r,u,s,o,c,h=this,a=Date.now();return this.Xh(t,this.params.Uh).next((function(e){return e>h.params.xh?(w("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.xh+" from "+e),n=h.params.xh):n=e,u=Date.now(),h.Zh(t,n)})).next((function(n){return i=n,s=Date.now(),h.nc(t,i,e)})).next((function(e){return r=e,o=Date.now(),h.ic(t,i)})).next((function(t){return c=Date.now(),y()<=0&&w("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(u-a)+"ms\n\tDetermined least recently used "+n+" in "+(s-u)+"ms\n\tRemoved "+r+" targets in "+(o-s)+"ms\n\tRemoved "+t+" documents in "+(c-o)+"ms\nTotal Duration: "+(c-a)+"ms"),Dn.resolve({kh:!0,Nh:n,Oh:r,Fh:t})}))},t}(),or=function(){function t(t,e){this.As=t,this.serializer=e,this.uc=Kn.ro()}return t.prototype.fh=function(t){var e=this;return this.sc(t).next((function(i){return i.highestTargetId=e.uc.after(i.highestTargetId),e.oc(t,i).next((function(){return i.highestTargetId}))}))},t.prototype.Jo=function(t){return this.sc(t).next((function(t){return lt.L(new ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.hc=function(t){return ur(t.Xs)},t.prototype.eh=function(t,e,i){var n=this;return this.sc(t).next((function(r){return r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.M()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),n.oc(t,r)}))},t.prototype.lh=function(t,e){var i=this;return this.cc(t,e).next((function(){return i.sc(t).next((function(n){return n.targetCount+=1,i.ac(e,n),i.oc(t,n)}))}))},t.prototype.nh=function(t,e){return this.cc(t,e)},t.prototype.fc=function(t,e){var i=this;return this.lc(t,e.targetId).next((function(){return sr(t).delete(e.targetId)})).next((function(){return i.sc(t)})).next((function(e){return T(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,i.oc(t,e)}))},t.prototype.nc=function(t,e,i){var n=this,r=0,u=[];return sr(t).Ss((function(s,o){var c=n.serializer.dc(o);c.sequenceNumber<=e&&null===i.get(c.targetId)&&(r++,u.push(n.fc(t,c)))})).next((function(){return Dn.Wu(u)})).next((function(){return r}))},t.prototype.ce=function(t,e){var i=this;return sr(t).Ss((function(t,n){var r=i.serializer.dc(n);e(r)}))},t.prototype.sc=function(t){return ar(t.Xs)},t.prototype.oc=function(t,e){return(i=t,zr.ds(i,Rr.store)).put(Rr.key,e);var i},t.prototype.cc=function(t,e){return sr(t).put(this.serializer.vc(e))},t.prototype.ac=function(t,e){var i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i},t.prototype.wc=function(t){return this.sc(t).next((function(t){return t.targetCount}))},t.prototype.ah=function(t,e){var i=this,n=e.canonicalId(),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),u=null;return sr(t).Ss({range:r,index:Dr.queryTargetsIndexName},(function(t,n,r){var s=i.serializer.dc(n);e.isEqual(s.target)&&(u=s,r.done())})).next((function(){return u}))},t.prototype.$o=function(t,e,i){var n=this,r=[],u=cr(t);return e.forEach((function(e){var s=In(e.path);r.push(u.put(new Cr(i,s))),r.push(n.As.Du(t,e))})),Dn.Wu(r)},t.prototype.Xo=function(t,e,i){var n=this,r=cr(t);return Dn.forEach(e,(function(e){var u=In(e.path);return Dn.Wu([r.delete([i,u]),n.As.Ru(t,e)])}))},t.prototype.lc=function(t,e){var i=cr(t),n=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(n)},t.prototype.wh=function(t,e){var i=IDBKeyRange.bound([e],[e+1],!1,!0),n=cr(t),r=Ge();return n.Ss({range:i,Ds:!0},(function(t,e,i){var n=Tn(t[1]),u=new gt(n);r=r.add(u)})).next((function(){return r}))},t.prototype.Ou=function(t,e){var i=In(e.path),n=IDBKeyRange.bound([i],[k(i)],!1,!0),r=0;return cr(t).Ss({index:Cr.documentTargetsIndex,Ds:!0,range:n},(function(t,e,i){var n=t[0];t[1],0!==n&&(r++,i.done())})).next((function(){return r>0}))},t.prototype.ye=function(t,e){var i=this;return sr(t).get(e).next((function(t){return t?i.serializer.dc(t):null}))},t}();function sr(t){return zr.ds(t,Dr.store)}function ar(t){return xn.ds(t,Rr.store).get(Rr.key).next((function(t){return T(null!==t,"Missing metadata row."),t}))}function ur(t){return ar(t).next((function(t){return t.highestListenSequenceNumber}))}function cr(t){return zr.ds(t,Cr.store)}var fr=function(){function t(t,e){this.serializer=t,this.Cs=e}return t.prototype.Yu=function(t,e,i){return pr(t).put(dr(e),i)},t.prototype.$u=function(t,e){var i=pr(t),n=dr(e);return i.delete(n)},t.prototype.updateMetadata=function(t,e){var i=this;return this.getMetadata(t).next((function(n){return n.byteSize+=e,i.mc(t,n)}))},t.prototype.Zu=function(t,e){var i=this;return pr(t).get(dr(e)).next((function(t){return i.pc(t)}))},t.prototype.gc=function(t,e){var i=this;return pr(t).get(dr(e)).next((function(t){var e=i.pc(t);return e?{bc:e,size:vr(t)}:null}))},t.prototype.getEntries=function(t,e){var i=this,n=Me();return this.yc(t,e,(function(t,e){var r=i.pc(e);n=n.lt(t,r)})).next((function(){return n}))},t.prototype._c=function(t,e){var i=this,n=Me(),r=new wt(gt.G);return this.yc(t,e,(function(t,e){var u=i.pc(e);u?(n=n.lt(t,u),r=r.lt(t,vr(e))):(n=n.lt(t,null),r=r.lt(t,0))})).next((function(){return{Ic:n,Tc:r}}))},t.prototype.yc=function(t,e,i){if(e.J())return Dn.resolve();var n=IDBKeyRange.bound(e.first().path.tt(),e.last().path.tt()),r=e.bt(),u=r.Dt();return pr(t).Ss({range:n},(function(t,e,n){for(var s=gt.at(t);u&&gt.G(u,s)<0;)i(u,null),u=r.Dt();u&&u.isEqual(s)&&(i(u,e),u=r.St()?r.Dt():null),u?n.ys(u.path.tt()):n.done()})).next((function(){for(;u;)i(u,null),u=r.St()?r.Dt():null}))},t.prototype.do=function(t,e,i){var n=this;T(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=je(),u=e.path.length+1,s={};if(i.isEqual(lt.MIN)){var o=e.path.tt();s.range=IDBKeyRange.lowerBound(o)}else{var c=e.path.tt(),h=this.serializer.Ec(i);s.range=IDBKeyRange.lowerBound([c,h],!0),s.index=kr.collectionReadTimeIndex}return pr(t).Ss(s,(function(t,i,s){if(t.length===u){var o=n.serializer.Dc(i);e.path.$(o.key.path)?o instanceof ie&&e.matches(o)&&(r=r.lt(o.key,o)):s.done()}})).next((function(){return r}))},t.prototype.Eh=function(t,e){var i=this,n=Le(),r=this.serializer.Ec(e),u=pr(t),s=IDBKeyRange.lowerBound(r,!0);return u.Ss({index:kr.readTimeIndex,range:s},(function(t,e){var u=i.serializer.Dc(e);n=n.lt(u.key,u),r=e.readTime})).next((function(){return{Dh:n,readTime:i.serializer.Sc(r)}}))},t.prototype.Sh=function(t){var e=this,i=pr(t),n=lt.MIN;return i.Ss({index:kr.readTimeIndex,reverse:!0},(function(t,i,r){i.readTime&&(n=e.serializer.Sc(i.readTime)),r.done()})).next((function(){return n}))},t.prototype.Wo=function(e){return new t.Rc(this,!!e&&e.zo)},t.prototype.Cc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return lr(t).get(Or.key).next((function(t){return T(!!t,"Missing document cache metadata"),t}))},t.prototype.mc=function(t,e){return lr(t).put(Or.key,e)},t.prototype.pc=function(t){if(t){var e=this.serializer.Dc(t);return e instanceof oe&&e.version.isEqual(lt.q())?null:e}return null},t.Rc=function(t){function e(e,i){var n=t.call(this)||this;return n.Ac=e,n.zo=i,n.Pc=new On((function(t){return t.toString()})),n}return c.__extends(e,t),e.prototype.es=function(t){var e=this,i=[],n=0,r=new _t((function(t,e){return N(t.nt(),e.nt())}));return this.Ku.forEach((function(u,s){var o=e.Pc.get(u);if(T(void 0!==o,"Cannot modify a document that wasn't read (for "+u+")"),s){T(!e.readTime.isEqual(lt.MIN),"Cannot add a document with a read time of zero");var c=e.Ac.serializer.kc(s,e.readTime);r=r.add(u.path.H());var h=vr(c);n+=h-o,i.push(e.Ac.Yu(t,u,c))}else if(n-=o,e.zo){var a=e.Ac.serializer.kc(new oe(u,lt.q()),e.readTime);i.push(e.Ac.Yu(t,u,a))}else i.push(e.Ac.$u(t,u))})),r.forEach((function(n){i.push(e.Ac.Cs.Ls(t,n))})),i.push(this.Ac.updateMetadata(t,n)),Dn.Wu(i)},e.prototype.ts=function(t,e){var i=this;return this.Ac.gc(t,e).next((function(t){return null===t?(i.Pc.set(e,0),null):(i.Pc.set(e,t.size),t.bc)}))},e.prototype.ns=function(t,e){var i=this;return this.Ac._c(t,e).next((function(t){var e=t.Ic;return t.Tc.forEach((function(t,e){i.Pc.set(t,e)})),e}))},e}(Cn),t}();function lr(t){return zr.ds(t,Or.store)}function pr(t){return zr.ds(t,kr.store)}function dr(t){return t.path.tt()}function vr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var yr=function(){function t(){this.Nc=new mr}return t.prototype.Ls=function(t,e){return this.Nc.add(e),Dn.resolve()},t.prototype.po=function(t,e){return Dn.resolve(this.Nc.getEntries(e))},t}(),mr=function(){function t(){this.index={}}return t.prototype.add=function(t){T(t.length%2==1,"Expected a collection path.");var e=t.X(),i=t.H(),n=this.index[e]||new _t(vt.G),r=!n.has(i);return this.index[e]=n.add(i),r},t.prototype.has=function(t){var e=t.X(),i=t.H(),n=this.index[e];return n&&n.has(i)},t.prototype.getEntries=function(t){return(this.index[t]||new _t(vt.G)).tt()},t}(),gr=9,wr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,i,n){var r=this;T(i<n&&i>=0&&n<=gr,"Unexpected schema upgrade from v"+i+" to v{toVersion}.");var u=new Mn(e);i<1&&n>=1&&(function(t){t.createObjectStore(Er.store)}(t),function(t){t.createObjectStore(_r.store,{keyPath:_r.keyPath}),t.createObjectStore(Tr.store,{keyPath:Tr.keyPath,autoIncrement:!0}).createIndex(Tr.userMutationsIndex,Tr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ar.store)}(t),xr(t),function(t){t.createObjectStore(kr.store)}(t));var s=Dn.resolve();return i<3&&n>=3&&(0!==i&&(function(t){t.deleteObjectStore(Cr.store),t.deleteObjectStore(Dr.store),t.deleteObjectStore(Rr.store)}(t),xr(t)),s=s.next((function(){return function(t){var e=t.store(Rr.store),i=new Rr(0,0,lt.MIN.M(),0);return e.put(Rr.key,i)}(u)}))),i<4&&n>=4&&(0!==i&&(s=s.next((function(){return function(t,e){return e.store(Tr.store).Is().next((function(i){t.deleteObjectStore(Tr.store),t.createObjectStore(Tr.store,{keyPath:Tr.keyPath,autoIncrement:!0}).createIndex(Tr.userMutationsIndex,Tr.userMutationsKeyPath,{unique:!0});var n=e.store(Tr.store),r=i.map((function(t){return n.put(t)}));return Dn.Wu(r)}))}(t,u)}))),s=s.next((function(){!function(t){t.createObjectStore(Lr.store,{keyPath:Lr.keyPath})}(t)}))),i<5&&n>=5&&(s=s.next((function(){return r.removeAcknowledgedMutations(u)}))),i<6&&n>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Or.store)}(t),r.addDocumentGlobal(u)}))),i<7&&n>=7&&(s=s.next((function(){return r.ensureSequenceNumbers(u)}))),i<8&&n>=8&&(s=s.next((function(){return r.createCollectionParentIndex(t,u)}))),i<9&&n>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(kr.store);e.createIndex(kr.readTimeIndex,kr.readTimeIndexPath,{unique:!1}),e.createIndex(kr.collectionReadTimeIndex,kr.collectionReadTimeIndexPath,{unique:!1})}(e)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(kr.store).Ss((function(t,i){e+=vr(i)})).next((function(){var i=new Or(e);return t.store(Or.store).put(Or.key,i)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,i=t.store(_r.store),n=t.store(Tr.store);return i.Is().next((function(i){return Dn.forEach(i,(function(i){var r=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.Is(Tr.userMutationsIndex,r).next((function(n){return Dn.forEach(n,(function(n){T(n.userId===i.userId,"Cannot process batch "+n.batchId+" from unexpected user");var r=e.serializer.Bs(n);return Bn(t,i.userId,r).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Cr.store),i=t.store(kr.store);return ur(t).next((function(t){var n=[];return i.Ss((function(i,r){var u=new vt(i),s=function(t){return[0,In(t)]}(u);n.push(e.get(s).next((function(i){return i?Dn.resolve():function(i){return e.put(new Cr(0,In(i),t))}(u)})))})).next((function(){return Dn.Wu(n)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Pr.store,{keyPath:Pr.keyPath});var i=e.store(Pr.store),n=new mr,r=function(t){if(n.add(t)){var e=t.X(),r=t.H();return i.put({collectionId:e,parent:In(r)})}};return e.store(kr.store).Ss({Ds:!0},(function(t,e){var i=new vt(t);return r(i.H())})).next((function(){return e.store(Ar.store).Ss({Ds:!0},(function(t,e){t[0];var i=t[1],n=(t[2],Tn(i));return r(n.H())}))}))},t}(),Ir=function(t,e){this.seconds=t,this.nanoseconds=e},Er=function(){function t(t,e,i){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=i}return t.store="owner",t.key="owner",t}(),_r=function(){function t(t,e,i){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=i}return t.store="mutationQueues",t.keyPath="userId",t}(),Tr=function(){function t(t,e,i,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=i,this.baseMutations=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Ar=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,In(e)]},t.key=function(t,e,i){return[t,In(e),i]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Nr=function(t,e){this.path=t,this.readTime=e},Sr=function(t,e){this.path=t,this.version=e},kr=function(){function t(t,e,i,n,r,u){this.unknownDocument=t,this.noDocument=e,this.document=i,this.hasCommittedMutations=n,this.readTime=r,this.parentPath=u}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),Or=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Dr=function(){function t(t,e,i,n,r,u,s){this.targetId=t,this.canonicalId=e,this.readTime=i,this.resumeToken=n,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=u,this.query=s}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Cr=function(){function t(t,e,i){this.targetId=t,this.path=e,this.sequenceNumber=i,T(0===t==(void 0!==i),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Rr=function(){function t(t,e,i,n){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=i,this.targetCount=n}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Pr=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function xr(t){t.createObjectStore(Cr.store,{keyPath:Cr.keyPath}).createIndex(Cr.documentTargetsIndex,Cr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Dr.store,{keyPath:Dr.keyPath}).createIndex(Dr.queryTargetsIndexName,Dr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Rr.store)}var Lr=function(){function t(t,e,i,n){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=i,this.inForeground=n}return t.store="clientMetadata",t.keyPath="clientId",t}(),Mr=[_r.store,Tr.store,Ar.store,kr.store,Dr.store,Er.store,Rr.store,Cr.store],Ur=c.__spreadArrays(Mr,[Lr.store]),jr=c.__spreadArrays(Ur,[Or.store]),Fr=c.__spreadArrays(jr,[Pr.store]),Vr=function(){function t(){this.Oc=new mr}return t.prototype.Ls=function(t,e){var i=this;if(T(e.length%2==1,"Expected a collection path."),!this.Oc.has(e)){var n=e.X(),r=e.H();t.us((function(){i.Oc.add(e)}));var u={collectionId:n,parent:In(r)};return qr(t).put(u)}return Dn.resolve()},t.prototype.po=function(t,e){var i=[],n=IDBKeyRange.bound([e,""],[k(e),""],!1,!0);return qr(t).Is(n).next((function(t){for(var n=0,r=t;n<r.length;n++){var u=r[n];if(u.collectionId!==e)break;i.push(Tn(u.parent))}return i}))},t}();function qr(t){return zr.ds(t,Pr.store)}var Gr=function(){function t(t){this.Fc=t}return t.prototype.Dc=function(t){if(t.document)return this.Fc.Ke(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=gt.at(t.noDocument.path),i=this.Vc(t.noDocument.readTime);return new oe(e,i,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=gt.at(t.unknownDocument.path),i=this.Vc(t.unknownDocument.version),new se(e,i)):_("Unexpected DbRemoteDocument")},t.prototype.kc=function(t,e){var i=this.Ec(e),n=t.key.path.H().tt();if(t instanceof ie){var r=t.proto?t.proto:this.Fc.ze(t),u=t.hasCommittedMutations;return new kr(null,null,r,u,i,n)}if(t instanceof oe){var s=t.key.path.tt(),o=this.Uc(t.version);return u=t.hasCommittedMutations,new kr(null,new Nr(s,o),null,u,i,n)}if(t instanceof se){s=t.key.path.tt();var c=this.Uc(t.version);return new kr(new Sr(s,c),null,null,!0,i,n)}return _("Unexpected MaybeDocument")},t.prototype.Ec=function(t){var e=t.M();return[e.seconds,e.nanoseconds]},t.prototype.Sc=function(t){var e=new ft(t[0],t[1]);return lt.L(e)},t.prototype.Uc=function(t){var e=t.M();return new Ir(e.seconds,e.nanoseconds)},t.prototype.Vc=function(t){var e=new ft(t.seconds,t.nanoseconds);return lt.L(e)},t.prototype.js=function(t,e){var i=this,n=e.baseMutations.map((function(t){return i.Fc.ir(t)})),r=e.mutations.map((function(t){return i.Fc.ir(t)}));return new Tr(t,e.batchId,e.En.toMillis(),n,r)},t.prototype.Bs=function(t){var e=this,i=(t.baseMutations||[]).map((function(t){return e.Fc.sr(t)})),n=t.mutations.map((function(t){return e.Fc.sr(t)})),r=ft.fromMillis(t.localWriteTimeMs);return new An(t.batchId,r,i,n)},t.prototype.xc=function(t){var e=[];return t.forEach((function(t){e.push(In(t.path))})),e},t.prototype.jc=function(t){for(var e=Ge(),i=0,n=t;i<n.length;i++){var r=n[i];e=e.add(new gt(Tn(r)))}return e},t.prototype.dc=function(t){var e,i=this.Vc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?this.Vc(t.lastLimboFreeSnapshotVersion):lt.MIN;return e=void 0!==t.query.documents?this.Fc.vr(t.query):this.Fc.br(t.query),new Oe(e,t.targetId,0,t.lastListenSequenceNumber,i,n,Te.fromBase64String(t.resumeToken))},t.prototype.vc=function(t){T(0===t.fi,"Only queries with purpose 0 may be stored, got "+t.fi);var e,i=this.Uc(t.li),n=this.Uc(t.lastLimboFreeSnapshotVersion);e=t.target.Nn()?this.Fc.dr(t.target):this.Fc.wr(t.target);var r=t.resumeToken.toBase64();return new Dr(t.targetId,t.target.canonicalId(),i,r,t.sequenceNumber,n,e)},t}(),Br="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Hr=function(t){function e(e,i){var n=t.call(this)||this;return n.Xs=e,n.Zo=i,n}return c.__extends(e,t),e}(Pn),zr=function(){function t(e,i,n,r,u,s,o,c){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=n,this.Lc=s,this.qc=c,this.Bc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Mc=null,this.inForeground=!1,this.Qc=null,this.Gc=null,this.Wc=Number.NEGATIVE_INFINITY,this.zc=function(t){return Promise.resolve()},this.As=new Yr(this,u),this.Kc=i+t.Hc,this.serializer=new Gr(o),this.document=r.document,this.Oo=new or(this.As,this.serializer),this.Cs=new Vr,this.so=new fr(this.serializer,this.Cs),!r.window||!r.window.localStorage)throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.Jc=this.window.localStorage}return t.ds=function(t,e){if(t instanceof Hr)return xn.ds(t.Xs,e);throw _("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.Yc=function(e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:if(!t.cs())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(i=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.Xc,e.Lc,e.serializer,e.qc)).start()];case 1:return n.sent(),[2,i]}}))}))},t.prototype.start=function(){var t=this;return T(!this.Co,"IndexedDbPersistence double-started!"),T(null!==this.window,"Expected 'window' to be defined"),xn.hs(this.Kc,gr,new wr(this.serializer)).then((function(e){return t.$c=e,t.Zc()})).then((function(){return t.ta(),t.na(),t.ia(),t.$c.runTransaction("readonly-idempotent",[Rr.store],(function(t){return ur(t)}))})).then((function(e){t.ea=new mn(e,t.qc)})).then((function(){t.Bc=!0})).catch((function(e){return t.$c&&t.$c.close(),Promise.reject(e)}))},t.prototype.ra=function(t){var e=this;return this.zc=function(i){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(e){return this.Co?[2,t(i)]:[2]}))}))},t(this.isPrimary)},t.prototype.ua=function(t){var e=this;this.$c.vs((function(i){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return null!==i.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Lc.$r((function(){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.Co?[4,this.Zc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Zc=function(){var t=this;return this.$c.runTransaction("readwrite-idempotent",Fr,(function(e){return Kr(e).put(new Lr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.sa(e).next((function(e){e||(t.isPrimary=!1,t.Lc.$r((function(){return t.zc(!1)})))}))})).next((function(){return t.oa(e)})).next((function(i){return t.isPrimary&&!i?t.ha(e).next((function(){return!1})):!!i&&t.ca(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return w("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Lc.$r((function(){return t.zc(e)})),t.isPrimary=e}))},t.prototype.sa=function(t){var e=this;return Wr(t).get(Er.key).next((function(t){return Dn.resolve(e.aa(t))}))},t.prototype.fa=function(t){return Kr(t).delete(this.clientId)},t.prototype.la=function(){return c.__awaiter(this,void 0,void 0,(function(){var e=this;return c.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.da(this.Wc,18e5)?[3,2]:(this.Wc=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(i){var n=t.ds(i,Lr.store);return n.Is().next((function(t){var i=e.va(t,18e5),r=t.filter((function(t){return-1===i.indexOf(t)}));return Dn.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:i.sent().forEach((function(t){e.window.localStorage.removeItem(e.wa(t.clientId))})),i.label=2;case 2:return[2]}}))}))},t.prototype.ia=function(){var t=this;this.Gc=this.Lc.fu("client_metadata_refresh",4e3,(function(){return t.Zc().then((function(){return t.la()})).then((function(){return t.ia()}))}))},t.prototype.aa=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.oa=function(t){var e=this;return Wr(t).get(Er.key).next((function(i){if(null!==i&&e.da(i.leaseTimestampMs,5e3)&&!e.ma(i.ownerId)){if(e.aa(i)&&e.networkEnabled)return!0;if(!e.aa(i)){if(!i.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Br);return!1}}return!(!e.networkEnabled||!e.inForeground)||Kr(t).Is().next((function(t){return void 0===e.va(t,5e3).find((function(t){if(e.clientId!==t.clientId){var i=!e.networkEnabled&&t.networkEnabled,n=!e.inForeground&&t.inForeground,r=e.networkEnabled===t.networkEnabled;if(i||n&&r)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&w("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return c.__awaiter(this,void 0,void 0,(function(){var t=this;return c.__generator(this,(function(e){switch(e.label){case 0:return this.Bc=!1,this.pa(),this.Gc&&(this.Gc.cancel(),this.Gc=null),this.ga(),this.ba(),[4,this.$c.runTransaction("readwrite-idempotent",[Er.store,Lr.store],(function(e){return t.ha(e).next((function(){return t.fa(e)}))}))];case 1:return e.sent(),this.$c.close(),this.ya(),[2]}}))}))},t.prototype.va=function(t,e){var i=this;return t.filter((function(t){return i.da(t.updateTimeMs,e)&&!i.ma(t.clientId)}))},t.prototype.gh=function(){var t=this;return this.$c.runTransaction("readonly-idempotent",[Lr.store],(function(e){return Kr(e).Is().next((function(e){return t.va(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:return t.cs()?(i=e+t.Hc,[4,xn.delete(i)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),t.prototype.Po=function(t){return T(this.Co,"Cannot initialize MutationQueue before persistence is started."),qn.ks(t,this.serializer,this.Cs,this.As)},t.prototype.Fo=function(){return T(this.Co,"Cannot initialize TargetCache before persistence is started."),this.Oo},t.prototype.No=function(){return T(this.Co,"Cannot initialize RemoteDocumentCache before persistence is started."),this.so},t.prototype.Uo=function(){return T(this.Co,"Cannot initialize IndexManager before persistence is started."),this.Cs},t.prototype.runTransaction=function(t,e,i){var n=this;w("IndexedDbPersistence","Starting transaction:",t);var r,u=e.endsWith("idempotent"),s=e.startsWith("readonly")?u?"readonly-idempotent":"readonly":u?"readwrite-idempotent":"readwrite";return this.$c.runTransaction(s,Fr,(function(u){return r=new Hr(u,n.ea.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?n.sa(u).next((function(t){return!!t||n.oa(u)})).next((function(e){if(!e)throw I("Failed to obtain primary lease for action '"+t+"'."),n.isPrimary=!1,n.Lc.$r((function(){return n.zc(!1)})),new P(R.FAILED_PRECONDITION,Rn);return i(r)})).next((function(t){return n.ca(u).next((function(){return t}))})):n._a(u).next((function(){return i(r)}))})).then((function(t){return r.ss(),t}))},t.prototype._a=function(t){var e=this;return Wr(t).get(Er.key).next((function(t){if(null!==t&&e.da(t.leaseTimestampMs,5e3)&&!e.ma(t.ownerId)&&!e.aa(t)&&!t.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Br)}))},t.prototype.ca=function(t){var e=new Er(this.clientId,this.allowTabSynchronization,Date.now());return Wr(t).put(Er.key,e)},t.cs=function(){return xn.cs()},t.Ia=function(t){var e=t.s.projectId;return t.s.o||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.ha=function(t){var e=this,i=Wr(t);return i.get(Er.key).next((function(t){return e.aa(t)?(w("IndexedDbPersistence","Releasing primary lease."),i.delete(Er.key)):Dn.resolve()}))},t.prototype.da=function(t,e){var i=Date.now();return!(t<i-e||t>i&&(I("Detected an update time that is in the future: "+t+" > "+i),1))},t.prototype.ta=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qc=function(){t.Lc.$r((function(){return t.inForeground="visible"===t.document.visibilityState,t.Zc()}))},this.document.addEventListener("visibilitychange",this.Qc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ga=function(){this.Qc&&(T(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Qc),this.Qc=null)},t.prototype.na=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Mc=function(){t.pa(),t.Lc.$r((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Mc))},t.prototype.ba=function(){this.Mc&&(T("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Mc),this.Mc=null)},t.prototype.ma=function(t){try{var e=null!==this.Jc.getItem(this.wa(t));return w("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return I("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pa=function(){try{this.Jc.setItem(this.wa(this.clientId),String(Date.now()))}catch(t){I("Failed to set zombie client id.",t)}},t.prototype.ya=function(){try{this.Jc.removeItem(this.wa(this.clientId))}catch(t){}},t.prototype.wa=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.Hc="main",t}();function Wr(t){return t.store(Er.store)}function Kr(t){return t.store(Lr.store)}var Yr=function(){function t(t,e){this.db=t,this.Ta=null,this.Wh=new ir(this,e)}return t.prototype.$h=function(t){var e=this.Ea(t);return this.db.Fo().wc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ea=function(t){var e=0;return this.tc(t,(function(t){e++})).next((function(){return e}))},t.prototype.ce=function(t,e){return this.db.Fo().ce(t,e)},t.prototype.tc=function(t,e){return this.Da(t,(function(t,i){return e(i)}))},t.prototype.Ao=function(t){this.Ta=t},t.prototype.Du=function(t,e){return tr(t,e)},t.prototype.Ru=function(t,e){return tr(t,e)},t.prototype.nc=function(t,e,i){return this.db.Fo().nc(t,e,i)},t.prototype.Zs=function(t,e){return tr(t,e)},t.prototype.Sa=function(t,e){return this.Ta.Ou(e)?Dn.resolve(!0):function(t,e){var i=!1;return Wn(t).Rs((function(n){return Gn(t,n,e).next((function(t){return t&&(i=!0),Dn.resolve(!t)}))})).next((function(){return i}))}(t,e)},t.prototype.ic=function(t,e){var i=this,n=this.db.No().Wo(),r=[],u=0;return this.Da(t,(function(s,o){if(o<=e){var c=i.Sa(t,s).next((function(e){if(!e)return u++,n.Zu(t,s).next((function(){return n.$u(s),cr(t).delete([0,In(s.path)])}))}));r.push(c)}})).next((function(){return Dn.Wu(r)})).next((function(){return n.apply(t)})).next((function(){return u}))},t.prototype.removeTarget=function(t,e){var i=e.di(t.Zo);return this.db.Fo().nh(t,i)},t.prototype.ih=function(t,e){return tr(t,e)},t.prototype.Da=function(t,e){var i,n=cr(t),r=mn.Mr;return n.Ss({index:Cr.documentTargetsIndex},(function(t,n){var u=t[0],s=(t[1],n.path),o=n.sequenceNumber;0===u?(r!==mn.Mr&&e(new gt(Tn(i)),r),r=o,i=s):r=mn.Mr})).next((function(){r!==mn.Mr&&e(new gt(Tn(i)),r)}))},t.prototype.ec=function(t){return this.db.No().Cc(t)},t}();function tr(t,e){return cr(t).put(function(t,e){return new Cr(0,In(t.path),e)}(e,t.Zo))}var Jr=function(){function t(){}return t.prototype.xo=function(t){this.Ra=t},t.prototype.do=function(t,e,i,n){var r=this;return T(void 0!==this.Ra,"setLocalDocumentsView() not called"),e.Jn()||i.isEqual(lt.MIN)?this.Ca(t,e):this.Ra.fo(t,n).next((function(u){var s=r.Aa(e,u);return(e.ii()||e.ei())&&r.Pa(e.Fn,s,n,i)?r.Ca(t,e):(y()<=0&&w("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),e.toString()),r.Ra.do(t,e,i).next((function(t){return s.forEach((function(e){t=t.lt(e.key,e)})),t})))}))},t.prototype.Aa=function(t,e){var i=new _t((function(e,i){return t.Xn(e,i)}));return e.forEach((function(e,n){n instanceof ie&&t.matches(n)&&(i=i.add(n))})),i},t.prototype.Pa=function(t,e,i,n){if(i.size!==e.size)return!0;var r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.h(n)>0)},t.prototype.Ca=function(t,e){return y()<=0&&w("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Ra.do(t,e,lt.MIN)},t}(),Xr=function(){function t(t,e){this.Cs=t,this.As=e,this.oo=[],this.ka=1,this.lastStreamToken=Te.ai,this.Na=new _t(kn.Sn)}return t.prototype.Ns=function(t){return Dn.resolve(0===this.oo.length)},t.prototype.Os=function(t,e,i){var n=e.batchId,r=this.Oa(n,"acknowledged");T(0===r,"Can only acknowledge the first batch in the mutation queue");var u=this.oo[r];return T(n===u.batchId,"Queue ordering failure: expected batch "+n+", got batch "+u.batchId),this.lastStreamToken=i,Dn.resolve()},t.prototype.Vs=function(t){return Dn.resolve(this.lastStreamToken)},t.prototype.Us=function(t,e){return this.lastStreamToken=e,Dn.resolve()},t.prototype.xs=function(t,e,i,n){T(0!==n.length,"Mutation batches should not be empty");var r=this.ka;this.ka++,this.oo.length>0&&T(this.oo[this.oo.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var u=new An(r,e,i,n);this.oo.push(u);for(var s=0,o=n;s<o.length;s++){var c=o[s];this.Na=this.Na.add(new kn(c.key,r)),this.Cs.Ls(t,c.key.path.H())}return Dn.resolve(u)},t.prototype.qs=function(t,e){return Dn.resolve(this.Fa(e))},t.prototype.Ms=function(t,e){var i=this.Fa(e);return T(null!=i,"Failed to find local mutation batch."),Dn.resolve(i.keys())},t.prototype.Qs=function(t,e){var i=e+1,n=this.Va(i),r=n<0?0:n;return Dn.resolve(this.oo.length>r?this.oo[r]:null)},t.prototype.Gs=function(){return Dn.resolve(0===this.oo.length?-1:this.ka-1)},t.prototype.Ws=function(t){return Dn.resolve(this.oo.slice())},t.prototype.zs=function(t,e){var i=this,n=new kn(e,0),r=new kn(e,Number.POSITIVE_INFINITY),u=[];return this.Na.Lt([n,r],(function(t){T(e.isEqual(t.key),"Should only iterate over a single key's batches");var n=i.Fa(t.Fu);T(null!==n,"Batches in the index must exist in the main table"),u.push(n)})),Dn.resolve(u)},t.prototype.Ks=function(t,e){var i=this,n=new _t(N);return e.forEach((function(t){var e=new kn(t,0),r=new kn(t,Number.POSITIVE_INFINITY);i.Na.Lt([e,r],(function(e){T(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),n=n.add(e.Fu)}))})),Dn.resolve(this.Ua(n))},t.prototype.Js=function(t,e){T(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=e.path,n=i.length+1,r=i;gt.ht(r)||(r=r.child(""));var u=new kn(new gt(r),0),s=new _t(N);return this.Na.qt((function(t){var e=t.key.path;return!!i.$(e)&&(e.length===n&&(s=s.add(t.Fu)),!0)}),u),Dn.resolve(this.Ua(s))},t.prototype.Ua=function(t){var e=this,i=[];return t.forEach((function(t){var n=e.Fa(t);null!==n&&i.push(n)})),i},t.prototype.Ys=function(t,e){var i=this;T(0===this.Oa(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.oo.shift();var n=this.Na;return Dn.forEach(e.mutations,(function(r){var u=new kn(r.key,e.batchId);return n=n.delete(u),i.As.Zs(t,r.key)})).next((function(){i.Na=n}))},t.prototype.$s=function(t){},t.prototype.Ou=function(t,e){var i=new kn(e,0),n=this.Na.Bt(i);return Dn.resolve(e.isEqual(n&&n.key))},t.prototype.to=function(t){return 0===this.oo.length&&T(this.Na.J(),"Document leak -- detected dangling mutation references when queue is empty."),Dn.resolve()},t.prototype.Oa=function(t,e){var i=this.Va(t);return T(i>=0&&i<this.oo.length,"Batches must exist to be "+e),i},t.prototype.Va=function(t){return 0===this.oo.length?0:t-this.oo[0].batchId},t.prototype.Fa=function(t){var e=this.Va(t);if(e<0||e>=this.oo.length)return null;var i=this.oo[e];return T(i.batchId===t,"If found batch must match"),i},t}(),Qr=function(){function t(t,e){this.Cs=t,this.xa=e,this.docs=new wt(gt.G),this.size=0}return t.prototype.Yu=function(t,e,i){T(!i.isEqual(lt.MIN),"Cannot add a document with a read time of zero");var n=e.key,r=this.docs.get(n),u=r?r.size:0,s=this.xa(e);return this.docs=this.docs.lt(n,{bc:e,size:s,readTime:i}),this.size+=s-u,this.Cs.Ls(t,n.path.H())},t.prototype.$u=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Zu=function(t,e){var i=this.docs.get(e);return Dn.resolve(i?i.bc:null)},t.prototype.getEntries=function(t,e){var i=this,n=Me();return e.forEach((function(t){var e=i.docs.get(t);n=n.lt(t,e?e.bc:null)})),Dn.resolve(n)},t.prototype.do=function(t,e,i){T(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=je(),r=new gt(e.path.child("")),u=this.docs.yt(r);u.St();){var s=u.Dt(),o=s.key,c=s.value,h=c.bc,a=c.readTime;if(!e.path.$(o.path))break;a.h(i)<=0||h instanceof ie&&e.matches(h)&&(n=n.lt(h.key,h))}return Dn.resolve(n)},t.prototype.ja=function(t,e){return Dn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Eh=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.Sh=function(t){return Dn.resolve(lt.MIN)},t.prototype.Wo=function(e){return new t.Rc(this)},t.prototype.Cc=function(t){return Dn.resolve(this.size)},t.Rc=function(t){function e(e){var i=t.call(this)||this;return i.Ac=e,i}return c.__extends(e,t),e.prototype.es=function(t){var e=this,i=[];return this.Ku.forEach((function(n,r){r?i.push(e.Ac.Yu(t,r,e.readTime)):e.Ac.$u(n)})),Dn.Wu(i)},e.prototype.ts=function(t,e){return this.Ac.Zu(t,e)},e.prototype.ns=function(t,e){return this.Ac.getEntries(t,e)},e}(Cn),t}(),$r=function(){function t(t){this.persistence=t,this.La=new On((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=lt.MIN,this.highestTargetId=0,this.qa=0,this.Ba=new Sn,this.targetCount=0,this.uc=Kn.ro()}return t.prototype.ce=function(t,e){return this.La.forEach((function(t,i){return e(i)})),Dn.resolve()},t.prototype.Jo=function(t){return Dn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.hc=function(t){return Dn.resolve(this.qa)},t.prototype.fh=function(t){var e=this.uc.after(this.highestTargetId);return this.highestTargetId=e,Dn.resolve(e)},t.prototype.eh=function(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.qa&&(this.qa=e),Dn.resolve()},t.prototype.cc=function(t){this.La.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.qa&&(this.qa=t.sequenceNumber)},t.prototype.lh=function(t,e){return T(!this.La.has(e.target),"Adding a target that already exists"),this.cc(e),this.targetCount+=1,Dn.resolve()},t.prototype.nh=function(t,e){return T(this.La.has(e.target),"Updating a non-existent target"),this.cc(e),Dn.resolve()},t.prototype.fc=function(t,e){return T(this.targetCount>0,"Removing a target from an empty cache"),T(this.La.has(e.target),"Removing a non-existent target from the cache"),this.La.delete(e.target),this.Ba.Pu(e.targetId),this.targetCount-=1,Dn.resolve()},t.prototype.nc=function(t,e,i){var n=this,r=0,u=[];return this.La.forEach((function(s,o){o.sequenceNumber<=e&&null===i.get(o.targetId)&&(n.La.delete(s),u.push(n.lc(t,o.targetId)),r++)})),Dn.Wu(u).next((function(){return r}))},t.prototype.wc=function(t){return Dn.resolve(this.targetCount)},t.prototype.ah=function(t,e){var i=this.La.get(e)||null;return Dn.resolve(i)},t.prototype.ye=function(t,e){return _("Not yet implemented.")},t.prototype.$o=function(t,e,i){this.Ba.Su(e,i);var n=this.persistence.As,r=[];return n&&e.forEach((function(e){r.push(n.Du(t,e))})),Dn.Wu(r)},t.prototype.Xo=function(t,e,i){this.Ba.Au(e,i);var n=this.persistence.As,r=[];return n&&e.forEach((function(e){r.push(n.Ru(t,e))})),Dn.Wu(r)},t.prototype.lc=function(t,e){return this.Ba.Pu(e),Dn.resolve()},t.prototype.wh=function(t,e){var i=this.Ba.Nu(e);return Dn.resolve(i)},t.prototype.Ou=function(t,e){return Dn.resolve(this.Ba.Ou(e))},t}(),Zr=function(){function t(t,e){var i=this;this.clientId=t,this.Ma={},this.ea=new mn(0),this.Bc=!1,this.Bc=!0,this.As=e(this),this.Oo=new $r(this),this.Cs=new yr,this.so=new Qr(this.Cs,(function(t){return i.As.Qa(t)}))}return t.Ga=function(e,i){return new t(e,(function(t){return new hr(t,i)}))},t.Wa=function(e){return new t(e,(function(t){return new ei(t)}))},t.prototype.shutdown=function(){return this.Bc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),t.prototype.gh=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.ra=function(t){return t(!0)},t.prototype.ua=function(){},t.prototype.yh=function(t){},t.prototype.Uo=function(){return this.Cs},t.prototype.Po=function(t){var e=this.Ma[t.v()];return e||(e=new Xr(this.Cs,this.As),this.Ma[t.v()]=e),e},t.prototype.Fo=function(){return this.Oo},t.prototype.No=function(){return this.so},t.prototype.runTransaction=function(t,e,i){var n=this;w("MemoryPersistence","Starting transaction:",t);var r=new ti(this.ea.next());return this.As.za(),i(r).next((function(t){return n.As.Ka(r).next((function(){return t}))})).Qu().then((function(t){return r.ss(),t}))},t.prototype.Ha=function(t,e){return Dn.zu((i=this.Ma,n=[],B(i,(function(t,e){return n.push(e)})),n).map((function(i){return function(){return i.Ou(t,e)}})));var i,n},t}(),ti=function(t){function e(e){var i=t.call(this)||this;return i.Zo=e,i}return c.__extends(e,t),e}(Pn),ei=function(){function t(t){this.persistence=t,this.Ta=null,this.Ja=null}return Object.defineProperty(t.prototype,"Ya",{get:function(){if(this.Ja)return this.Ja;throw _("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.Ao=function(t){this.Ta=t},t.prototype.Du=function(t,e){return this.Ya.delete(e),Dn.resolve()},t.prototype.Ru=function(t,e){return this.Ya.add(e),Dn.resolve()},t.prototype.Zs=function(t,e){return this.Ya.add(e),Dn.resolve()},t.prototype.removeTarget=function(t,e){var i=this,n=this.persistence.Fo();return n.wh(t,e.targetId).next((function(t){t.forEach((function(t){return i.Ya.add(t)}))})).next((function(){return n.fc(t,e)}))},t.prototype.za=function(){this.Ja=new Set},t.prototype.Ka=function(t){var e=this,i=this.persistence.No().Wo();return Dn.forEach(this.Ya,(function(n){return e.Xa(t,n).next((function(t){t||i.$u(n)}))})).next((function(){return e.Ja=null,i.apply(t)}))},t.prototype.ih=function(t,e){var i=this;return this.Xa(t,e).next((function(t){t?i.Ya.delete(e):i.Ya.add(e)}))},t.prototype.Qa=function(t){return 0},t.prototype.Xa=function(t,e){var i=this;return Dn.zu([function(){return i.persistence.Fo().Ou(t,e)},function(){return i.persistence.Ha(t,e)},function(){return Dn.resolve(i.Ta.Ou(e))}])},t}(),hr=function(){function t(t,e){this.persistence=t,this.Ta=null,this.$a=new On((function(t){return In(t.path)})),this.Wh=new ir(this,e)}return t.prototype.za=function(){},t.prototype.Ka=function(t){return Dn.resolve()},t.prototype.ce=function(t,e){return this.persistence.Fo().ce(t,e)},t.prototype.$h=function(t){var e=this.Za(t);return this.persistence.Fo().wc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Za=function(t){var e=0;return this.tc(t,(function(t){e++})).next((function(){return e}))},t.prototype.tc=function(t,e){var i=this;return Dn.forEach(this.$a,(function(n,r){return i.Sa(t,n,r).next((function(t){return t?Dn.resolve():e(r)}))}))},t.prototype.Ao=function(t){this.Ta=t},t.prototype.nc=function(t,e,i){return this.persistence.Fo().nc(t,e,i)},t.prototype.ic=function(t,e){var i=this,n=0,r=this.persistence.No(),u=r.Wo();return r.ja(t,(function(r){return i.Sa(t,r,e).next((function(t){t||(n++,u.$u(r))}))})).next((function(){return u.apply(t)})).next((function(){return n}))},t.prototype.Zs=function(t,e){return this.$a.set(e,t.Zo),Dn.resolve()},t.prototype.removeTarget=function(t,e){var i=e.di(t.Zo);return this.persistence.Fo().nh(t,i)},t.prototype.Du=function(t,e){return this.$a.set(e,t.Zo),Dn.resolve()},t.prototype.Ru=function(t,e){return this.$a.set(e,t.Zo),Dn.resolve()},t.prototype.ih=function(t,e){return this.$a.set(e,t.Zo),Dn.resolve()},t.prototype.Qa=function(t){var e=t.key.toString().length;return t instanceof ie&&(e+=t.data().bn()),e},t.prototype.Sa=function(t,e,i){var n=this;return Dn.zu([function(){return n.persistence.Ha(t,e)},function(){return Dn.resolve(n.Ta.Ou(e))},function(){return n.persistence.Fo().Ou(t,e)},function(){var t=n.$a.get(e);return Dn.resolve(void 0!==t&&t>i)}])},t.prototype.ec=function(t){return this.persistence.No().Cc(t)},t}(),ni=function(){function t(t,e,i,n,r){void 0===i&&(i=1e3),void 0===n&&(n=1.5),void 0===r&&(r=6e4),this.Lc=t,this.Gr=e,this.tf=i,this.nf=n,this.if=r,this.ef=0,this.rf=null,this.uf=Date.now(),this.reset()}return t.prototype.reset=function(){this.ef=0},t.prototype.sf=function(){this.ef=this.if},t.prototype.hf=function(t){var e=this;this.cancel();var i=Math.floor(this.ef+this.cf()),n=Math.max(0,Date.now()-this.uf),r=Math.max(0,i-n);this.ef>0&&w("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.ef+" ms, delay with jitter: "+i+" ms, last attempt: "+n+" ms ago)"),this.rf=this.Lc.fu(this.Gr,r,(function(){return e.uf=Date.now(),t()})),this.ef*=this.nf,this.ef<this.tf&&(this.ef=this.tf),this.ef>this.if&&(this.ef=this.if)},t.prototype.cancel=function(){null!==this.rf&&(this.rf.cancel(),this.rf=null)},t.prototype.cf=function(){return(Math.random()-.5)*this.ef},t}(),ri=function(){function t(t,e,i,n,r,u){this.Lc=t,this.af=i,this.connection=n,this.ff=r,this.listener=u,this.state=0,this.lf=0,this.df=null,this.stream=null,this.vf=new ni(t,e)}return t.prototype.wf=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.mf=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?(T(0===this.state,"Already started"),this.auth()):this.pf()},t.prototype.stop=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.wf()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.gf=function(){T(!this.wf(),"Can only inhibit backoff in a stopped state"),this.state=0,this.vf.reset()},t.prototype.bf=function(){var t=this;this.mf()&&null===this.df&&(this.df=this.Lc.fu(this.af,6e4,(function(){return t.yf()})))},t.prototype._f=function(t){this.If(),this.stream.send(t)},t.prototype.yf=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return this.mf()?[2,this.close(0)]:[2]}))}))},t.prototype.If=function(){this.df&&(this.df.cancel(),this.df=null)},t.prototype.close=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(i){switch(i.label){case 0:return T(this.wf(),"Only started streams should be closed."),T(3===t||ae(e),"Can't provide an error when not in an error state."),this.If(),this.vf.cancel(),this.lf++,3!==t?this.vf.reset():e&&e.code===R.RESOURCE_EXHAUSTED?(I(e.toString()),I("Using maximum backoff delay to prevent overloading the backend."),this.vf.sf()):e&&e.code===R.UNAUTHENTICATED&&this.ff.I(),null!==this.stream&&(this.Tf(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ef(e)];case 1:return i.sent(),[2]}}))}))},t.prototype.Tf=function(){},t.prototype.auth=function(){var t=this;T(0===this.state,"Must be in initial state to auth"),this.state=1;var e=this.Df(this.lf),i=this.lf;this.ff.getToken().then((function(e){t.lf===i&&t.Sf(e)}),(function(i){e((function(){var e=new P(R.UNKNOWN,"Fetching auth token failed: "+i.message);return t.Rf(e)}))}))},t.prototype.Sf=function(t){var e=this;T(1===this.state,"Trying to start stream in a non-starting state");var i=this.Df(this.lf);this.stream=this.Cf(t),this.stream.Af((function(){i((function(){return T(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Af()}))})),this.stream.Ef((function(t){i((function(){return e.Rf(t)}))})),this.stream.onMessage((function(t){i((function(){return e.onMessage(t)}))}))},t.prototype.pf=function(){var t=this;T(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.vf.hf((function(){return c.__awaiter(t,void 0,void 0,(function(){return c.__generator(this,(function(t){return T(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),T(this.wf(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.Rf=function(t){return T(this.wf(),"Can't handle server close on non-started stream"),w("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Df=function(t){var e=this;return function(i){e.Lc.$r((function(){return e.lf===t?i():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ii=function(t){function e(e,i,n,r,u){var s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",i,n,u)||this;return s.serializer=r,s}return c.__extends(e,t),e.prototype.Cf=function(t){return this.connection.Pf("Listen",t)},e.prototype.onMessage=function(t){this.vf.reset();var e=this.serializer.Ze(t),i=this.serializer.nr(t);return this.listener.kf(e,i)},e.prototype.watch=function(t){var e={};e.database=this.serializer.je,e.addTarget=this.serializer.Yn(t);var i=this.serializer.Tr(t);i&&(e.labels=i),this._f(e)},e.prototype.Nf=function(t){var e={};e.database=this.serializer.je,e.removeTarget=t,this._f(e)},e}(ri),oi=function(t){function e(e,i,n,r,u){var s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",i,n,u)||this;return s.serializer=r,s.Of=!1,s.lastStreamToken=Te.ai,s}return c.__extends(e,t),Object.defineProperty(e.prototype,"Ff",{get:function(){return this.Of},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.Of=!1,t.prototype.start.call(this)},e.prototype.Tf=function(){this.Of&&this.Vf([])},e.prototype.Cf=function(t){return this.connection.Pf("Write",t)},e.prototype.onMessage=function(t){if(T(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.Re(t.streamToken),this.Of){this.vf.reset();var e=this.serializer.lr(t.writeResults,t.commitTime),i=this.serializer.fromVersion(t.commitTime);return this.listener.Uf(i,e)}return T(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.Of=!0,this.listener.xf()},e.prototype.jf=function(){T(this.mf(),"Writing handshake requires an opened stream"),T(!this.Of,"Handshake already completed");var t={};t.database=this.serializer.je,this._f(t)},e.prototype.Vf=function(t){var e=this;T(this.mf(),"Writing mutations requires an opened stream"),T(this.Of,"Handshake must be complete before writing mutations"),T(this.lastStreamToken.bn()>0,"Trying to write mutation without a token");var i={streamToken:this.serializer.Se(this.lastStreamToken),writes:t.map((function(t){return e.serializer.ir(t)}))};this._f(i)},e}(ri),si=function(){function t(t,e,i,n){this.Lc=t,this.connection=e,this.credentials=i,this.serializer=n}return t.prototype.Lf=function(t){return new oi(this.Lc,this.connection,this.credentials,this.serializer,t)},t.prototype.qf=function(t){return new ii(this.Lc,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,i={database:this.serializer.je,writes:t.map((function(t){return e.serializer.ir(t)}))};return this.Bf("Commit",i).then((function(t){return e.serializer.lr(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,i={database:this.serializer.je,documents:t.map((function(t){return e.serializer.Oe(t)}))};return this.Mf("BatchGetDocuments",i).then((function(i){var n=Le();i.forEach((function(t){var i=e.serializer.Ye(t);n=n.lt(i.key,i)}));var r=[];return t.forEach((function(t){var e=n.get(t);T(!!e,"Missing entity in write response for "+t),r.push(e)})),r}))},t.prototype.Bf=function(t,e){var i=this;return this.credentials.getToken().then((function(n){return i.connection.Bf(t,e,n)})).catch((function(t){throw t.code===R.UNAUTHENTICATED&&i.credentials.I(),t}))},t.prototype.Mf=function(t,e){var i=this;return this.credentials.getToken().then((function(n){return i.connection.Mf(t,e,n)})).catch((function(t){throw t.code===R.UNAUTHENTICATED&&i.credentials.I(),t}))},t}(),ai=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];J("FieldPath",t,"fieldNames",1);for(var i=0;i<t.length;++i)if(X("FieldPath","string",i,t[i]),0===t[i].length)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Qf=new mt(t)}return t.documentId=function(){return t.Gf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw dt("isEqual","FieldPath",1,e);return this.Qf.isEqual(e.Qf)},t.Gf=new t(mt.st().nt()),t}(),ui=new RegExp("[~\\*/\\[\\]]"),ci=function(){function t(t){this.Wf=t}return t.delete=function(){return z("FieldValue.delete",arguments),hi.instance},t.serverTimestamp=function(){return z("FieldValue.serverTimestamp",arguments),fi.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return K("FieldValue.arrayUnion",arguments,1),new br(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return K("FieldValue.arrayRemove",arguments,1),new pi(t)},t.increment=function(t){return X("FieldValue.increment","number",1,t),W("FieldValue.increment",arguments,1),new di(t)},t.prototype.isEqual=function(t){return this===t},t}(),hi=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return c.__extends(e,t),e.instance=new e,e}(ci),fi=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return c.__extends(e,t),e.instance=new e,e}(ci),br=function(t){function e(e){var i=t.call(this,"FieldValue.arrayUnion")||this;return i.zf=e,i}return c.__extends(e,t),e}(ci),pi=function(t){function e(e){var i=t.call(this,"FieldValue.arrayRemove")||this;return i.zf=e,i}return c.__extends(e,t),e}(ci),di=function(t){function e(e){var i=t.call(this,"FieldValue.increment")||this;return i.Kf=e,i}return c.__extends(e,t),e}(ci),vi=ln(ci,"Use FieldValue.<field>() instead."),yi=/^__.*__$/,mi=function(){function t(t,e,i){this.data=t,this.un=e,this.fieldTransforms=i}return t.prototype.Hf=function(t,e){var i=[];return null!==this.un?i.push(new Mt(t,this.data,this.un,e)):i.push(new Lt(t,this.data,e)),this.fieldTransforms.length>0&&i.push(new Ut(t,this.fieldTransforms)),i},t}(),gi=function(){function t(t,e,i){this.data=t,this.un=e,this.fieldTransforms=i}return t.prototype.Hf=function(t,e){var i=[new Mt(t,this.data,this.un,e)];return this.fieldTransforms.length>0&&i.push(new Ut(t,this.fieldTransforms)),i},t}();function wi(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _("Unexpected case for UserDataSource: "+t)}}var bi=function(){function t(t,e,i,n,r,u){this.Jf=t,this.methodName=e,this.path=i,this.Yf=n,void 0===r&&this.Xf(),this.Yf=void 0!==n&&n,this.fieldTransforms=r||[],this.un=u||[]}return t.prototype.$f=function(e){var i=null==this.path?null:this.path.child(e),n=new t(this.Jf,this.methodName,i,!1,this.fieldTransforms,this.un);return n.Zf(e),n},t.prototype.tl=function(e){var i=null==this.path?null:this.path.child(e),n=new t(this.Jf,this.methodName,i,!1,this.fieldTransforms,this.un);return n.Xf(),n},t.prototype.nl=function(e){return new t(this.Jf,this.methodName,null,!0,this.fieldTransforms,this.un)},t.prototype.il=function(t){var e=null===this.path||this.path.J()?"":" (found in field "+this.path.toString()+")";return new P(R.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.un.find((function(e){return t.$(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.$(e.field)}))},t.prototype.Xf=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Zf(this.path.get(t))},t.prototype.Zf=function(t){if(0===t.length)throw this.il("Document fields must not be empty");if(wi(this.Jf)&&yi.test(t))throw this.il('Document fields cannot begin and end with "__"')},t}(),Ii=function(t,e){this.s=t,this.key=e},Ei=function(){function t(t){this.el=t}return t.prototype.rl=function(t,e){var i=new bi(0,t,mt.et);Ti("Data must be an object, but it was:",i,e);var n=this.ul(e,i);return new mi(n,null,i.fieldTransforms)},t.prototype.sl=function(t,e,i){var n=new bi(2,t,mt.et);Ti("Data must be an object, but it was:",n,e);var r,u,s=this.ul(e,n);if(i){for(var o=new _t(mt.G),c=0,h=i;c<h.length;c++){var a=h[c],f=void 0;if(a instanceof ai)f=a.Qf;else{if("string"!=typeof a)throw _("Expected stringOrFieldPath to be a string or a FieldPath");f=Ni(t,a)}if(!n.contains(f))throw new P(R.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");o=o.add(f)}r=Dt.Jt(o),u=n.fieldTransforms.filter((function(t){return r.Xt(t.field)}))}else r=Dt.Yt(n.un),u=n.fieldTransforms;return new mi(s,r,u)},t.prototype.ol=function(t,e){var i=this,n=new bi(1,t,mt.et);Ti("Data must be an object, but it was:",n,e);var r=new _t(mt.G),u=te.vn();B(e,(function(e,s){var o=Ni(t,e),c=n.tl(o);if((s=i.hl(s,c))instanceof hi)r=r.add(o);else{var h=i.ul(s,c);null!=h&&(r=r.add(o),u.set(o,h))}}));var s=Dt.Jt(r);return new gi(u.cn(),s,n.fieldTransforms)},t.prototype.cl=function(t,e,i,n){var r=new bi(1,t,mt.et),u=[Ai(t,e)],s=[i];if(n.length%2!=0)throw new P(R.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var o=0;o<n.length;o+=2)u.push(Ai(t,n[o])),s.push(n[o+1]);var c=new _t(mt.G),h=te.vn();for(o=0;o<u.length;++o){var a=u[o],f=r.tl(a),l=this.hl(s[o],f);if(l instanceof hi)c=c.add(a);else{var d=this.ul(l,f);null!=d&&(c=c.add(a),h.set(a,d))}}var v=Dt.Jt(c);return new gi(h.cn(),v,r.fieldTransforms)},t.prototype.al=function(t,e,i){void 0===i&&(i=!1);var n=new bi(i?4:3,t,mt.et),r=this.ul(e,n);return T(null!=r,"Parsed data should not be null."),T(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.hl=function(t,e){try{return this.el(t)}catch(t){var i=Si(t);throw e.il(i)}},t.prototype.ul=function(t,e){if(_i(t=this.hl(t,e)))return Ti("Unsupported field value:",e,t),this.fl(t,e);if(t instanceof ci)return this.ll(t,e),null;if(e.path&&e.un.push(e.path),t instanceof Array){if(e.Yf&&4!==e.Jf)throw e.il("Nested arrays are not supported");return this.dl(t,e)}return this.vl(t,e)},t.prototype.fl=function(t,e){var i=this,n=new wt(N);return H(t)?e.path&&e.path.length>0&&e.un.push(e.path):B(t,(function(t,r){var u=i.ul(r,e.$f(t));null!=u&&(n=n.lt(t,u))})),new te(n)},t.prototype.dl=function(t,e){for(var i=[],n=0,r=0,u=t;r<u.length;r++){var s=u[r],o=this.ul(s,e.nl(n));null==o&&(o=Gt.yn),i.push(o),n++}return new ne(i)},t.prototype.ll=function(t,e){if(!wi(e.Jf))throw e.il(t.Wf+"() can only be used with update() and set()");if(null===e.path)throw e.il(t.Wf+"() is not currently supported inside arrays");if(t instanceof hi){if(2!==e.Jf)throw 1===e.Jf?(T(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.il("FieldValue.delete() can only appear at the top level of your update data")):e.il("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.un.push(e.path)}else if(t instanceof fi)e.fieldTransforms.push(new Ct(e.path,At.instance));else if(t instanceof br){var i=this.wl(t.Wf,t.zf),n=new Nt(i);e.fieldTransforms.push(new Ct(e.path,n))}else if(t instanceof pi){i=this.wl(t.Wf,t.zf);var r=new St(i);e.fieldTransforms.push(new Ct(e.path,r))}else if(t instanceof di){var u=this.al("FieldValue.increment",t.Kf),s=new kt(u);e.fieldTransforms.push(new Ct(e.path,s))}else _("Unknown FieldValue type: "+t)},t.prototype.vl=function(t,e){if(null===t)return Gt.yn;if("number"==typeof t)return ce(t)?new Wt(t):new Kt(t);if("boolean"==typeof t)return Bt.of(t);if("string"==typeof t)return new Yt(t);if(t instanceof Date)return new Jt(ft.fromDate(t));if(t instanceof ft)return new Jt(new ft(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof ht)return new Zt(t);if(t instanceof vn)return new Qt(t);if(t instanceof Ii)return new $t(t.s,t.key);throw e.il("Unsupported field value: "+it(t))},t.prototype.wl=function(t,e){var i=this;return e.map((function(e,n){var r=new bi(3,t,mt.et);return i.ul(e,r.nl(n))}))},t}();function _i(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof ht||t instanceof vn||t instanceof Ii||t instanceof ci)}function Ti(t,e,i){if(!_i(i)||!nt(i)){var n=it(i);throw"an object"===n?e.il(t+" a custom object"):e.il(t+" "+n)}}function Ai(t,e){if(e instanceof ai)return e.Qf;if("string"==typeof e)return Ni(t,e);throw new P(R.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ni(t,i){try{return function(t){if(t.search(ui)>=0)throw new P(R.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ai.bind.apply(ai,c.__spreadArrays([void 0],t.split("."))))}catch(e){throw new P(R.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(i).Qf}catch(n){var e=Si(n);throw new P(R.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+e)}}function Si(t){return t instanceof Error?t.message:t.toString()}var ki=function(){function t(t){this.ml=t,this.pl=Ve(),this.mutations=[],this.gl=!1,this.bl=null,this.yl=new Set}return t.prototype.lookup=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i=this;return c.__generator(this,(function(n){switch(n.label){case 0:if(this._l(),this.mutations.length>0)throw new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.ml.lookup(t)];case 1:return(e=n.sent()).forEach((function(t){t instanceof oe||t instanceof ie?i.Il(t):_("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.Hf(t,this.in(t))),this.yl.add(t)},t.prototype.update=function(t,e){try{this.write(e.Hf(t,this.Tl(t)))}catch(t){this.bl=t}this.yl.add(t)},t.prototype.delete=function(t){this.write([new jt(t,this.in(t))]),this.yl.add(t)},t.prototype.commit=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e=this;return c.__generator(this,(function(i){switch(i.label){case 0:if(this._l(),this.bl)throw this.bl;return t=this.pl,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,i){e.mutations.push(new Ft(t,e.in(t)))})),[4,this.ml.commit(this.mutations)];case 1:return i.sent(),this.gl=!0,[2]}}))}))},t.prototype.Il=function(t){var e;if(t instanceof ie)e=t.version;else{if(!(t instanceof oe))throw _("Document in a transaction was a "+t.constructor.name);e=lt.q()}var i=this.pl.get(t.key);if(null!==i){if(!e.isEqual(i))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.pl=this.pl.lt(t.key,e)},t.prototype.in=function(t){var e=this.pl.get(t);return!this.yl.has(t)&&e?Pt.updateTime(e):Pt.NONE},t.prototype.Tl=function(t){var e=this.pl.get(t);if(!this.yl.has(t)&&e){if(e.isEqual(lt.q()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pt.updateTime(e)}return Pt.exists(!0)},t.prototype.write=function(t){this._l(),this.mutations=this.mutations.concat(t)},t.prototype._l=function(){T(!this.gl,"A transaction object cannot be used after its update callback has been invoked.")},t}(),Oi=function(){function t(t,e){this.Qr=t,this.El=e,this.state="Unknown",this.Dl=0,this.Sl=null,this.Rl=!0}return t.prototype.Cl=function(){var t=this;0===this.Dl&&(this.Al("Unknown"),T(null===this.Sl,"onlineStateTimer shouldn't be started yet"),this.Sl=this.Qr.fu("online_state_timeout",1e4,(function(){return t.Sl=null,T("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Pl("Backend didn't respond within 10 seconds."),t.Al("Offline"),Promise.resolve()})))},t.prototype.kl=function(t){"Online"===this.state?(this.Al("Unknown"),T(0===this.Dl,"watchStreamFailures must be 0"),T(null===this.Sl,"onlineStateTimer must be null")):(this.Dl++,this.Dl>=1&&(this.Nl(),this.Pl("Connection failed 1 times. Most recent error: "+t.toString()),this.Al("Offline")))},t.prototype.set=function(t){this.Nl(),this.Dl=0,"Online"===t&&(this.Rl=!1),this.Al(t)},t.prototype.Al=function(t){t!==this.state&&(this.state=t,this.El(t))},t.prototype.Pl=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rl?(I(e),this.Rl=!1):w("OnlineStateTracker",e)},t.prototype.Nl=function(){null!==this.Sl&&(this.Sl.cancel(),this.Sl=null)},t}(),Di=function(){function t(t,e,i,n,s){var r=this;this.zh=t,this.ml=e,this.Ol=[],this.Fl={},this.Vl=null,this.networkEnabled=!1,this.isPrimary=!1,this.Ul=s,this.Ul.xl((function(t){i.$r((function(){return c.__awaiter(r,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.jl()?(w("RemoteStore","Restarting streams for network reachability change."),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.ql=new Oi(i,n),this.Bl=this.ml.qf({Af:this.Ml.bind(this),Ef:this.Ql.bind(this),kf:this.Gl.bind(this)}),this.Wl=this.ml.Lf({Af:this.zl.bind(this),Ef:this.Kl.bind(this),xf:this.Hl.bind(this),Uf:this.Uf.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return c.__awaiter(this,void 0,void 0,(function(){var t;return c.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.jl()?(t=this.Wl,[4,this.zh.Vs()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.Jl()?this.Yl():this.ql.set("Unknown"),[4,this.Xl()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Offline"),[2]}}))}))},t.prototype.$l=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return[4,this.Wl.stop()];case 1:return t.sent(),[4,this.Bl.stop()];case 2:return t.sent(),this.Ol.length>0&&(w("RemoteStore","Stopping write stream with "+this.Ol.length+" pending writes"),this.Ol=[]),this.Zl(),[2]}}))}))},t.prototype.shutdown=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return w("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.Ul.shutdown(),this.ql.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){F(this.Fl,t.targetId)||(this.Fl[t.targetId]=t,this.Jl()?this.Yl():this.Bl.mf()&&this.td(t))},t.prototype.nd=function(t){T(F(this.Fl,t),"unlisten called on target no currently watched: "+t),delete this.Fl[t],this.Bl.mf()&&this.ed(t),H(this.Fl)&&(this.Bl.mf()?this.Bl.bf():this.jl()&&this.ql.set("Unknown"))},t.prototype.ye=function(t){return this.Fl[t]||null},t.prototype.be=function(t){return this.rd.be(t)},t.prototype.td=function(t){this.Vl.Xi(t.targetId),this.Bl.watch(t)},t.prototype.ed=function(t){this.Vl.Xi(t),this.Bl.Nf(t)},t.prototype.Yl=function(){T(this.Jl(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Vl=new tn(this),this.Bl.start(),this.ql.Cl()},t.prototype.Jl=function(){return this.jl()&&!this.Bl.wf()&&!H(this.Fl)},t.prototype.jl=function(){return this.isPrimary&&this.networkEnabled},t.prototype.Zl=function(){this.Vl=null},t.prototype.Ml=function(){return c.__awaiter(this,void 0,void 0,(function(){var t=this;return c.__generator(this,(function(e){return G(this.Fl,(function(e,i){t.td(i)})),[2]}))}))},t.prototype.Ql=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){return void 0===t&&T(!this.Jl(),"Watch stream was stopped gracefully while still needed."),this.Zl(),this.Jl()?(this.ql.kl(t),this.Yl()):this.ql.set("Unknown"),[2]}))}))},t.prototype.Gl=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:return this.ql.set("Online"),t instanceof $e&&2===t.state&&t.cause?[2,this.ud(t)]:(t instanceof Xe?this.Vl.ue(t):t instanceof Qe?this.Vl.de(t):(T(t instanceof $e,"Expected watchChange to be an instance of WatchTargetChange"),this.Vl.he(t)),e.isEqual(lt.MIN)?[3,3]:[4,this.zh.Jo()]);case 1:return i=n.sent(),e.h(i)>=0?[4,this.sd(e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.sd=function(t){var e=this;T(!t.isEqual(lt.MIN),"Can't raise event for unknown SnapshotVersion");var i=this.Vl.me(t);return G(i.Si,(function(i,n){if(n.resumeToken.bn()>0){var r=e.Fl[i];r&&(e.Fl[i]=r.vi(n.resumeToken,t))}})),i.Ri.forEach((function(t){var i=e.Fl[t];if(i){e.Fl[t]=i.vi(Te.ai,i.li),e.ed(t);var n=new Oe(i.target,t,1,i.sequenceNumber);e.td(n)}})),this.rd.Yo(i)},t.prototype.ud=function(t){var e=this;T(!!t.cause,"Handling target error without a cause");var i=t.cause,n=Promise.resolve();return t.targetIds.forEach((function(t){n=n.then((function(){return c.__awaiter(e,void 0,void 0,(function(){return c.__generator(this,(function(e){return F(this.Fl,t)?(delete this.Fl[t],this.Vl.removeTarget(t),[2,this.rd.od(t,i)]):[2]}))}))}))})),n},t.prototype.Xl=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e;return c.__generator(this,(function(i){switch(i.label){case 0:return this.hd()?(t=this.Ol.length>0?this.Ol[this.Ol.length-1].batchId:-1,[4,this.zh.sh(t)]):[3,4];case 1:return null!==(e=i.sent())?[3,2]:(0===this.Ol.length&&this.Wl.bf(),[3,4]);case 2:return this.ad(e),[4,this.Xl()];case 3:i.sent(),i.label=4;case 4:return this.fd()&&this.ld(),[2]}}))}))},t.prototype.hd=function(){return this.jl()&&this.Ol.length<10},t.prototype.dd=function(){return this.Ol.length},t.prototype.ad=function(t){T(this.hd(),"addToWritePipeline called when pipeline is full"),this.Ol.push(t),this.Wl.mf()&&this.Wl.Ff&&this.Wl.Vf(t.mutations)},t.prototype.fd=function(){return this.jl()&&!this.Wl.wf()&&this.Ol.length>0},t.prototype.ld=function(){T(this.fd(),"startWriteStream() called when shouldStartWriteStream() is false."),this.Wl.start()},t.prototype.zl=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return this.Wl.jf(),[2]}))}))},t.prototype.Hl=function(){var t=this;return this.zh.Us(this.Wl.lastStreamToken).then((function(){for(var e=0,i=t.Ol;e<i.length;e++){var n=i[e];t.Wl.Vf(n.mutations)}})).catch(Qn)},t.prototype.Uf=function(t,e){var i=this;T(this.Ol.length>0,"Got result for empty write pipeline");var n=this.Ol.shift(),r=Nn.from(n,t,e,this.Wl.lastStreamToken);return this.rd.vd(r).then((function(){return i.Xl()}))},t.prototype.Kl=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e=this;return c.__generator(this,(function(i){return void 0===t&&T(!this.fd(),"Write stream was stopped gracefully while still needed."),t&&this.Ol.length>0?[2,(this.Wl.Ff?this.wd(t):this.md(t)).then((function(){e.fd()&&e.ld()}))]:[2]}))}))},t.prototype.md=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){return Ce(t.code)?(w("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.Wl.lastStreamToken),this.Wl.lastStreamToken=Te.ai,[2,this.zh.Us(Te.ai).catch(Qn)]):[2]}))}))},t.prototype.wd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i=this;return c.__generator(this,(function(n){return Ce(r=t.code)&&r!==R.ABORTED?(e=this.Ol.shift(),this.Wl.gf(),[2,this.rd.pd(e.batchId,t).then((function(){return i.Xl()}))]):[2];var r}))}))},t.prototype.gd=function(){return new ki(this.ml)},t.prototype.Ll=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.bd=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.jl()?(w("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.yd=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.$l()];case 3:e.sent(),this.ql.set("Unknown"),e.label=4;case 4:return[2]}}))}))},t}();function Ci(t,e){return T(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function Ri(t,e,i){var n="firestore_mutations_"+t+"_"+i;return e.l()&&(n+="_"+e.uid),n}function Pi(t,e){return"firestore_targets_"+t+"_"+e}var xi=function(){function t(t,e,i,n){this.user=t,this.batchId=e,this.state=i,this.error=n,T(void 0!==n==("rejected"===i),"MutationMetadata must contain an error iff state is 'rejected'")}return t._d=function(e,i,n){var r=JSON.parse(n),u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new P(r.error.code,r.error.message)),u?new t(e,i,r.state,s):(I("SharedClientState","Failed to parse mutation state for ID '"+i+"': "+n),null)},t.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Li=function(){function t(t,e,i){this.targetId=t,this.state=e,this.error=i,T(void 0!==i==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t._d=function(e,i){var n=JSON.parse(i),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),u=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(u=new P(n.error.code,n.error.message)),r?new t(e,n.state,u):(I("SharedClientState","Failed to parse target state for ID '"+e+"': "+i),null)},t.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t._d=function(e,i){for(var n=JSON.parse(i),r="object"==typeof n&&n.activeTargetIds instanceof Array,u=He(),s=0;r&&s<n.activeTargetIds.length;++s)r=ce(n.activeTargetIds[s]),u=u.add(n.activeTargetIds[s]);return r?new t(e,u):(I("SharedClientState","Failed to parse client data for instance '"+e+"': "+i),null)},t}(),Ui=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t._d=function(e){var i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new t(i.clientId,i.onlineState):(I("SharedClientState","Failed to parse online state: "+e),null)},t}(),ji=function(){function t(){this.activeTargetIds=He()}return t.prototype.Td=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ed=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Id=function(){var t={activeTargetIds:this.activeTargetIds.tt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Fi=function(){function t(e,i,n,r,u){if(this.Lc=e,this.platform=i,this.persistenceKey=n,this.Dd=r,this.rd=null,this.El=null,this.jr=null,this.Sd={},this.Rd=this.Cd.bind(this),this.Co=!1,this.Ad=[],!t.cs(this.platform))throw new P(R.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=u,this.Pd=Ci(this.persistenceKey,this.Dd),this.kd=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Sd[this.Dd]=new ji,this.Nd=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Od=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Fd=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Vd=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Rd)}return t.cs=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return c.__awaiter(this,void 0,void 0,(function(){var t,e,i,n,r,s,o,h,f,a,l,d=this;return c.__generator(this,(function(u){switch(u.label){case 0:return T(!this.Co,"WebStorageSharedClientState already started"),T(null!==this.rd,"syncEngine property must be set before calling start()"),T(null!==this.El,"onlineStateHandler property must be set before calling start()"),[4,this.rd.gh()];case 1:for(t=u.sent(),e=0,i=t;e<i.length;e++)(n=i[e])!==this.Dd&&(r=this.getItem(Ci(this.persistenceKey,n)))&&(s=Mi._d(n,r))&&(this.Sd[s.clientId]=s);for(this.Ud(),(o=this.storage.getItem(this.Vd))&&(h=this.xd(o))&&this.jd(h),f=0,a=this.Ad;f<a.length;f++)l=a[f],this.Cd(l);return this.Ad=[],this.platform.window.addEventListener("unload",(function(){return d.shutdown()})),this.Co=!0,[2]}}))}))},t.prototype.Br=function(t){this.setItem(this.kd,JSON.stringify(t))},t.prototype.Ld=function(){var t=He();return B(this.Sd,(function(e,i){t=t.Mt(i.activeTargetIds)})),t},t.prototype.qd=function(t){for(var e in this.Sd)if(this.Sd.hasOwnProperty(e)&&this.Sd[e].activeTargetIds.has(t))return!0;return!1},t.prototype.Bd=function(t){this.Md(t,"pending")},t.prototype.Qd=function(t,e,i){this.Md(t,e,i),this.Gd(t)},t.prototype.Wd=function(t){var e="not-current";if(this.qd(t)){var i=this.storage.getItem(Pi(this.persistenceKey,t));if(i){var n=Li._d(t,i);n&&(e=n.state)}}return this.zd.Td(t),this.Ud(),e},t.prototype.Kd=function(t){this.zd.Ed(t),this.Ud()},t.prototype.Hd=function(t){return this.zd.activeTargetIds.has(t)},t.prototype.Jd=function(t){this.removeItem(Pi(this.persistenceKey,t))},t.prototype.Yd=function(t,e,i){this.Xd(t,e,i)},t.prototype.Lo=function(t,e,i){var n=this;e.forEach((function(t){n.Gd(t)})),this.currentUser=t,i.forEach((function(t){n.Bd(t)}))},t.prototype.$d=function(t){this.Zd(t)},t.prototype.shutdown=function(){this.Co&&(this.platform.window.removeEventListener("storage",this.Rd),this.removeItem(this.Pd),this.Co=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return w("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){w("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){w("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Cd=function(t){var e=this;if(t.storageArea===this.storage){if(w("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Pd)return void I("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Lc.$r((function(){return c.__awaiter(e,void 0,void 0,(function(){var e,i,n,r,s,o;return c.__generator(this,(function(u){if(!this.Co)return this.Ad.push(t),[2];if(null===t.key)return[2];if(this.Nd.test(t.key)){if(null==t.newValue)return i=this.tv(t.key),[2,this.nv(i,null)];if(e=this.iv(t.key,t.newValue))return[2,this.nv(e.clientId,e)]}else if(this.Od.test(t.key)){if(null!==t.newValue&&(n=this.ev(t.key,t.newValue)))return[2,this.rv(n)]}else if(this.Fd.test(t.key)){if(null!==t.newValue&&(r=this.uv(t.key,t.newValue)))return[2,this.sv(r)]}else if(t.key===this.Vd){if(null!==t.newValue&&(s=this.xd(t.newValue)))return[2,this.jd(s)]}else t.key===this.kd&&(T(!!this.jr,"Missing sequenceNumberHandler"),(o=function(t){var e=mn.Mr;if(null!=t)try{var i=JSON.parse(t);T("number"==typeof i,"Found non-numeric sequence number"),e=i}catch(t){I("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==mn.Mr&&this.jr(o));return[2]}))}))}))}},Object.defineProperty(t.prototype,"zd",{get:function(){return this.Sd[this.Dd]},enumerable:!0,configurable:!0}),t.prototype.Ud=function(){this.setItem(this.Pd,this.zd.Id())},t.prototype.Md=function(t,e,i){var n=new xi(this.currentUser,t,e,i),r=Ri(this.persistenceKey,this.currentUser,t);this.setItem(r,n.Id())},t.prototype.Gd=function(t){var e=Ri(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Zd=function(t){var e={clientId:this.Dd,onlineState:t};this.storage.setItem(this.Vd,JSON.stringify(e))},t.prototype.Xd=function(t,e,i){var n=Pi(this.persistenceKey,t),r=new Li(t,e,i);this.setItem(n,r.Id())},t.prototype.tv=function(t){var e=this.Nd.exec(t);return e?e[1]:null},t.prototype.iv=function(t,e){var i=this.tv(t);return T(null!==i,"Cannot parse client state key '"+t+"'"),Mi._d(i,e)},t.prototype.ev=function(t,e){var i=this.Od.exec(t);T(null!==i,"Cannot parse mutation batch key '"+t+"'");var n=Number(i[1]),r=void 0!==i[2]?i[2]:null;return xi._d(new C(r),n,e)},t.prototype.uv=function(t,e){var i=this.Fd.exec(t);T(null!==i,"Cannot parse query target key '"+t+"'");var n=Number(i[1]);return Li._d(n,e)},t.prototype.xd=function(t){return Ui._d(t)},t.prototype.rv=function(t){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(w("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.rd.ov(t.batchId,t.state,t.error)]}))}))},t.prototype.sv=function(t){return this.rd.hv(t.targetId,t.state,t.error)},t.prototype.nv=function(t,e){var i=this,n=this.Ld();e?this.Sd[t]=e:delete this.Sd[t];var s=this.Ld(),r=[],o=[];return s.forEach((function(t){return c.__awaiter(i,void 0,void 0,(function(){return c.__generator(this,(function(e){return n.has(t)||r.push(t),[2]}))}))})),n.forEach((function(t){return c.__awaiter(i,void 0,void 0,(function(){return c.__generator(this,(function(e){return s.has(t)||o.push(t),[2]}))}))})),this.rd.cv(r,o)},t.prototype.jd=function(t){this.Sd[t.clientId]&&this.El(t.onlineState)},t}(),Vi=function(){function t(){this.av=new ji,this.fv={},this.rd=null,this.El=null,this.jr=null}return t.prototype.Bd=function(t){},t.prototype.Qd=function(t,e,i){},t.prototype.Wd=function(t){return this.av.Td(t),this.fv[t]||"not-current"},t.prototype.Yd=function(t,e,i){this.fv[t]=e},t.prototype.Kd=function(t){this.av.Ed(t)},t.prototype.Hd=function(t){return this.av.activeTargetIds.has(t)},t.prototype.Jd=function(t){delete this.fv[t]},t.prototype.Ld=function(){return this.av.activeTargetIds},t.prototype.qd=function(t){return this.av.activeTargetIds.has(t)},t.prototype.start=function(){return this.av=new ji,Promise.resolve()},t.prototype.Lo=function(t,e,i){},t.prototype.$d=function(t){},t.prototype.shutdown=function(){},t.prototype.Br=function(t){},t}(),qi=function(t){this.key=t},Gi=function(t){this.key=t},Bi=function(){function t(t,e){this.query=t,this.lv=e,this.dv=null,this.Ni=!1,this.vv=Ge(),this.Ii=Ge(),this.wv=new ze(t.Xn.bind(t))}return Object.defineProperty(t.prototype,"mv",{get:function(){return this.lv},enumerable:!0,configurable:!0}),t.prototype.pv=function(t,e){var i=this,n=e?e.gv:new We,r=e?e.wv:this.wv,u=e?e.Ii:this.Ii,s=r,o=!1,c=this.query.ii()&&r.size===this.query.limit?r.last():null,h=this.query.ei()&&r.size===this.query.limit?r.first():null;if(t.pt((function(t,e){var a=r.get(t),f=e instanceof ie?e:null;f&&(T(t.isEqual(f.key),"Mismatching keys found in document changes: "+t+" != "+f.key),f=i.query.matches(f)?f:null);var l=!!a&&i.Ii.has(a.key),d=!!f&&(f.en||i.Ii.has(f.key)&&f.hasCommittedMutations),v=!1;a&&f?a.data().isEqual(f.data())?l!==d&&(n.track({type:3,doc:f}),v=!0):i.bv(a,f)||(n.track({type:2,doc:f}),v=!0,(c&&i.query.Xn(f,c)>0||h&&i.query.Xn(f,h)<0)&&(o=!0)):!a&&f?(n.track({type:0,doc:f}),v=!0):a&&!f&&(n.track({type:1,doc:a}),v=!0,(c||h)&&(o=!0)),v&&(f?(s=s.add(f),u=d?u.add(t):u.delete(t)):(s=s.delete(t),u=u.delete(t)))})),this.query.ii()||this.query.ei())for(;s.size>this.query.limit;){var a=this.query.ii()?s.last():s.first();s=s.delete(a.key),u=u.delete(a.key),n.track({type:1,doc:a})}return T(!o||!e,"View was refilled using docs that themselves needed refilling."),{wv:s,gv:n,Pa:o,Ii:u}},t.prototype.bv=function(t,e){return t.en&&e.hasCommittedMutations&&!e.en},t.prototype.es=function(t,e,i){var n=this;T(!t.Pa,"Cannot apply changes that need a refill");var r=this.wv;this.wv=t.wv,this.Ii=t.Ii;var u=t.gv.yi();u.sort((function(t,e){return function(t,e){var i=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _("Unknown ChangeType: "+t)}};return i(t)-i(e)}(t.type,e.type)||n.query.Xn(t.doc,e.doc)})),this.yv(i);var s=e?this._v():[],o=0===this.vv.size&&this.Ni?1:0,c=o!==this.dv;return this.dv=o,0!==u.length||c?{snapshot:new Ke(this.query,t.wv,r,u,t.Ii,0===o,c,!1),Iv:s}:{Iv:s}},t.prototype.Tv=function(t){return this.Ni&&"Offline"===t?(this.Ni=!1,this.es({wv:this.wv,gv:new We,Ii:this.Ii,Pa:!1},!1)):{Iv:[]}},t.prototype.Ev=function(t){return!this.lv.has(t)&&!!this.wv.has(t)&&!this.wv.get(t).en},t.prototype.yv=function(t){var e=this;t&&(t.Oi.forEach((function(t){return e.lv=e.lv.add(t)})),t.Fi.forEach((function(t){return T(e.lv.has(t),"Modified document "+t+" not found in view.")})),t.Vi.forEach((function(t){return e.lv=e.lv.delete(t)})),this.Ni=t.Ni)},t.prototype._v=function(){var t=this;if(!this.Ni)return[];var e=this.vv;this.vv=Ge(),this.wv.forEach((function(e){t.Ev(e.key)&&(t.vv=t.vv.add(e.key))}));var i=[];return e.forEach((function(e){t.vv.has(e)||i.push(new Gi(e))})),this.vv.forEach((function(t){e.has(t)||i.push(new qi(t))})),i},t.prototype.Dv=function(t){this.lv=t.mh,this.vv=Ge();var e=this.pv(t.documents);return this.es(e,!0)},t.prototype.Sv=function(){return Ke.Di(this.query,this.wv,this.Ii,0===this.dv)},t}(),Hi=function(){function t(t,e,i,n){this.Qr=t,this.Rv=e,this.updateFunction=i,this.Kr=n,this.Cv=5,this.vf=new ni(this.Qr,"retry_transaction")}return t.prototype.run=function(){this.Av()},t.prototype.Av=function(){var t=this;this.vf.hf((function(){return c.__awaiter(t,void 0,void 0,(function(){var t,e,i=this;return c.__generator(this,(function(n){return t=this.Rv.gd(),(e=this.Pv(t))&&e.then((function(e){i.Qr.$r((function(){return t.commit().then((function(){i.Kr.resolve(e)})).catch((function(t){i.kv(t)}))}))})).catch((function(t){i.kv(t)})),[2]}))}))}))},t.prototype.Pv=function(t){try{var e=this.updateFunction(t);return!ae(e)&&e.catch&&e.then?e:(this.Kr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Kr.reject(t),null}},t.prototype.kv=function(t){var e=this;this.Cv>0&&this.Nv(t)?(this.Cv-=1,this.Qr.$r((function(){return e.Av(),Promise.resolve()}))):this.Kr.reject(t)},t.prototype.Nv=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ce(e)}return!1},t}(),zi=function(t,e,i){this.query=t,this.targetId=e,this.view=i},Wi=function(t){this.key=t,this.Ov=!1},Ki=function(){function t(t,e,i,n){this.zh=t,this.Rv=e,this.Fv=i,this.currentUser=n,this.Vv=null,this.Uv=new On((function(t){return t.canonicalId()})),this.xv={},this.jv=new wt(gt.G),this.Lv={},this.qv=new Sn,this.Bv={},this.Mv=new Map,this.Qv=Kn.uo(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"Gv",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){T(null!==t,"SyncEngine listener cannot be null"),T(null===this.Vv,"SyncEngine already has a subscriber."),this.Vv=t},t.prototype.listen=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s;return c.__generator(this,(function(u){switch(u.label){case 0:return this.Wv("listen()"),(n=this.Uv.get(t))?(e=n.targetId,this.Fv.Wd(e),i=n.view.Sv(),[3,4]):[3,1];case 1:return[4,this.zh.hh(t.Yn())];case 2:return r=u.sent(),s=this.Fv.Wd(r.targetId),e=r.targetId,[4,this.zv(t,e,"current"===s)];case 3:i=u.sent(),this.isPrimary&&this.Rv.listen(r),u.label=4;case 4:return this.Vv.kf([i]),[2,e]}}))}))},t.prototype.zv=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n,r,s,o,h,f;return c.__generator(this,(function(u){switch(u.label){case 0:return[4,this.zh.vh(t,!0)];case 1:return n=u.sent(),r=new Bi(t,n.mh),s=r.pv(n.documents),o=Je.ki(e,i&&"Offline"!==this.onlineState),T(0===(h=r.es(s,!0===this.isPrimary,o)).Iv.length,"View returned limbo docs before target ack from the server."),T(!!h.snapshot,"applyChanges for new view should always return a snapshot"),f=new zi(t,e,r),this.Uv.set(t,f),this.xv[e]||(this.xv[e]=[]),this.xv[e].push(t),[2,h.snapshot]}}))}))},t.prototype.Kv=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:return[4,this.zh.vh(t.query,!0)];case 1:return e=n.sent(),i=t.view.Dv(e),this.isPrimary&&this.Hv(t.targetId,i.Iv),[2,i]}}))}))},t.prototype.nd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n=this;return c.__generator(this,(function(r){switch(r.label){case 0:return this.Wv("unlisten()"),T(!!(e=this.Uv.get(t)),"Trying to unlisten on query not found:"+t),(i=this.xv[e.targetId]).length>1?(this.xv[e.targetId]=i.filter((function(e){return!e.isEqual(t)})),this.Uv.delete(t),[2]):this.isPrimary?(this.Fv.Kd(e.targetId),this.Fv.qd(e.targetId)?[3,2]:[4,this.zh.dh(e.targetId,!1).then((function(){n.Fv.Jd(e.targetId),n.Rv.nd(e.targetId),n.Jv(e.targetId)})).catch(Qn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.Jv(e.targetId),[4,this.zh.dh(e.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:return this.Wv("write()"),[4,this.zh.Qo(t)];case 1:return i=n.sent(),this.Fv.Bd(i.batchId),this.Yv(i.batchId,e),[4,this.Xv(i.Ku)];case 2:return n.sent(),[4,this.Rv.Xl()];case 3:return n.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,i){new Hi(t,this.Rv,e,i).run()},t.prototype.Yo=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i=this;return c.__generator(this,(function(n){switch(n.label){case 0:this.Wv("applyRemoteEvent()"),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.zh.Yo(t)];case 2:return e=n.sent(),B(t.Si,(function(t,e){var n=i.Lv[Number(t)];n&&(T(e.Oi.size+e.Fi.size+e.Vi.size<=1,"Limbo resolution for single document contains multiple changes."),e.Oi.size>0?n.Ov=!0:e.Fi.size>0?T(n.Ov,"Received change for limbo target document without add."):e.Vi.size>0&&(T(n.Ov,"Received remove for limbo target document without add."),n.Ov=!1))})),[4,this.Xv(e,t)];case 3:return n.sent(),[3,6];case 4:return[4,Qn(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Tv=function(t,e){if(this.isPrimary&&0===e||!this.isPrimary&&1===e){this.Wv("applyOnlineStateChange()");var i=[];this.Uv.forEach((function(e,n){var r=n.view.Tv(t);T(0===r.Iv.length,"OnlineState should not affect limbo documents."),r.snapshot&&i.push(r.snapshot)})),this.Vv.$v(t),this.Vv.kf(i),this.onlineState=t,this.isPrimary&&this.Fv.$d(t)}},t.prototype.od=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i,n,r,s,o,h=this;return c.__generator(this,(function(u){switch(u.label){case 0:return this.Wv("rejectListens()"),this.Fv.Yd(t,"rejected",e),i=this.Lv[t],(n=i&&i.key)?(this.jv=this.jv.remove(n),delete this.Lv[t],r=(r=new wt(gt.G)).lt(n,new oe(n,lt.q())),s=Ge().add(n),o=new Ye(lt.MIN,{},new _t(N),r,s),[2,this.Yo(o)]):[3,1];case 1:return[4,this.zh.dh(t,!1).then((function(){return h.Jv(t,e)})).catch(Qn)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},t.prototype.ov=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n;return c.__generator(this,(function(r){switch(r.label){case 0:return this.Wv("applyBatchState()"),[4,this.zh.Go(t)];case 1:return null===(n=r.sent())?(w("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Rv.Xl()];case 2:return r.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.Zv(t,i||null),this.zh.bh(t)):_("Unknown batchState: "+e),r.label=4;case 4:return[4,this.Xv(n)];case 5:return r.sent(),[2]}}))}))},t.prototype.vd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:this.Wv("applySuccessfulWrite()"),e=t.batch.batchId,this.Zv(e,null),this.tw(e),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.zh.Os(t)];case 2:return i=n.sent(),this.Fv.Qd(e,"acknowledged"),[4,this.Xv(i)];case 3:return n.sent(),[3,6];case 4:return[4,Qn(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.pd=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i;return c.__generator(this,(function(n){switch(n.label){case 0:this.Wv("rejectFailedWrite()"),this.Zv(t,e),this.tw(t),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.zh.Ho(t)];case 2:return i=n.sent(),this.Fv.Qd(t,"rejected",e),[4,this.Xv(i)];case 3:return n.sent(),[3,6];case 4:return[4,Qn(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.nw=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:return this.Rv.jl()||w("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.zh.Gs()];case 1:return-1===(e=n.sent())?(t.resolve(),[2]):((i=this.Mv.get(e)||[]).push(t),this.Mv.set(e,i),[2])}}))}))},t.prototype.tw=function(t){(this.Mv.get(t)||[]).forEach((function(t){t.resolve()})),this.Mv.delete(t)},t.prototype.iw=function(t){this.Mv.forEach((function(e){e.forEach((function(e){e.reject(new P(R.CANCELLED,t))}))})),this.Mv.clear()},t.prototype.Yv=function(t,e){var i=this.Bv[this.currentUser.v()];i||(i=new wt(N)),i=i.lt(t,e),this.Bv[this.currentUser.v()]=i},t.prototype.Zv=function(t,e){var i=this.Bv[this.currentUser.v()];if(i){var n=i.get(t);n&&(T(t===i.vt(),"Mutation callbacks processed out-of-order?"),e?n.reject(e):n.resolve(),i=i.remove(t)),this.Bv[this.currentUser.v()]=i}},t.prototype.Jv=function(t,e){var i=this;void 0===e&&(e=null),this.Fv.Kd(t),T(this.xv[t]&&0!==this.xv[t].length,"There are no queries mapped to target id "+t);for(var n=0,r=this.xv[t];n<r.length;n++){var u=r[n];this.Uv.delete(u),e&&this.Vv.ew(u,e)}if(delete this.xv[t],this.isPrimary){var s=this.qv.Nu(t);this.qv.Pu(t),s.forEach((function(t){i.qv.Ou(t)||i.rw(t)}))}},t.prototype.rw=function(t){var e=this.jv.get(t);null!==e&&(this.Rv.nd(e),this.jv=this.jv.remove(t),delete this.Lv[e])},t.prototype.Hv=function(t,e){for(var i=0,n=e;i<n.length;i++){var r=n[i];r instanceof qi?(this.qv.Du(r.key,t),this.uw(r)):r instanceof Gi?(w("SyncEngine","Document no longer in limbo: "+r.key),this.qv.Ru(r.key,t),this.qv.Ou(r.key)||this.rw(r.key)):_("Unknown limbo change: "+JSON.stringify(r))}},t.prototype.uw=function(t){var e=t.key;if(!this.jv.get(e)){w("SyncEngine","New document in limbo: "+e);var i=this.Qv.next(),n=fe.jn(e.path);this.Lv[i]=new Wi(e),this.Rv.listen(new Oe(n.Yn(),i,2,mn.Mr)),this.jv=this.jv.lt(e,i)}},t.prototype.sw=function(){return this.jv},t.prototype.Xv=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i,n,r,s=this;return c.__generator(this,(function(u){switch(u.label){case 0:return i=[],n=[],r=[],this.Uv.forEach((function(u,o){r.push(Promise.resolve().then((function(){var e=o.view.pv(t);return e.Pa?s.zh.vh(o.query,!1).then((function(t){var i=t.documents;return o.view.pv(i,e)})):e})).then((function(t){var r=e&&e.Si[o.targetId],u=o.view.es(t,!0===s.isPrimary,r);if(s.Hv(o.targetId,u.Iv),u.snapshot){s.isPrimary&&s.Fv.Yd(o.targetId,u.snapshot.fromCache?"not-current":"current"),i.push(u.snapshot);var c=Jn.Io(o.targetId,u.snapshot);n.push(c)}})))})),[4,Promise.all(r)];case 1:return u.sent(),this.Vv.kf(i),[4,this.zh.uh(n)];case 2:return u.sent(),[2]}}))}))},t.prototype.Wv=function(t){T(null!==this.Vv,"Trying to call "+t+" before calling subscribe().")},t.prototype.bd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i;return c.__generator(this,(function(n){switch(n.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.iw("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.zh.Lo(t)]):[3,3];case 1:return i=n.sent(),this.Fv.Lo(t,i.Bo,i.Mo),[4,this.Xv(i.qo)];case 2:n.sent(),n.label=3;case 3:return[4,this.Rv.bd()];case 4:return n.sent(),[2]}}))}))},t.prototype.yd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s,o,h=this;return c.__generator(this,(function(u){switch(u.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Rv.yd(!0)]);case 1:return u.sent(),s=this.Fv.Ld(),[4,this.ow(s.tt())];case 2:for(e=u.sent(),i=0,n=e;i<n.length;i++)r=n[i],this.Rv.listen(r);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],o=Promise.resolve(),G(this.xv,(function(t,e){h.Fv.Hd(t)?s.push(t):o=o.then((function(){return h.Jv(t),h.zh.dh(t,!0)})),h.Rv.nd(t)})),[4,o]);case 4:return u.sent(),[4,this.ow(s)];case 5:return u.sent(),this.hw(),[4,this.Rv.yd(!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))},t.prototype.hw=function(){var t=this;G(this.Lv,(function(e){t.Rv.nd(e)})),this.qv.ku(),this.Lv=[],this.jv=new wt(gt.G)},t.prototype.ow=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s,o,h,f,a,l,d,v,y;return c.__generator(this,(function(u){switch(u.label){case 0:e=[],i=[],n=0,r=t,u.label=1;case 1:return n<r.length?(s=r[n],o=void 0,(h=this.xv[s])&&0!==h.length?[4,this.zh.dh(s,!0)]:[3,8]):[3,14];case 2:return u.sent(),[4,this.zh.hh(h[0].Yn())];case 3:o=u.sent(),f=0,a=h,u.label=4;case 4:return f<a.length?(l=a[f],T(!!(d=this.Uv.get(l)),"No query view found for "+l),[4,this.Kv(d)]):[3,7];case 5:(v=u.sent()).snapshot&&i.push(v.snapshot),u.label=6;case 6:return f++,[3,4];case 7:return[3,12];case 8:return T(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.zh.Th(s)];case 9:return T(!!(y=u.sent()),"Target for id "+s+" not found"),[4,this.zh.hh(y)];case 10:return o=u.sent(),[4,this.zv(this.cw(y),s,!1)];case 11:u.sent(),u.label=12;case 12:e.push(o),u.label=13;case 13:return n++,[3,1];case 14:return this.Vv.kf(i),[2,e]}}))}))},t.prototype.cw=function(t){return new fe(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},t.prototype.gh=function(){return this.zh.gh()},t.prototype.hv=function(t,e,i){return c.__awaiter(this,void 0,void 0,(function(){var n,r;return c.__generator(this,(function(u){switch(u.label){case 0:if(this.isPrimary)return w("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.xv[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.zh.Eh()];case 2:return n=u.sent(),r=Ye.Pi(t,"current"===e),[4,this.Xv(n,r)];case 3:return u.sent(),[3,7];case 4:return[4,this.zh.dh(t,!0)];case 5:return u.sent(),this.Jv(t,i),[3,7];case 6:_("Unexpected target state: "+e),u.label=7;case 7:return[2]}}))}))},t.prototype.cv=function(t,e){return c.__awaiter(this,void 0,void 0,(function(){var i,n,r,s,o,h,f,a,l,d=this;return c.__generator(this,(function(v){switch(v.label){case 0:if(!this.isPrimary)return[2];i=0,n=t,v.label=1;case 1:return i<n.length?(l=n[i],T(!this.xv[l],"Trying to add an already active target"),[4,this.zh.Th(l)]):[3,6];case 2:return T(!!(r=v.sent()),"Query data for active target "+l+" not found"),[4,this.zh.hh(r)];case 3:return s=v.sent(),[4,this.zv(this.cw(r),s.targetId,!1)];case 4:v.sent(),this.Rv.listen(s),v.label=5;case 5:return i++,[3,1];case 6:o=function(t){return c.__generator(this,(function(e){switch(e.label){case 0:return h.xv[t]?[4,h.zh.dh(t,!1).then((function(){d.Rv.nd(t),d.Jv(t)})).catch(Qn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},h=this,f=0,a=e,v.label=7;case 7:return f<a.length?(l=a[f],[5,o(l)]):[3,10];case 8:v.sent(),v.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.zh.yh(!0),this.Rv.enableNetwork()},t.prototype.disableNetwork=function(){return this.zh.yh(!1),this.Rv.disableNetwork()},t.prototype.be=function(t){var e=this.Lv[t];if(e&&e.Ov)return Ge().add(e.key);var i=Ge(),n=this.xv[t];if(!n)return i;for(var r=0,u=n;r<u.length;r++){var s=u[r],o=this.Uv.get(s);T(!!o,"No query view found for "+s),i=i.Mt(o.view.mv)}return i},t}(),Yi=function(){this.aw=null,this.targetId=0,this.listeners=[]},Ji=function(){function t(t){this.rd=t,this.fw=new On((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.lw=new Set,this.rd.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,i=!1,n=this.fw.get(e);return n||(i=!0,n=new Yi,this.fw.set(e,n)),n.listeners.push(t),T(!t.Tv(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),n.aw&&t.dw(n.aw)&&this.vw(),i?this.rd.listen(e).then((function(t){return n.targetId=t,t})):Promise.resolve(n.targetId)},t.prototype.nd=function(t){return c.__awaiter(this,void 0,void 0,(function(){var e,i,n,r;return c.__generator(this,(function(u){return e=t.query,i=!1,(n=this.fw.get(e))&&(r=n.listeners.indexOf(t))>=0&&(n.listeners.splice(r,1),i=0===n.listeners.length),i?(this.fw.delete(e),[2,this.rd.nd(e)]):[2]}))}))},t.prototype.kf=function(t){for(var e=!1,i=0,n=t;i<n.length;i++){var r=n[i],u=r.query,s=this.fw.get(u);if(s){for(var o=0,c=s.listeners;o<c.length;o++)c[o].dw(r)&&(e=!0);s.aw=r}}e&&this.vw()},t.prototype.ew=function(t,e){var i=this.fw.get(t);if(i)for(var n=0,r=i.listeners;n<r.length;n++)r[n].onError(e);this.fw.delete(t)},t.prototype.$v=function(t){this.onlineState=t;var e=!1;this.fw.forEach((function(i,n){for(var r=0,u=n.listeners;r<u.length;r++)u[r].Tv(t)&&(e=!0)})),e&&this.vw()},t.prototype.ww=function(t){this.lw.add(t),t.next()},t.prototype.mw=function(t){this.lw.delete(t)},t.prototype.vw=function(){this.lw.forEach((function(t){t.next()}))},t}(),Xi=function(){function t(t,e,i){this.query=t,this.pw=e,this.gw=!1,this.bw=null,this.onlineState="Unknown",this.options=i||{}}return t.prototype.dw=function(t){if(T(t.docChanges.length>0||t.Ti,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],i=0,n=t.docChanges;i<n.length;i++){var r=n[i];3!==r.type&&e.push(r)}t=new Ke(t.query,t.docs,t._i,e,t.Ii,t.fromCache,t.Ti,!0)}var u=!1;return this.gw?this.yw(t)&&(this.pw.next(t),u=!0):this._w(t,this.onlineState)&&(this.Iw(t),u=!0),this.bw=t,u},t.prototype.onError=function(t){this.pw.error(t)},t.prototype.Tv=function(t){this.onlineState=t;var e=!1;return this.bw&&!this.gw&&this._w(this.bw,t)&&(this.Iw(this.bw),e=!0),e},t.prototype._w=function(t,e){if(T(!this.gw,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var i="Offline"!==e;return this.options.Tw&&i?(T(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.J()||"Offline"===e},t.prototype.yw=function(t){if(t.docChanges.length>0)return!0;var e=this.bw&&this.bw.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ti&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Iw=function(t){T(!this.gw,"Trying to raise initial events for second time"),t=Ke.Di(t.query,t.docs,t.Ii,t.fromCache),this.gw=!0,this.pw.next(t)},t}(),Qi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.Xc=function(){return nr.jh(this.cacheSizeBytes)},t}(),$i=function(){},Zi=function(){function t(t,e,i,n){this.platform=t,this.Ew=e,this.credentials=i,this.Qr=n,this.clientId=A.u()}return t.prototype.start=function(t){var e=this;this.Dw();var i=new gn,n=new gn,r=!1;return this.credentials.T((function(u){r?e.Qr.$r((function(){return e.bd(u)})):(r=!0,e.Sw(t,n,u).then((function(t){return e.Rw(u,t)})).then(i.resolve,i.reject))})),this.Qr.$r((function(){return i.promise})),n.promise},t.prototype.enableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue((function(){return t.rd.enableNetwork()}))},t.prototype.Sw=function(t,e,i){var n=this;return t instanceof Qi?this.Cw(i,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!n.Aw(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),n.Pw()})):(e.resolve(),this.Pw())},t.prototype.Aw=function(t){return t instanceof P?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Dw=function(){if(this.Qr.uu)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Cw=function(t,e){var i=this,n=zr.Ia(this.Ew),s=new hn(this.Ew.s,{Te:!0});return Promise.resolve().then((function(){return c.__awaiter(i,void 0,void 0,(function(){var i,r;return c.__generator(this,(function(u){switch(u.label){case 0:if(e.synchronizeTabs&&!Fi.cs(this.platform))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return i=e.Xc(),this.Fv=e.synchronizeTabs?new Fi(this.Qr,this.platform,n,this.clientId,t):new Vi,[4,zr.Yc({allowTabSynchronization:e.synchronizeTabs,persistenceKey:n,clientId:this.clientId,platform:this.platform,Lc:this.Qr,serializer:s,Xc:i,qc:this.Fv})];case 1:return r=u.sent(),this.persistence=r,[2,r.As.Wh]}}))}))}))},t.prototype.Pw=function(){return this.persistence=Zr.Wa(this.clientId),this.Fv=new Vi,Promise.resolve(null)},t.prototype.Rw=function(t,e){var i=this;return w("FirestoreClient","Initializing. user=",t.uid),this.platform.kw(this.Ew).then((function(n){return c.__awaiter(i,void 0,void 0,(function(){var i,s,r,o,h,a,f=this;return c.__generator(this,(function(l){switch(l.label){case 0:return i=new Jr,this.zh=new Xn(this.persistence,i,t),[4,this.zh.start()];case 1:return l.sent(),e&&(this.Nw=new rr(e,this.Qr,this.zh)),s=this.platform.Ow(),r=this.platform.Fw(this.Ew.s),o=new si(this.Qr,n,this.credentials,r),h=function(t){return f.rd.Tv(t,0)},a=function(t){return f.rd.Tv(t,1)},this.Rv=new Di(this.zh,o,this.Qr,h,s),this.rd=new Ki(this.zh,this.Rv,this.Fv,t),this.Fv.El=a,this.Rv.rd=this.rd,this.Fv.rd=this.rd,this.Vw=new Ji(this.rd),[4,this.Fv.start()];case 2:return l.sent(),[4,this.Rv.start()];case 3:return l.sent(),[4,this.persistence.ra((function(t){return c.__awaiter(f,void 0,void 0,(function(){return c.__generator(this,(function(e){switch(e.label){case 0:return[4,this.rd.yd(t)];case 1:return e.sent(),this.Nw&&(t&&!this.Nw.Co?this.Nw.start():t||this.Nw.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.ua((function(){return c.__awaiter(f,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},t.prototype.bd=function(t){return this.Qr.du(),w("FirestoreClient","Credential Changed. Current user: "+t.uid),this.rd.bd(t)},t.prototype.disableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue((function(){return t.rd.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Qr.au((function(){return c.__awaiter(t,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.Nw&&this.Nw.stop(),[4,this.Rv.shutdown()];case 1:return t.sent(),[4,this.Fv.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.D(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Dw();var e=new gn;return this.Qr.$r((function(){return t.rd.nw(e)})),e.promise},t.prototype.listen=function(t,e,i){var n=this;this.Dw();var r=new Xi(t,e,i);return this.Qr.$r((function(){return n.Vw.listen(r)})),r},t.prototype.nd=function(t){var e=this;this.Uw||this.Qr.$r((function(){return e.Vw.nd(t)}))},t.prototype.xw=function(t){var e=this;return this.Dw(),this.Qr.enqueue((function(){return e.zh.oh(t)})).then((function(t){if(t instanceof ie)return t;if(t instanceof oe)return null;throw new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.jw=function(t){var e=this;return this.Dw(),this.Qr.enqueue((function(){return c.__awaiter(e,void 0,void 0,(function(){var e,i,n;return c.__generator(this,(function(r){switch(r.label){case 0:return[4,this.zh.vh(t,!0)];case 1:return e=r.sent(),i=new Bi(t,e.mh),n=i.pv(e.documents),[2,i.es(n,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.Dw();var i=new gn;return this.Qr.$r((function(){return e.rd.write(t,i)})),i.promise},t.prototype.s=function(){return this.Ew.s},t.prototype.ww=function(t){var e=this;this.Dw(),this.Qr.$r((function(){return e.Vw.ww(t),Promise.resolve()}))},t.prototype.mw=function(t){this.Uw||this.Vw.mw(t)},Object.defineProperty(t.prototype,"Uw",{get:function(){return this.Qr.uu},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Dw();var i=new gn;return this.Qr.$r((function(){return e.rd.runTransaction(e.Qr,t,i),Promise.resolve()})),i.promise},t}(),to=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.Lw(this.observer.next,t)},t.prototype.error=function(t){this.Lw(this.observer.error,t)},t.prototype.qw=function(){this.muted=!0},t.prototype.Lw=function(t,e){var i=this;this.muted||setTimeout((function(){i.muted||t(e)}),0)},t}();function eo(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var i=t,n=0,r=["next","error","complete"];n<r.length;n++){var u=r[n];if(u in i&&"function"==typeof i[u])return!0}return!1}(t)}var no=nr.Bh,ro=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else $("settings","non-empty string","host",t.host),this.host=t.host,rt("settings","boolean","ssl",t.ssl),this.ssl=V(t.ssl,!0);if(st("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),rt("settings","object","credentials",t.credentials),this.credentials=t.credentials,rt("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?I("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&I("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=V(t.timestampsInSnapshots,!0),rt("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=nr.Qh;else{if(t.cacheSizeBytes!==no&&t.cacheSizeBytes<nr.Mh)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+nr.Mh);this.cacheSizeBytes=t.cacheSizeBytes}rt("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),io=function(){function t(e,i){var n=this;if(this.Bw=null,this.Mw=new bn,this.INTERNAL={delete:function(){return c.__awaiter(n,void 0,void 0,(function(){return c.__generator(this,(function(t){switch(t.label){case 0:return this.Qw(),[4,this.Gw.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.Bw=s,this.Ww=t.zw(s),this.Kw=s.name,this.Hw=new L(i)}else{var r=e;if(!r.projectId)throw new P(R.INVALID_ARGUMENT,"Must provide projectId");this.Ww=new D(r.projectId,r.database),this.Kw="[DEFAULT]",this.Hw=new q}this.Jw=new ro({}),this.Yw=this.Xw(this.Ww)}return t.prototype.settings=function(t){if(W("Firestore.settings",arguments,1),X("Firestore.settings","object",1,t),F(t,"persistence"))throw new P(R.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new ro(t);if(this.Gw&&!this.Jw.isEqual(e))throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.Jw=e,void 0!==e.credentials&&(this.Hw=j(e.credentials))},t.prototype.enableNetwork=function(){return this.Qw(),this.Gw.enableNetwork()},t.prototype.disableNetwork=function(){return this.Qw(),this.Gw.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.Gw)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&I("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=V(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.$w(new Qi(this.Jw.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=zr.Ia(this.Zw()),i=new gn;return this.Mw.su((function(){return c.__awaiter(t,void 0,void 0,(function(){var t;return c.__generator(this,(function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),void 0!==this.Gw&&!this.Gw.Uw)throw new P(R.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,zr.clearPersistence(e)];case 1:return n.sent(),i.resolve(),[3,3];case 2:return t=n.sent(),i.reject(t),[3,3];case 3:return[2]}}))}))})),i.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"tm",{get:function(){return this.Qw(),this.Gw.Uw},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Qw(),this.Gw.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Qw(),eo(t))return this.nm(t);X("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.nm(e)},t.prototype.nm=function(t){var e=this,i=new to({next:function(){t.next&&t.next()},error:function(t){throw _("Uncaught Error in onSnapshotsInSync")}});return this.Gw.ww(i),function(){i.qw(),e.Gw.mw(i)}},t.prototype.Qw=function(){return this.Gw||this.$w(new $i),this.Gw},t.prototype.Zw=function(){return new O(this.Ww,this.Kw,this.Jw.host,this.Jw.ssl,this.Jw.forceLongPolling)},t.prototype.$w=function(t){T(!!this.Jw.host,"FirestoreSettings.host is not set"),T(!this.Gw,"configureClient() called multiple times");var e=this.Zw();return this.Gw=new Zi(fn.t(),e,this.Hw,this.Mw),this.Gw.start(t)},t.prototype.Xw=function(t){return new Ei((function(e){if(e instanceof ao){var i=t,n=e.firestore.Ww;if(!n.isEqual(i))throw new P(R.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+i.projectId+"/"+i.database);return new Ii(t,e.im)}return e}))},t.zw=function(t){var e=t.options;if(!F(e,"projectId"))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var i=e.projectId;if(!i||"string"!=typeof i)throw new P(R.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new D(i)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Bw)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bw},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return W("Firestore.collection",arguments,1),X("Firestore.collection","non-empty string",1,t),this.Qw(),new po(vt.it(t),this)},t.prototype.doc=function(t){return W("Firestore.doc",arguments,1),X("Firestore.doc","non-empty string",1,t),this.Qw(),ao.em(vt.it(t),this)},t.prototype.collectionGroup=function(t){if(W("Firestore.collectionGroup",arguments,1),X("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Qw(),new fo(new fe(vt.et,t),this)},t.prototype.runTransaction=function(t){var e=this;return W("Firestore.runTransaction",arguments,1),X("Firestore.runTransaction","function",1,t),this.Qw().transaction((function(i){return t(new oo(e,i))}))},t.prototype.batch=function(){return this.Qw(),new so(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(y()){case 0:return"debug";case 1:return"error";case 2:return"silent";default:return _("Unknown log level: "+y())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(W("Firestore.setLogLevel",arguments,1),X("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":m(0);break;case"error":m(1);break;case"silent":m(2);break;default:throw new P(R.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.rm=function(){return this.Jw.timestampsInSnapshots},t}(),oo=function(){function t(t,e){this.um=t,this.sm=e}return t.prototype.get=function(t){var e=this;W("Transaction.get",arguments,1);var i=go("Transaction.get",t,this.um);return this.sm.lookup([i.im]).then((function(t){if(!t||1!==t.length)return _("Mismatch in docs returned from document lookup.");var n=t[0];if(n instanceof oe)return new co(e.um,i.im,null,!1,!1,i.om);if(n instanceof ie)return new co(e.um,i.im,n,!1,!1,i.om);throw _("BatchGetDocumentsRequest returned unexpected document type: "+n.constructor.name)}))},t.prototype.set=function(t,e,i){Y("Transaction.set",arguments,2,3);var n=go("Transaction.set",t,this.um);i=vo("Transaction.set",i);var r=bo(n.om,e,"Transaction.set"),u=r[0],s=r[1],o=i.merge||i.mergeFields?this.um.Yw.sl(s,u,i.mergeFields):this.um.Yw.rl(s,u);return this.sm.set(n.im,o),this},t.prototype.update=function(t,e,i){for(var n,r,u=[],s=3;s<arguments.length;s++)u[s-3]=arguments[s];return"string"==typeof e||e instanceof ai?(K("Transaction.update",arguments,3),n=go("Transaction.update",t,this.um),r=this.um.Yw.cl("Transaction.update",e,i,u)):(W("Transaction.update",arguments,2),n=go("Transaction.update",t,this.um),r=this.um.Yw.ol("Transaction.update",e)),this.sm.update(n.im,r),this},t.prototype.delete=function(t){W("Transaction.delete",arguments,1);var e=go("Transaction.delete",t,this.um);return this.sm.delete(e.im),this},t}(),so=function(){function t(t){this.um=t,this.hm=[],this.cm=!1}return t.prototype.set=function(t,e,i){Y("WriteBatch.set",arguments,2,3),this.am();var n=go("WriteBatch.set",t,this.um);i=vo("WriteBatch.set",i);var r=bo(n.om,e,"WriteBatch.set"),u=r[0],s=r[1],o=i.merge||i.mergeFields?this.um.Yw.sl(s,u,i.mergeFields):this.um.Yw.rl(s,u);return this.hm=this.hm.concat(o.Hf(n.im,Pt.NONE)),this},t.prototype.update=function(t,e,i){for(var n,r,u=[],s=3;s<arguments.length;s++)u[s-3]=arguments[s];return this.am(),"string"==typeof e||e instanceof ai?(K("WriteBatch.update",arguments,3),n=go("WriteBatch.update",t,this.um),r=this.um.Yw.cl("WriteBatch.update",e,i,u)):(W("WriteBatch.update",arguments,2),n=go("WriteBatch.update",t,this.um),r=this.um.Yw.ol("WriteBatch.update",e)),this.hm=this.hm.concat(r.Hf(n.im,Pt.exists(!0))),this},t.prototype.delete=function(t){W("WriteBatch.delete",arguments,1),this.am();var e=go("WriteBatch.delete",t,this.um);return this.hm=this.hm.concat(new jt(e.im,Pt.NONE)),this},t.prototype.commit=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(t){return this.am(),this.cm=!0,this.hm.length>0?[2,this.um.Qw().write(this.hm)]:[2]}))}))},t.prototype.am=function(){if(this.cm)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ao=function(){function t(t,e,i){this.im=t,this.firestore=e,this.om=i,this.Gw=this.firestore.Qw()}return t.em=function(e,i,n){if(e.length%2!=0)throw new P(R.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.nt()+" has "+e.length);return new t(new gt(e),i,n)},Object.defineProperty(t.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new po(this.im.path.H(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.im.path.nt()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(W("DocumentReference.collection",arguments,1),X("DocumentReference.collection","non-empty string",1,t),!t)throw new P(R.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=vt.it(t);return new po(this.im.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw dt("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.im.isEqual(e.im)&&this.om===e.om},t.prototype.set=function(t,e){Y("DocumentReference.set",arguments,1,2),e=vo("DocumentReference.set",e);var i=bo(this.om,t,"DocumentReference.set"),n=i[0],r=i[1],u=e.merge||e.mergeFields?this.firestore.Yw.sl(r,n,e.mergeFields):this.firestore.Yw.rl(r,n);return this.Gw.write(u.Hf(this.im,Pt.NONE))},t.prototype.update=function(t,e){for(var i,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return"string"==typeof t||t instanceof ai?(K("DocumentReference.update",arguments,2),i=this.firestore.Yw.cl("DocumentReference.update",t,e,n)):(W("DocumentReference.update",arguments,1),i=this.firestore.Yw.ol("DocumentReference.update",t)),this.Gw.write(i.Hf(this.im,Pt.exists(!0)))},t.prototype.delete=function(){return W("DocumentReference.delete",arguments,0),this.Gw.write([new jt(this.im,Pt.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Y("DocumentReference.onSnapshot",arguments,1,4);var i,n={includeMetadataChanges:!1},r=0;"object"!=typeof t[r]||eo(t[r])||(st("DocumentReference.onSnapshot",n=t[r],["includeMetadataChanges"]),rt("DocumentReference.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++);var u={includeMetadataChanges:n.includeMetadataChanges};return eo(t[r])?i=t[r]:(X("DocumentReference.onSnapshot","function",r,t[r]),Q("DocumentReference.onSnapshot","function",r+1,t[r+1]),Q("DocumentReference.onSnapshot","function",r+2,t[r+2]),i={next:t[r],error:t[r+1],complete:t[r+2]}),this.fm(u,i)},t.prototype.fm=function(t,e){var i=this,n=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(n=e.error.bind(e));var r=new to({next:function(t){if(e.next){T(t.docs.size<=1,"Too many documents returned on a document query");var n=t.docs.get(i.im);e.next(new co(i.firestore,i.im,n,t.fromCache,t.hasPendingWrites,i.om))}},error:n}),u=this.Gw.listen(fe.jn(this.im.path),r,t);return function(){r.qw(),i.Gw.nd(u)}},t.prototype.get=function(t){var e=this;return Y("DocumentReference.get",arguments,0,1),mo("DocumentReference.get",t),new Promise((function(i,n){t&&"cache"===t.source?e.firestore.Qw().xw(e.im).then((function(t){i(new co(e.firestore,e.im,t,!0,t instanceof ie&&t.en,e.om))}),n):e.lm(i,n,t)}))},t.prototype.lm=function(t,e,i){var n=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(r){n(),!r.exists&&r.metadata.fromCache?e(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):r.exists&&r.metadata.fromCache&&i&&"server"===i.source?e(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(r)},error:e})},t.prototype.withConverter=function(e){return new t(this.im,this.firestore,e)},t}(),uo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),co=function(){function t(t,e,i,n,r,u){this.um=t,this.im=e,this.dm=i,this.vm=n,this.wm=r,this.om=u}return t.prototype.data=function(t){if(Y("DocumentSnapshot.data",arguments,0,1),t=yo("DocumentSnapshot.data",t),this.dm){if(this.om){var e=new ho(this.um,this.im,this.dm,this.vm,this.wm);return this.om.fromFirestore(e,t)}return this.mm(this.dm.data(),Vt.mn(t,this.um.rm()))}},t.prototype.get=function(t,e){if(Y("DocumentSnapshot.get",arguments,1,2),e=yo("DocumentSnapshot.get",e),this.dm){var i=this.dm.data().field(Ai("DocumentSnapshot.get",t));if(null!==i)return this.pm(i,Vt.mn(e,this.um.rm()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ao(this.im,this.um,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.dm},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new uo(this.wm,this.vm)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw dt("isEqual","DocumentSnapshot",1,e);return this.um===e.um&&this.vm===e.vm&&this.im.isEqual(e.im)&&(null===this.dm?null===e.dm:this.dm.isEqual(e.dm))&&this.om===e.om},t.prototype.mm=function(t,e){var i=this,n={};return t.forEach((function(t,r){n[t]=i.pm(r,e)})),n},t.prototype.pm=function(t,e){if(t instanceof te)return this.mm(t,e);if(t instanceof ne)return this.gm(t,e);if(t instanceof $t){var i=t.value(e),n=this.um.Qw().s();return t.s.isEqual(n)||I("Document "+this.im.path+" contains a document reference within a different database ("+t.s.projectId+"/"+t.s.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),new ao(i,this.um,this.om)}return t.value(e)},t.prototype.gm=function(t,e){var i=this;return t.Ht.map((function(t){return i.pm(t,e)}))},t}(),ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c.__extends(e,t),e.prototype.data=function(e){var i=t.prototype.data.call(this,e);return T(void 0!==i,"Document in a QueryDocumentSnapshot should exist"),i},e}(co),fo=function(){function t(t,e,i){this.bm=t,this.firestore=e,this.om=i}return t.prototype.where=function(e,i,n){W("Query.where",arguments,3),ot("Query.where",3,n);var r,u=["<","<=","==",">=",">","array-contains","in","array-contains-any"];tt("Query.where",u,2,i);var s=Ai("Query.where",e),o=le.it(i);if(s.ut()){if(o===le.ARRAY_CONTAINS||o===le.ARRAY_CONTAINS_ANY)throw new P(R.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===le.IN){this.ym(n,o);for(var c=[],h=0,a=n;h<a.length;h++){var f=a[h];c.push(this._m(f))}r=new ne(c)}else r=this._m(n)}else o!==le.IN&&o!==le.ARRAY_CONTAINS_ANY||this.ym(n,o),r=this.firestore.Yw.al("Query.where",n,o===le.IN);var l=pe.create(s,o,r);return this.Im(l),new t(this.bm.Bn(l),this.firestore,this.om)},t.prototype.orderBy=function(e,i){var n;if(Y("Query.orderBy",arguments,1,2),Q("Query.orderBy","non-empty string",2,i),void 0===i||"asc"===i)n=we.ASCENDING;else{if("desc"!==i)throw new P(R.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+i+"', expected 'asc' or 'desc'.");n=we.DESCENDING}if(null!==this.bm.startAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.bm.endAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Ai("Query.orderBy",e),u=new Ie(r,n);return this.Tm(u),new t(this.bm.Qn(u),this.firestore,this.om)},t.prototype.limit=function(e){return W("Query.limit",arguments,1),X("Query.limit","number",1,e),at("Query.limit",1,e),new t(this.bm.Gn(e),this.firestore,this.om)},t.prototype.limitToLast=function(e){return W("Query.limitToLast",arguments,1),X("Query.limitToLast","number",1,e),at("Query.limitToLast",1,e),new t(this.bm.Wn(e),this.firestore,this.om)},t.prototype.startAt=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];K("Query.startAt",arguments,1);var r=this.Em("Query.startAt",e,i,!0);return new t(this.bm.zn(r),this.firestore,this.om)},t.prototype.startAfter=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];K("Query.startAfter",arguments,1);var r=this.Em("Query.startAfter",e,i,!1);return new t(this.bm.zn(r),this.firestore,this.om)},t.prototype.endBefore=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];K("Query.endBefore",arguments,1);var r=this.Em("Query.endBefore",e,i,!0);return new t(this.bm.Kn(r),this.firestore,this.om)},t.prototype.endAt=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];K("Query.endAt",arguments,1);var r=this.Em("Query.endAt",e,i,!1);return new t(this.bm.Kn(r),this.firestore,this.om)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw dt("isEqual","Query",1,e);return this.firestore===e.firestore&&this.bm.isEqual(e.bm)},t.prototype.withConverter=function(e){return new t(this.bm,this.firestore,e)},t.prototype.Em=function(t,e,i,n){if(ot(t,1,e),e instanceof co){if(i.length>0)throw new P(R.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var r=e;if(!r.exists)throw new P(R.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Dm(t,r.dm,n)}var u=[e].concat(i);return this.Sm(t,u,n)},t.prototype.Dm=function(t,e,i){for(var n=[],r=0,u=this.bm.orderBy;r<u.length;r++){var s=u[r];if(s.field.ut())n.push(new $t(this.firestore.Ww,e.key));else{var o=e.field(s.field);if(o instanceof Xt)throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===o){var c=s.field.nt();throw new P(R.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}n.push(o)}}return new be(n,i)},t.prototype.Sm=function(t,e,i){var n=this.bm.On;if(e.length>n.length)throw new P(R.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var r=[],u=0;u<e.length;u++){var s=e[u];if(n[u].field.ut()){if("string"!=typeof s)throw new P(R.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.bm.ui()&&-1!==s.indexOf("/"))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var o=this.bm.path.child(vt.it(s));if(!gt.ht(o))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+o+"' is not because it contains an odd number of segments.");var c=new gt(o);r.push(new $t(this.firestore.Ww,c))}else{var h=this.firestore.Yw.al(t,s);r.push(h)}}return new be(r,i)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Y("Query.onSnapshot",arguments,1,4);var i,n={},r=0;return"object"!=typeof t[r]||eo(t[r])||(st("Query.onSnapshot",n=t[r],["includeMetadataChanges"]),rt("Query.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++),eo(t[r])?i=t[r]:(X("Query.onSnapshot","function",r,t[r]),Q("Query.onSnapshot","function",r+1,t[r+1]),Q("Query.onSnapshot","function",r+2,t[r+2]),i={next:t[r],error:t[r+1],complete:t[r+2]}),this.Rm(this.bm),this.fm(n,i)},t.prototype.fm=function(t,e){var i=this,n=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(n=e.error.bind(e));var r=new to({next:function(t){e.next&&e.next(new lo(i.firestore,i.bm,t,i.om))},error:n}),u=this.firestore.Qw(),s=u.listen(this.bm,r,t);return function(){r.qw(),u.nd(s)}},t.prototype.Rm=function(t){if(t.ei()&&0===t.On.length)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return Y("Query.get",arguments,0,1),mo("Query.get",t),this.Rm(this.bm),new Promise((function(i,n){t&&"cache"===t.source?e.firestore.Qw().jw(e.bm).then((function(t){i(new lo(e.firestore,e.bm,t,e.om))}),n):e.lm(i,n,t)}))},t.prototype.lm=function(t,e,i){var n=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(r){n(),r.metadata.fromCache&&i&&"server"===i.source?e(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(r)},error:e})},t.prototype._m=function(t){if("string"==typeof t){if(""===t)throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.bm.ui()&&-1!==t.indexOf("/"))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.bm.path.child(vt.it(t));if(!gt.ht(e))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new $t(this.firestore.Ww,new gt(e))}if(t instanceof ao){var i=t;return new $t(this.firestore.Ww,i.im)}throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+it(t)+".")},t.prototype.ym=function(t,e){if(!Array.isArray(t)||0===t.length)throw new P(R.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new P(R.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new P(R.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new P(R.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Im=function(t){if(t instanceof pe){var e=[le.ARRAY_CONTAINS,le.ARRAY_CONTAINS_ANY],i=[le.IN,le.ARRAY_CONTAINS_ANY],n=e.indexOf(t.op)>=0,r=i.indexOf(t.op)>=0;if(t.Mn()){var u=this.bm.Ln();if(null!==u&&!u.isEqual(t.field))throw new P(R.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+u.toString()+"' and '"+t.field.toString()+"'");var s=this.bm.qn();null!==s&&this.Cm(t.field,s)}else if(r||n){var o=null;if(r&&(o=this.bm.ri(i)),null===o&&n&&(o=this.bm.ri(e)),null!=o)throw o===t.op?new P(R.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new P(R.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+o.toString()+"' filters.")}}},t.prototype.Tm=function(t){if(null===this.bm.qn()){var e=this.bm.Ln();null!==e&&this.Cm(e,t.field)}},t.prototype.Cm=function(t,e){if(!e.isEqual(t))throw new P(R.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),lo=function(){function t(t,e,i,n){this.um=t,this.Am=e,this.Pm=i,this.om=n,this.km=null,this.Nm=null,this.metadata=new uo(i.hasPendingWrites,i.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Pm.docs.J()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Pm.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var i=this;Y("QuerySnapshot.forEach",arguments,1,2),X("QuerySnapshot.forEach","function",1,t),this.Pm.docs.forEach((function(n){t.call(e,i.Om(n))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new fo(this.Am,this.um,this.om)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(st("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),rt("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pm.Ei)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.km&&this.Nm===e||(this.km=function(t,e,i,n){if(i._i.J()){var r,u=0;return i.docChanges.map((function(e){var s=new ho(t,e.doc.key,e.doc,i.fromCache,i.Ii.has(e.doc.key),n);return T(0===e.type,"Invalid event type for first snapshot"),T(!r||i.query.Xn(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:s,oldIndex:-1,newIndex:u++}}))}var s=i._i;return i.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=new ho(t,e.doc.key,e.doc,i.fromCache,i.Ii.has(e.doc.key),n),u=-1,o=-1;return 0!==e.type&&(T((u=s.indexOf(e.doc.key))>=0,"Index for document not found"),s=s.delete(e.doc.key)),1!==e.type&&(o=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:wo(e.type),doc:r,oldIndex:u,newIndex:o}}))}(this.um,e,this.Pm,this.om),this.Nm=e),this.km},t.prototype.isEqual=function(e){if(!(e instanceof t))throw dt("isEqual","QuerySnapshot",1,e);return this.um===e.um&&this.Am.isEqual(e.Am)&&this.Pm.isEqual(e.Pm)&&this.om===e.om},t.prototype.Om=function(t){return new ho(this.um,t.key,t,this.metadata.fromCache,this.Pm.Ii.has(t.key),this.om)},t}();c.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(lo.prototype.docChanges,t,{get:function(){return function(){throw new P(R.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var po=function(t){function e(e,i,n){var r=t.call(this,fe.jn(e),i,n)||this;if(r.Fm=e,e.length%2!=1)throw new P(R.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.nt()+" has "+e.length);return r}return c.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.bm.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.bm.path.H();return t.J()?null:new ao(new gt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.bm.path.nt()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(Y("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=A.u()),X("CollectionReference.doc","non-empty string",1,t),""===t)throw new P(R.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=vt.it(t);return ao.em(this.bm.path.child(e),this.firestore,this.om)},e.prototype.add=function(t){W("CollectionReference.add",arguments,1);var e=this.om?this.om.toFirestore(t):t;X("CollectionReference.add","object",1,e);var i=this.doc();return i.set(t).then((function(){return i}))},e.prototype.withConverter=function(t){return new e(this.Fm,this.firestore,t)},e}(fo);function vo(t,e){if(void 0===e)return{merge:!1};if(st(t,e,["merge","mergeFields"]),rt(t,"boolean","merge",e.merge),function(t,e,i,n,r){void 0!==n&&function(t,e,i,n,r){if(!(n instanceof Array))throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+it(n));for(var u=0;u<n.length;++u)if(!r(n[u]))throw new P(R.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+i+", but the value at index "+u+" was: "+it(n[u]))}(t,e,i,n,r)}(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(t){return"string"==typeof t||t instanceof ai})),void 0!==e.mergeFields&&void 0!==e.merge)throw new P(R.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function yo(t,e){return void 0===e?{}:(st(t,e,["serverTimestamps"]),Z(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function mo(t,e){Q(t,"object",1,e),e&&(st(t,e,["source"]),Z(t,0,"source",e.source,["default","server","cache"]))}function go(t,e,i){if(e instanceof ao){if(e.firestore!==i)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw dt(t,"DocumentReference",1,e)}function wo(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _("Unknown change type: "+t)}}function bo(t,e,i){var n;return t?(n=t.toFirestore(e),i="toFirestore() in "+i):n=e,[n,i]}var Io=ln(io,"Use firebase.firestore() instead."),Eo=ln(oo,"Use firebase.firestore().runTransaction() instead."),_o=ln(so,"Use firebase.firestore().batch() instead."),To=ln(ao,"Use firebase.firestore().doc() instead."),Ao=ln(co),No=ln(ho),So=ln(fo),ko=ln(lo),Oo=ln(po,"Use firebase.firestore().collection() instead."),Do={Firestore:Io,GeoPoint:ht,Timestamp:ft,Blob:yn,Transaction:Eo,WriteBatch:_o,DocumentReference:To,DocumentSnapshot:Ao,Query:So,QueryDocumentSnapshot:No,QuerySnapshot:ko,CollectionReference:Oo,FieldPath:ai,FieldValue:vi,setLogLevel:io.setLogLevel,CACHE_SIZE_UNLIMITED:no};var Co=function(){function t(){}return t.prototype.xl=function(t){},t.prototype.shutdown=function(){},t}(),Ro=function(){function t(){var t=this;this.Vm=function(){return t.Um()},this.xm=function(){return t.jm()},this.Lm=[],this.qm()}return t.prototype.xl=function(t){this.Lm.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Vm),window.removeEventListener("offline",this.xm)},t.prototype.qm=function(){window.addEventListener("online",this.Vm),window.addEventListener("offline",this.xm)},t.prototype.Um=function(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(0)},t.prototype.jm=function(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(1)},t.cs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Po=function(){function t(t){this.Bm=t.Bm,this.Mm=t.Mm}return t.prototype.Af=function(t){T(!this.Qm,"Called onOpen on stream twice!"),this.Qm=t},t.prototype.Ef=function(t){T(!this.Gm,"Called onClose on stream twice!"),this.Gm=t},t.prototype.onMessage=function(t){T(!this.Wm,"Called onMessage on stream twice!"),this.Wm=t},t.prototype.close=function(){this.Mm()},t.prototype.send=function(t){this.Bm(t)},t.prototype.zm=function(){T(void 0!==this.Qm,"Cannot call onOpen because no callback was set"),this.Qm()},t.prototype.Km=function(t){T(void 0!==this.Gm,"Cannot call onClose because no callback was set"),this.Gm(t)},t.prototype.Hm=function(t){T(void 0!==this.Wm,"Cannot call onMessage because no callback was set"),this.Wm(t)},t}(),xo={BatchGetDocuments:"batchGet",Commit:"commit"},Lo="gl-js/ fire/"+d,Mo=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Jm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Ym=function(t,e){if(e)for(var i in e.g)e.g.hasOwnProperty(i)&&(t[i]=e.g[i]);t["X-Goog-Api-Client"]=Lo},t.prototype.Bf=function(t,e,i){var n=this,u=this.Xm(t);return new Promise((function(s,r){var o=new l.XhrIo;o.listenOnce(l.EventType.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var e=o.getResponseJson();w("Connection","XHR received:",JSON.stringify(e)),s(e);break;case l.ErrorCode.TIMEOUT:w("Connection",'RPC "'+t+'" timed out'),r(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var i=o.getStatus();if(w("Connection",'RPC "'+t+'" failed with status:',i,"response text:",o.getResponseText()),i>0){var n=o.getResponseJson().error;if(n&&n.status&&n.message){var c=(h=n.status.toLowerCase().replace("_","-"),Object.values(R).indexOf(h)>=0?h:R.UNKNOWN);r(new P(c,n.message))}else r(new P(R.UNKNOWN,"Server responded with status "+o.getStatus()))}else w("Connection",'RPC "'+t+'" failed'),r(new P(R.UNAVAILABLE,"Connection failed."));break;default:_('RPC "'+t+'" failed with unanticipated webchannel error '+o.getLastErrorCode()+": "+o.getLastError()+", giving up.")}}finally{w("Connection",'RPC "'+t+'" completed.')}var h}));var h=c.__assign({},e);delete h.database;var a=JSON.stringify(h);w("Connection","XHR sending: ",u+" "+a);var f={"Content-Type":"text/plain"};n.Ym(f,i),o.send(u,"POST",a,f,15)}))},t.prototype.Mf=function(t,e,i){return this.Bf(t,e,i)},t.prototype.Pf=function(t,e){var i=[this.Jm,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=l.createWebChannelTransport(),r={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Ym(r.initMessageHeaders,e),f.isMobileCordova()||f.isReactNative()||f.isElectron()||f.isIE()||f.isUWP()||f.isBrowserExtension()||(r.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");w("Connection","Creating WebChannel: "+u+" "+r);var s=n.createWebChannel(u,r),o=!1,c=!1,h=new Po({Bm:function(t){c?w("Connection","Not sending because WebChannel is closed:",t):(o||(w("Connection","Opening WebChannel transport."),s.open(),o=!0),w("Connection","WebChannel sending:",t),s.send(t))},Mm:function(){return s.close()}}),d=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){c||w("Connection","WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,w("Connection","WebChannel transport closed"),h.Km())})),d(l.WebChannel.EventType.ERROR,(function(t){c||(c=!0,w("Connection","WebChannel transport errored:",t),h.Km(new P(R.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(t){var e;if(!c){var i=t.data[0];T(!!i,"Got a webchannel message without data.");var n=i,r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){w("Connection","WebChannel received error:",r);var u=r.status,o=function(t){var e=Se[t];if(void 0!==e)return Re(e)}(u),f=r.message;void 0===o&&(o=R.INTERNAL,f="Unknown error status: "+u+" with message "+r.message),c=!0,h.Km(new P(o,f)),s.close()}else w("Connection","WebChannel received:",i),h.Hm(i)}})),setTimeout((function(){h.zm()}),0),h},t.prototype.Xm=function(t){var e=xo[t];return T(void 0!==e,"Unknown REST mapping for: "+t),this.Jm+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),Uo=function(){function t(){this.xr="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.kw=function(t){return Promise.resolve(new Mo(t))},t.prototype.Ow=function(){return Ro.cs()?new Ro:new Co},t.prototype.Fw=function(t){return new hn(t,{Te:!0})},t.prototype.i=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();function jo(t){(function(t){var e;t.INTERNAL.registerComponent(new component.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new io(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((T((e=Do)&&"object"==typeof e,"shallowCopy() expects object parameter."),c.__assign({},e))))})(t),t.registerVersion("@firebase/firestore","1.12.2")}fn.Ur(new Uo),jo(o),e.__PRIVATE_registerFirestore=jo}).call(this,n(97))},785:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return h})),n.d(e,"__decorate",(function(){return f})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return v})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return m})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return I})),n.d(e,"__spread",(function(){return E})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return A})),n.d(e,"__asyncDelegator",(function(){return N})),n.d(e,"__asyncValues",(function(){return S})),n.d(e,"__makeTemplateObject",(function(){return k})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return D})),n.d(e,"__classPrivateFieldGet",(function(){return C})),n.d(e,"__classPrivateFieldSet",(function(){return R}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function h(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function f(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function l(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function v(t,e,n,r){return new(n||(n=Promise))((function(o,c){function h(t){try{l(r.next(t))}catch(t){c(t)}}function f(t){try{l(r.throw(t))}catch(t){c(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(h,f)}l((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(h){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,h])}}}function m(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function E(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(I(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function A(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,h):f(q[0][2],n)}catch(t){f(q[0][3],t)}var n}function c(t){o("next",t)}function h(t){o("throw",t)}function f(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function N(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function S(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function D(t){return t&&t.__esModule?t:{default:t}}function C(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function R(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},786:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return dr})),n.d(e,"EventType",(function(){return vr})),n.d(e,"WebChannel",(function(){return yr})),n.d(e,"XhrIo",(function(){return mr})),n.d(e,"createWebChannelTransport",(function(){return pr}));var g,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=o||{},c=r;function h(a){return"string"==typeof a}function f(a){return"number"==typeof a}function l(a,b){a=a.split("."),b=b||c;for(var t=0;t<a.length;t++)if(null==(b=b[a[t]]))return null;return b}function d(){}function p(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function q(a){return"array"==p(a)}function v(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),w=0;function I(a,b,t){return a.call.apply(a.bind,arguments)}function E(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function u(a,b,t){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I:E).apply(null,arguments)}function _(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var T=Date.now||function(){return+new Date};function A(a,b){function t(){}t.prototype=b.prototype,a.N=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.yb=function(t,e,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[e].apply(t,r)}}function N(){this.j=this.j,this.i=this.i}N.prototype.j=!1,N.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++w)},N.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(h(a))return h(b)&&1==b.length?a.indexOf(b,0):-1;for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},k=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n=h(a)?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function O(a){return Array.prototype.concat.apply([],arguments)}function D(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function C(a){return/^[\s\xa0]*$/.test(a)}var R,P=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function x(a,b){return-1!=a.indexOf(b)}function L(a,b){return a<b?-1:a>b?1:0}t:{var M=c.navigator;if(M){var U=M.userAgent;if(U){R=U;break t}}R=""}function j(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function F(a){var t,b={};for(t in a)b[t]=a[t];return b}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<V.length;r++)t=V[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function B(a){return B[" "](a),a}B[" "]=d;var H,a,z=x(R,"Opera"),W=x(R,"Trident")||x(R,"MSIE"),K=x(R,"Edge"),Y=K||W,J=x(R,"Gecko")&&!(x(R.toLowerCase(),"webkit")&&!x(R,"Edge"))&&!(x(R,"Trident")||x(R,"MSIE"))&&!x(R,"Edge"),X=x(R.toLowerCase(),"webkit")&&!x(R,"Edge");function Q(){var a=c.document;return a?a.documentMode:void 0}t:{var $="",Z=(a=R,J?/rv:([^\);]+)(\)|;)/.exec(a):K?/Edge\/([\d\.]+)/.exec(a):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):X?/WebKit\/(\S+)/.exec(a):z?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Z&&($=Z?Z[1]:""),W){var tt=Q();if(null!=tt&&tt>parseFloat($)){H=String(tt);break t}}H=$}var et,nt={};function it(a){return function(a,b){var t=nt;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=P(String(H)).split("."),e=P(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var o=t[r]||"",c=e[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=L(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||L(0==o[2].length,0==c[2].length)||L(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b}))}var ot=c.document;et=ot&&W?Q()||("CSS1Compat"==ot.compatMode?parseInt(H,10):5):void 0;var st=!W||9<=Number(et),at=W&&!it("9"),ut=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",d,b),c.removeEventListener("test",d,b)}catch(t){}return a}();function ct(a,b){this.type=a,this.a=this.target=b,this.Ia=!0}function ht(a,b){if(ct.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(J){t:{try{B(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=h(a.pointerType)?a.pointerType:ft[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ct.prototype.b=function(){this.Ia=!1},A(ht,ct);var ft={2:"touch",3:"pen",4:"mouse"};ht.prototype.b=function(){ht.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,at)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}};var lt="closure_listenable_"+(1e6*Math.random()|0),pt=0;function vt(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.da=n,this.key=++pt,this.X=this.Z=!1}function yt(a){a.X=!0,a.listener=null,a.proxy=null,a.src=null,a.da=null}function mt(a){this.src=a,this.a={},this.b=0}function gt(a,b){var t=b.type;if(t in a.a){var e,n=a.a[t],r=S(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(yt(b),0==a.a[t].length&&(delete a.a[t],a.b--))}}function wt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.X&&r.listener==b&&r.capture==!!t&&r.da==e)return n}return-1}mt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=wt(a,b,e,n);return-1<o?(b=a[o],t||(b.Z=!1)):((b=new vt(b,this.src,r,!!e,n)).Z=t,a.push(b)),b};var bt="closure_lm_"+(1e6*Math.random()|0),It={};function Et(a,b,t,e,n){if(e&&e.once)return function t(a,b,e,n,r){if(q(b)){for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);return null}return e=Dt(e),a&&a[lt]?a.Aa(b,e,y(n)?!!n.capture:!!n,r):_t(a,b,e,!0,n,r)}(a,b,t,e,n);if(q(b)){for(var r=0;r<b.length;r++)Et(a,b[r],t,e,n);return null}return t=Dt(t),a&&a[lt]?a.za(b,t,y(e)?!!e.capture:!!e,n):_t(a,b,t,!1,e,n)}function _t(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var o=y(n)?!!n.capture:!!n;if(o&&!st)return null;var c=kt(a);if(c||(a[bt]=c=new mt(a)),(t=c.add(b,t,e,o,r)).proxy)return t;if(e=function(){var a=St,b=st?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)ut||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(At(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function Tt(a){if(!f(a)&&a&&!a.X){var b=a.src;if(b&&b[lt])gt(b.c,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(At(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=kt(b))?(gt(t,a),0==t.b&&(t.src=null,b[bt]=null)):yt(a)}}}function At(a){return a in It?It[a]:It[a]="on"+a}function Nt(a,b){var t=a.listener,e=a.da||a.src;return a.Z&&Tt(a),t.call(e,b)}function St(a,b){return!!a.X||(st?Nt(a,new ht(b,this)):Nt(a,b=new ht(b||l("window.event"),this)))}function kt(a){return(a=a[bt])instanceof mt?a:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(a){return"function"==p(a)?a:(a[Ot]||(a[Ot]=function(b){return a.handleEvent(b)}),a[Ot])}function Ct(){N.call(this),this.c=new mt(this),this.J=this,this.B=null}function Rt(a,b,t,e){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.X&&o.capture==t){var c=o.listener,h=o.da||o.src;o.Z&&gt(a.c,o),n=!1!==c.call(h,e)&&n}}return n&&0!=e.Ia}A(Ct,N),Ct.prototype[lt]=!0,(g=Ct.prototype).addEventListener=function(a,b,t,e){Et(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){!function t(a,b,e,n,r){if(q(b))for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);else n=y(n)?!!n.capture:!!n,e=Dt(e),a&&a[lt]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(e=wt(o=a.a[b],e,n,r))&&(yt(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=kt(a))&&(b=a.a[b.toString()],a=-1,b&&(a=wt(b,e,n,r)),(e=-1<a?b[a]:null)&&Tt(e))}(this,a,b,t,e)},g.dispatchEvent=function(a){var b,t=this.B;if(t)for(b=[];t;t=t.B)b.push(t);t=this.J;var e=a.type||a;if(h(a))a=new ct(a,t);else if(a instanceof ct)a.target=a.target||t;else{var n=a;G(a=new ct(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=Rt(o,e,!0,a)&&n}if(n=Rt(o=a.a=t,e,!0,a)&&n,n=Rt(o,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Rt(o=a.a=b[r],e,!1,a)&&n;return n},g.G=function(){if(Ct.N.G.call(this),this.c){var t,a=this.c;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)yt(e[n]);delete a.a[t],a.b--}}this.B=null},g.za=function(a,b,t,e){return this.c.add(String(a),b,!1,t,e)},g.Aa=function(a,b,t,e){return this.c.add(String(a),b,!0,t,e)};var Pt=c.JSON.stringify;function xt(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function Lt(){this.b=this.a=null}xt.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Mt,Ut=new xt((function(){return new Ft}),(function(a){a.reset()}));function jt(){var a=Bt,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Ft(){this.next=this.b=this.a=null}function Vt(a){c.setTimeout((function(){throw a}),0)}function qt(a,b){Mt||function(){var a=c.Promise.resolve(void 0);Mt=function(){a.then(Ht)}}(),Gt||(Mt(),Gt=!0),Bt.add(a,b)}Lt.prototype.add=function(a,b){var t=Ut.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Ft.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Ft.prototype.reset=function(){this.next=this.b=this.a=null};var Gt=!1,Bt=new Lt;function Ht(){for(var a;a=jt();){try{a.a.call(a.b)}catch(t){Vt(t)}var b=Ut;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}Gt=!1}function zt(a,b){Ct.call(this),this.b=a||1,this.a=b||c,this.f=u(this.gb,this),this.g=T()}function Wt(a){a.ba=!1,a.L&&(a.a.clearTimeout(a.L),a.L=null)}function Kt(a,b,t){if("function"==p(a))t&&(a=u(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=u(a.handleEvent,a)}return 2147483647<Number(b)?-1:c.setTimeout(a,b||0)}function Yt(a,b,t){N.call(this),this.f=null!=t?u(a,t):a,this.c=b,this.b=u(this.$a,this),this.a=[]}function Jt(a){a.U=Kt(a.b,a.c),a.f.apply(null,a.a)}function Xt(a){N.call(this),this.b=a,this.a={}}A(zt,Ct),(g=zt.prototype).ba=!1,g.L=null,g.gb=function(){if(this.ba){var a=T()-this.g;0<a&&a<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-a):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Wt(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},g.G=function(){zt.N.G.call(this),Wt(this),delete this.a},A(Yt,N),(g=Yt.prototype).ea=!1,g.U=null,g.Ta=function(a){this.a=arguments,this.U?this.ea=!0:Jt(this)},g.G=function(){Yt.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.$a=function(){this.U=null,this.ea&&(this.ea=!1,Jt(this))},A(Xt,N);var Qt=[];function $t(a,b,t,e){q(t)||(t&&(Qt[0]=t.toString()),t=Qt);for(var n=0;n<t.length;n++){var r=Et(b,t[n],e||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Zt(a){j(a.a,(function(b,t){this.a.hasOwnProperty(t)&&Tt(b)}),a),a.a={}}function te(){}Xt.prototype.G=function(){Xt.N.G.call(this),Zt(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ee=new Ct;function ne(a){ct.call(this,"serverreachability",a)}function re(a){ee.dispatchEvent(new ne(ee,a))}function ie(a){ct.call(this,"statevent",a)}function oe(a){ee.dispatchEvent(new ie(ee,a))}function se(a){ct.call(this,"timingevent",a)}function ae(a,b){if("function"!=p(a))throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){a()}),b)}A(ne,ct),A(ie,ct),A(se,ct);var ue={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},ce={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function he(){}function fe(a){var b;return(b=a.a)||(b=a.a={}),b}function le(){}he.prototype.a=null;var pe,de={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ve(){ct.call(this,"d")}function ye(){ct.call(this,"c")}function me(){}function ge(a,b,t){this.g=a,this.W=b,this.V=t||1,this.I=new Xt(this),this.O=we,a=Y?125:void 0,this.P=new zt(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}A(ve,ct),A(ye,ct),A(me,he),pe=new me;var we=45e3,be={},Ie={};function Ee(a,b,t){a.F=1,a.f=Ke(Ve(b)),a.l=t,a.H=!0,Te(a,null)}function _e(a,b,t,e){a.F=1,a.f=Ke(Ve(b)),a.l=null,a.H=t,Te(a,e)}function Te(a,b){a.v=T(),Se(a),a.D=Ve(a.f),We(a.D,"t",a.V),a.A=0,a.a=a.g.$(a.g.Y()?b:null),0<a.J&&(a.B=new Yt(u(a.Ja,a,a.a),a.J)),$t(a.I,a.a,"readystatechange",a.cb),b=a.h?F(a.h):{},a.l?(a.w||(a.w="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ca(a.D,a.w,a.l,b)):(a.w="GET",a.a.ca(a.D,a.w,null,b)),re(1)}function Ae(a,b,t){for(var e=!0;!a.m&&a.A<t.length;){var n=Ne(a,t);if(n==Ie){4==b&&(a.c=4,oe(14),e=!1);break}if(n==be){a.c=4,oe(15),e=!1;break}Re(a,n)}4==b&&0==t.length&&(a.c=1,oe(16),e=!1),a.b=a.b&&e,e||(Ce(a),De(a))}function Ne(a,b){var t=a.A,e=b.indexOf("\n",t);return-1==e?Ie:(t=Number(b.substring(t,e)),isNaN(t)?be:(e+=1)+t>b.length?Ie:(b=b.substr(e,t),a.A=e+t,b))}function Se(a){a.R=T()+a.O,ke(a,a.O)}function ke(a,b){if(null!=a.i)throw Error("WatchDog timer not null");a.i=ae(u(a.ab,a),b)}function Oe(a){a.i&&(c.clearTimeout(a.i),a.i=null)}function De(a){a.g.Ca()||a.m||a.g.na(a)}function Ce(a){Oe(a);var b=a.B;b&&"function"==typeof b.la&&b.la(),a.B=null,Wt(a.P),Zt(a.I),a.a&&(b=a.a,a.a=null,b.abort(),b.la())}function Re(a,b){try{a.g.Fa(a,b),re(4)}catch(t){}}function Pe(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(v(a)||h(a))k(a,b,void 0);else{if(a.K&&"function"==typeof a.K)var t=a.K();else if(a.C&&"function"==typeof a.C)t=void 0;else if(v(a)||h(a)){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;n=(e=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(h(a))return a.split("");if(v(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function xe(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof xe)for(t=a.K(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Le(a,b){Ue(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Me(a))}function Me(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Ue(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Ue(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Ue(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=ge.prototype).setTimeout=function(a){this.O=a},g.cb=function(a){a=a.target;var b=this.B;b&&3==jn(a)?b.Ta():this.Ja(a)},g.Ja=function(a){try{if(a==this.a)t:{var b=jn(this.a),t=this.a.ya(),e=this.a.T();if(!(3>b||3==b&&!Y&&!this.a.aa())){this.m||4!=b||7==t||re(8==t||0>=e?3:2),Oe(this);var n=this.a.T();this.o=n;var r=this.a.aa();if(this.b=200==n){if(this.S&&!this.s){e:{if(this.a){var o=Fn(this.a,"X-HTTP-Initial-Response");if(o&&!C(o)){var c=o;break e}}c=null}if(!c){this.b=!1,this.c=3,oe(12),Ce(this),De(this);break t}this.s=!0,Re(this,c)}this.H?(Ae(this,b,r),Y&&this.b&&3==b&&($t(this.I,this.P,"tick",this.bb),this.P.start())):Re(this,r),4==b&&Ce(this),this.b&&!this.m&&(4==b?this.g.na(this):(this.b=!1,Se(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.c=3,oe(12)):(this.c=0,oe(13)),Ce(this),De(this)}}}catch(t){}},g.bb=function(){if(this.a){var a=jn(this.a),b=this.a.aa();this.A<b.length&&(Oe(this),Ae(this,a,b),this.b&&4!=a&&Se(this))}},g.cancel=function(){this.m=!0,Ce(this)},g.ab=function(){this.i=null;var a=T();0<=a-this.R?(2!=this.F&&(re(3),oe(17)),Ce(this),this.c=2,De(this)):ke(this,this.R-a)},(g=xe.prototype).C=function(){Me(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.K=function(){return Me(this),this.a.concat()},g.get=function(a,b){return Ue(this.b,a)?this.b[a]:b},g.set=function(a,b){Ue(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var t=this.K(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var je=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(a,b){var t;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof Fe?(this.h=void 0!==b?b:a.h,qe(this,a.f),this.j=a.j,Ge(this,a.b),Be(this,a.i),this.a=a.a,He(this,un(a.c)),this.g=a.g):a&&(t=String(a).match(je))?(this.h=!!b,qe(this,t[1]||"",!0),this.j=Ye(t[2]||""),Ge(this,t[3]||"",!0),Be(this,t[4]),this.a=Ye(t[5]||"",!0),He(this,t[6]||"",!0),this.g=Ye(t[7]||"")):(this.h=!!b,this.c=new nn(null,this.h))}function Ve(a){return new Fe(a)}function qe(a,b,t){a.f=t?Ye(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Ge(a,b,t){a.b=t?Ye(b,!0):b}function Be(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function He(a,b,t){b instanceof nn?(a.c=b,function(a,b){b&&!a.f&&(rn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(on(this,e),an(this,n,t))}),a)),a.f=b}(a.c,a.h)):(t||(b=Je(b,tn)),a.c=new nn(b,a.h))}function ze(a,b,t){a.c.set(b,t)}function We(a,b,t){q(t)||(t=[String(t)]),an(a.c,b,t)}function Ke(a){return ze(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),a}function Ye(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Je(a,b,t){return h(a)?(a=encodeURI(a).replace(b,Xe),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xe(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Fe.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Je(b,Qe,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(Je(b,Qe,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.i)&&a.push(":",String(t))),(t=this.a)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Je(t,"/"==t.charAt(0)?Ze:$e,!0))),(t=this.c.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Je(t,en)),a.join("")},Fe.prototype.resolve=function(a){var b=Ve(this),t=!!a.f;t?qe(b,a.f):t=!!a.j,t?b.j=a.j:t=!!a.b,t?Ge(b,a.b):t=null!=a.i;var e=a.a;if(t)Be(b,a.i);else if(t=!!a.a){if("/"!=e.charAt(0))if(this.b&&!this.a)e="/"+e;else{var n=b.a.lastIndexOf("/");-1!=n&&(e=b.a.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(x(n,"./")||x(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],o=0;o<n.length;){var c=n[o++];"."==c?e&&o==n.length&&r.push(""):".."==c?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&o==n.length&&r.push("")):(r.push(c),e=!0)}e=r.join("/")}else e=n}return t?b.a=e:t=""!==a.c.toString(),t?He(b,un(a.c)):t=!!a.g,t&&(b.g=a.g),b};var Qe=/[#\/\?@]/g,$e=/[#\?:]/g,Ze=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function rn(a){a.a||(a.a=new xe,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function on(a,b){rn(a),b=cn(a,b),Ue(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Le(a.a,b))}function sn(a,b){return rn(a),b=cn(a,b),Ue(a.a.b,b)}function an(a,b,t){on(a,b),0<t.length&&(a.c=null,a.a.set(cn(a,b),D(t)),a.b+=t.length)}function un(a){var b=new nn;return b.c=a.c,a.a&&(b.a=new xe(a.a),b.b=a.b),b}function cn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function hn(a){this.a=a,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function fn(a){var b=a.a.F.a;if(null!=b)oe(4),b?(oe(10),Qn(a.a,a,!1)):(oe(11),Qn(a.a,a,!0));else{a.b=new ge(a,void 0,void 0),a.b.h=a.h,b=rr(b=a.a,b.Y()?a.f:null,a.i),oe(4),We(b,"TYPE","xmlhttp");var t=a.a.j,e=a.a.I;t&&e&&ze(b,t,e),_e(a.b,b,!1,a.f)}}function ln(){this.a=this.b=null}function pn(){this.a=new xe}function dn(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[m]||(a[m]=++w)):b.charAt(0)+a}function vn(a,b){this.b=a,this.a=b}function yn(a){this.g=a||mn,c.PerformanceNavigationTiming?a=0<(a=c.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(c.ka&&c.ka.Da&&c.ka.Da()&&c.ka.Da().zb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new pn),this.b=null,this.c=[]}(g=nn.prototype).add=function(a,b){rn(this),this.c=null,a=cn(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},g.forEach=function(a,b){rn(this),this.a.forEach((function(t,e){k(t,(function(t){a.call(b,t,e,this)}),this)}),this)},g.K=function(){rn(this);for(var a=this.a.C(),b=this.a.K(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},g.C=function(a){rn(this);var b=[];if(h(a))sn(this,a)&&(b=O(b,this.a.get(cn(this,a))));else{a=this.a.C();for(var t=0;t<a.length;t++)b=O(b,a[t])}return b},g.set=function(a,b){return rn(this),this.c=null,sn(this,a=cn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.C(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.K(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.C(e);for(var r=0;r<e.length;r++){var o=n;""!==e[r]&&(o+="="+encodeURIComponent(String(e[r]))),a.push(o)}}return this.c=a.join("&")},A((function(){}),(function(){})),(g=hn.prototype).M=null,g.$=function(a){return this.a.$(a)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Ca=function(){return!1},g.Fa=function(a,b){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var t=Fn(a,"X-Client-Wire-Protocol");this.l=t||null,this.a.j&&(a=Fn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(b){try{var e=this.a.ja.a.parse(b)}catch(t){return(b=this.a).m=this.c,void er(b,2)}this.f=e[0]}else(b=this.a).m=this.c,er(b,2)}else 1==this.M&&(this.g?oe(6):"11111"==b?(oe(5),this.g=!0,(!W||10<=Number(et))&&(this.c=200,this.b.cancel(),oe(11),Qn(this.a,this,!0))):(oe(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,fn(this)):1==this.M&&(this.g?(oe(11),Qn(this.a,this,!0)):(oe(10),Qn(this.a,this,!1)));else{0==this.M?oe(8):1==this.M&&oe(9);var a=this.a;a.m=this.c,er(a,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},pn.prototype.add=function(a){this.a.set(dn(a),a)},pn.prototype.C=function(){return this.a.C()};var mn=10;function gn(a,b){!a.a&&(x(b,"spdy")||x(b,"quic")||x(b,"h2"))&&(a.f=a.g,a.a=new pn,a.b&&(dd(a,a.b),a.b=null))}function wn(a){return!!a.b||!!a.a&&a.a.a.c>=a.f}function bn(a){return a.b?1:a.a?a.a.a.c:0}function In(a,b){return a.b?a=a.b==b:a.a?(b=dn(b),a=Ue(a.a.a.b,b)):a=!1,a}function dd(a,b){a.a?a.a.add(b):a.b=b}function En(a,b){var t;a.b&&a.b==b?a.b=null:((t=a.a)&&(t=dn(b),t=Ue(a.a.a.b,t)),t&&Le(a.a.a,dn(b)))}function _n(a){if(null!=a.b)return a.c.concat(a.b.j);if(null!=a.a&&0!=a.a.a.c){var b=a.c;return k(a.a.C(),(function(t){b=b.concat(t.j)})),b}return D(a.c)}function Tn(){}function An(){this.a=new Tn}function Nn(a,b,t){var e=t||"";try{Pe(a,(function(t,n){var r=t;y(t)&&(r=Pt(t)),b.push(e+n+"="+encodeURIComponent(r))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function Sn(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}yn.prototype.cancel=function(){this.c=_n(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(k(this.a.C(),(function(a){a.cancel()})),function(a){a.b={},a.a.length=0,a.c=0}(this.a.a))},Tn.prototype.stringify=function(a){return c.JSON.stringify(a,void 0)},Tn.prototype.parse=function(a){return c.JSON.parse(a,void 0)};var kn=c.JSON.parse;function On(a){Ct.call(this),this.headers=new xe,this.H=a||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Dn,this.D=this.F=!1}A(On,Ct);var Dn="",Cn=/^https?$/i,Rn=["POST","PUT"];function Pn(a){return"content-type"==a.toLowerCase()}function xn(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Ln(a),Un(a)}function Ln(a){a.v||(a.v=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Mn(a){if(a.b&&void 0!==o&&(!a.s[1]||4!=jn(a)||2!=a.T()))if(a.l&&4==jn(a))Kt(a.Ea,0,a);else if(a.dispatchEvent("readystatechange"),4==jn(a)){a.b=!1;try{var t,b=a.T();t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.A).match(je)[1]||null;if(!r&&c.self&&c.self.location){var h=c.self.location.protocol;r=h.substr(0,h.length-1)}n=!Cn.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.h=6;try{var f=2<jn(a)?a.a.statusText:""}catch(t){f=""}a.f=f+" ["+a.T()+"]",Ln(a)}}finally{Un(a)}}}function Un(a,b){if(a.a){td(a);var t=a.a,e=a.s[0]?d:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){}}}function td(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(c.clearTimeout(a.m),a.m=null)}function jn(a){return a.a?a.a.readyState:0}function Fn(a,b){return a.a?a.a.getResponseHeader(b):null}function Vn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}if(e)return a;if(t=function(a){var b="";return j(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),h(a)){if(b=encodeURIComponent(String(b)),b+=t=null!=t?"="+encodeURIComponent(String(t)):""){if(0>(t=a.indexOf("#"))&&(t=a.length),0>(e=a.indexOf("?"))||e>t){e=t;var n=""}else n=a.substring(e+1,t);t=(a=[a.substr(0,e),n,a.substr(t)])[1],a[1]=b?t?t+"&"+b:b:t,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return ze(a,b,t),a}function qn(a){this.f=[],this.F=new ln,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!l("internalChannelParams.failFast",a),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=l("internalChannelParams.baseRetryDelayMs",a)||5e3,this.Ra=l("internalChannelParams.retryDelaySeedMs",a)||1e4,this.Pa=l("internalChannelParams.forwardChannelMaxRetries",a)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",a)||2e4,this.Ka=a&&a.Ab||void 0,this.D=void 0,this.R=a&&a.supportsCrossDomainXhr||!1,this.H="",this.b=new yn(a&&a.concurrentRequestLimit),this.ja=new An,this.o=!a||void 0===a.backgroundChannelTest||a.backgroundChannelTest,(this.W=a&&a.fastHandshake||!1)&&!this.o&&(this.o=!0),a&&a.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Gn(a){if(Bn(a),3==a.u){var b=a.P++,t=Ve(a.B);ze(t,"SID",a.H),ze(t,"RID",b),ze(t,"TYPE","terminate"),Kn(a,t),(b=new ge(a,b,void 0)).F=2,b.f=Ke(Ve(t)),t=!1,c.navigator&&c.navigator.sendBeacon&&(t=c.navigator.sendBeacon(b.f.toString(),"")),!t&&c.Image&&((new Image).src=b.f,t=!0),t||(b.a=b.g.$(null),b.a.ca(b.f)),b.v=T(),Se(b)}nr(a)}function Bn(a){a.w&&(a.w.abort(),a.w=null),a.a&&(a.a.cancel(),a.a=null),a.l&&(c.clearTimeout(a.l),a.l=null),$n(a),a.b.cancel(),a.h&&(f(a.h)&&c.clearTimeout(a.h),a.h=null)}function Hn(a,b){a.f.push(new vn(a.Qa++,b)),3==a.u&&zn(a)}function zn(a){wn(a.b)||a.h||(a.h=!0,qt(a.Ha,a),a.A=0)}function Wn(a,b){var t;t=b?b.W:a.P++;var e=Ve(a.B);ze(e,"SID",a.H),ze(e,"RID",t),ze(e,"AID",a.O),Kn(a,e),a.g&&a.i&&Vn(e,a.g,a.i),t=new ge(a,t,a.A+1),null===a.g&&(t.h=a.i),b&&(a.f=b.j.concat(a.f)),b=Yn(a,t,1e3),t.setTimeout(Math.round(.5*a.qa)+Math.round(.5*a.qa*Math.random())),dd(a.b,t),Ee(t,e,b)}function Kn(a,b){a.c&&Pe({},(function(t,e){ze(b,e,t)}))}function Yn(a,b,t){t=Math.min(a.f.length,t);var e=a.c?u(a.c.Sa,a.c,a):null;t:for(var n=a.f,r=-1;;){var o=["count="+t];-1==r?0<t?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,h=0;h<t;h++){var f=n[h].b,l=n[h].a;if(0>(f-=r))r=Math.max(0,n[h].b-100),c=!1;else try{Nn(l,o,"req"+f+"_")}catch(t){e&&e(l)}}if(c){e=o.join("&");break t}}return a=a.f.splice(0,t),b.j=a,e}function Jn(a){a.a||a.l||(a.S=1,qt(a.Ga,a),a.v=0)}function Xn(a){return!(a.a||a.l||3<=a.v)&&(a.S++,a.l=ae(u(a.Ga,a),Zn(a,a.v)),a.v++,!0)}function Qn(a,b,t){var e=b.l;e&&gn(a.b,e),a.ia=a.oa&&t,a.m=b.c,a.B=rr(a,null,a.ha),zn(a)}function $n(a){null!=a.s&&(c.clearTimeout(a.s),a.s=null)}function Zn(a,b){var t=a.Na+Math.floor(Math.random()*a.Ra);return a.ma()||(t*=2),t*b}function er(a,b){if(2==b){var t=null;a.c&&(t=null);var e=u(a.eb,a);t||(t=new Fe("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||qe(t,"https"),Ke(t)),function(a,b){var t=new te;if(c.Image){var e=new Image;e.onload=_(Sn,t,e,"TestLoadImage: loaded",!0,b),e.onerror=_(Sn,t,e,"TestLoadImage: error",!1,b),e.onabort=_(Sn,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=_(Sn,t,e,"TestLoadImage: timeout",!1,b),c.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else oe(2);a.u=0,a.c&&a.c.ta(b),nr(a),Bn(a)}function nr(a){a.u=0,a.m=-1,a.c&&(0==_n(a.b).length&&0==a.f.length||(a.b.c.length=0,D(a.f),a.f.length=0),a.c.sa())}function rr(a,b,t){var e=function(a){return a instanceof Fe?Ve(a):new Fe(a,void 0)}(t);if(""!=e.b)b&&Ge(e,b+"."+e.b),Be(e,e.i);else{var n,r=c.location;n=b?b+"."+r.hostname:r.hostname,e=function(a,b,t,e){var n=new Fe(null,void 0);return a&&qe(n,a),b&&Ge(n,b),t&&Be(n,t),e&&(n.a=e),n}(r.protocol,n,+r.port,t)}return a.V&&j(a.V,(function(t,n){ze(e,n,t)})),b=a.j,t=a.I,b&&t&&ze(e,b,t),ze(e,"VER",a.wa),Kn(a,e),e}function ir(){}function or(){if(W&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function sr(a,b){Ct.call(this),this.a=new qn(b),this.g=a,this.m=b&&b.fb?b.fb:function(a){for(var b=arguments[0],t=1;t<arguments.length;t++){var e,n=arguments[t];if(0==n.lastIndexOf("/",0))b=n;else(e=""==b)||(e=0<=(e=b.length-1)&&b.indexOf("/",e)==e),b+=e?n:"/"+n}return b}(this.g,"test"),this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.i=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.xa&&(a?a["X-WebChannel-Client-Profile"]=b.xa:a={"X-WebChannel-Client-Profile":b.xa}),this.a.J=a,(a=b&&b.httpHeadersOverwriteParam)&&!C(a)&&(this.a.g=a),this.l=b&&b.supportsCrossDomainXhr||!1,this.h=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!C(b)&&(this.a.j=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new cr(this)}function ar(a){ve.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function ur(){ye.call(this),this.status=1}function cr(a){this.a=a}(g=On.prototype).ca=function(a,b,t,e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);b=b?b.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fe(this.H):fe(pe),this.a.onreadystatechange=u(this.Ea,this);try{this.w=!0,this.a.open(b,String(a),!0),this.w=!1}catch(t){return void xn(this,t)}a=t||"";var n=new xe(this.headers);e&&Pe(e,(function(t,e){n.set(e,t)})),e=function(a){t:{for(var b=Pn,t=a.length,e=h(a)?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:h(a)?a.charAt(b):a[b]}(n.K()),t=c.FormData&&a instanceof c.FormData,!(0<=S(Rn,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{td(this),0<this.o&&((this.D=function(a){return W&&it(9)&&f(a.timeout)&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=u(this.Ba,this)):this.m=Kt(this.Ba,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(t){xn(this,t)}},g.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Un(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Un(this,!0)),On.N.G.call(this)},g.Ea=function(){this.j||(this.w||this.l||this.g?Mn(this):this.Za())},g.Za=function(){Mn(this)},g.T=function(){try{return 2<jn(this)?this.a.status:-1}catch(t){return-1}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Ua=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),kn(b)}},g.ya=function(){return this.h},g.Xa=function(){return h(this.f)?this.f:String(this.f)},(g=qn.prototype).wa=8,g.u=1,g.Ca=function(){return 0==this.u},g.Ha=function(a){if(this.h)if(this.h=null,1==this.u){if(!a){this.P=Math.floor(1e5*Math.random());var t,b=new ge(this,a=this.P++,void 0),e=this.i;if(this.J&&(e?G(e=F(e),this.J):e=this.J),null===this.g&&(b.h=e),this.W)t:{for(var n=t=0;n<this.f.length;n++){var r=this.f[n];if(void 0===(r="__data__"in r.a&&h(r=r.a.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break t}if(4096===t||n===this.f.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Yn(this,b,t),ze(n=Ve(this.B),"RID",a),ze(n,"CVER",22),this.o&&this.j&&ze(n,"X-HTTP-Session-Id",this.j),Kn(this,n),this.g&&e&&Vn(n,this.g,e),dd(this.b,b),this.W?(ze(n,"$req",t),ze(n,"SID","null"),b.S=!0,Ee(b,n,null)):Ee(b,n,t),this.u=2}}else 3==this.u&&(a?Wn(this,a):0==this.f.length||wn(this.b)||Wn(this))},g.Ga=function(){this.l=null,this.a=new ge(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var a=Ve(this.pa);ze(a,"RID","rpc"),ze(a,"SID",this.H),ze(a,"CI",this.ia?"0":"1"),ze(a,"AID",this.O),Kn(this,a),ze(a,"TYPE","xmlhttp"),this.g&&this.i&&Vn(a,this.g,this.i),this.D&&this.a.setTimeout(this.D),_e(this.a,a,!0,this.ga)},g.Fa=function(a,b){if(0!=this.u&&(this.a==a||In(this.b,a)))if(this.m=a.o,!a.s&&In(this.b,a)&&3==this.u){try{var t=this.ja.a.parse(b)}catch(e){t=null}if(q(t)&&3==t.length){if(0==(b=t)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break t;$n(this),this.a.cancel(),this.a=null}Xn(this),oe(18)}}else this.ra=b[1],0<this.ra-this.O&&37500>b[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ae(u(this.Ya,this),6e3));if(1>=bn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else er(this,11)}else if((a.s||this.a==a)&&$n(this),!C(b))for(b=t=this.ja.a.parse(b),t=0;t<b.length;t++){var e=b[t];if(this.O=e[0],e=e[1],2==this.u)if("c"==e[0]){this.H=e[1],this.ga=e[2];var n=e[3];null!=n&&(this.wa=n),null!=(e=e[5])&&f(e)&&0<e&&(this.D=1.5*e),this.o&&(e=a.a)&&((n=Fn(e,"X-Client-Wire-Protocol"))&&gn(this.b,n),this.j&&(e=Fn(e,"X-HTTP-Session-Id")))&&(this.I=e,ze(this.B,this.j,e)),this.u=3,this.c&&this.c.va(),e=a,this.pa=rr(this,this.Y()?this.ga:null,this.ha),e.s?(En(this.b,e),(n=this.D)&&e.setTimeout(n),e.i&&(Oe(e),Se(e)),this.a=e):Jn(this),0<this.f.length&&zn(this)}else"stop"!=e[0]&&"close"!=e[0]||er(this,7);else 3==this.u&&("stop"==e[0]||"close"==e[0]?"stop"==e[0]?er(this,7):Gn(this):"noop"!=e[0]&&this.c&&this.c.ua(e),this.v=0)}},g.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Xn(this),oe(19))},g.na=function(a){var b=null;if(this.a==a){$n(this),this.a=null;var t=2}else{if(!In(this.b,a))return;b=a.j,En(this.b,a),t=1}if(this.m=a.o,0!=this.u)if(a.b)1==t?(b=T()-a.v,ee.dispatchEvent(new se(ee,a.l?a.l.length:0,b,this.A)),zn(this)):Jn(this);else{var e=a.c;if(3==e||0==e&&0<this.m||!(1==t&&function(a,b){return!(bn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.f=b.j.concat(a.f),!0):!(1==a.u||2==a.u||a.A>=(a.Oa?0:a.Pa))&&(a.h=ae(u(a.Ha,a,b),Zn(a,a.A)),a.A++,!0))}(this,a)||2==t&&Xn(this)))switch(b&&0<b.length&&(a=this.b,a.c=a.c.concat(b)),e){case 1:er(this,5);break;case 4:er(this,10);break;case 3:er(this,6);break;default:er(this,2)}}},g.eb=function(a){oe(a?2:1)},g.$=function(a){if(a&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(a=new On(this.Ka)).F=this.R,a},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=ir.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Sa=function(){},or.prototype.a=function(a,b){return new sr(a,b)},A(sr,Ct),(g=sr.prototype).addEventListener=function(a,b,t,e){sr.N.addEventListener.call(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){sr.N.removeEventListener.call(this,a,b,t,e)},g.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,b=this.m,t=this.g,e=this.b||void 0;oe(0),a.ha=t,a.V=e||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new hn(a),null===a.g&&(a.w.h=a.i),t=b,a.g&&a.i&&(t=Vn(b,a.g,a.i)),(a=a.w).i=t,b=rr(a.a,null,a.i),oe(3),null!=(t=a.a.F.b)?(a.f=t[0],a.M=1,fn(a)):(We(b,"MODE","init"),!a.a.o&&a.a.j&&We(b,"X-HTTP-Session-Id",a.a.j),a.b=new ge(a,void 0,void 0),a.b.h=a.h,_e(a.b,b,!1,null),a.M=0)},g.close=function(){Gn(this.a)},g.Wa=function(a){if(h(a)){var b={};b.__data__=a,Hn(this.a,b)}else this.h?((b={}).__data__=Pt(a),Hn(this.a,b)):Hn(this.a,a)},g.G=function(){this.a.c=null,delete this.f,Gn(this.a),delete this.a,sr.N.G.call(this)},A(ar,ve),A(ur,ye),A(cr,ir),cr.prototype.va=function(){this.a.dispatchEvent("a")},cr.prototype.ua=function(a){this.a.dispatchEvent(new ar(a))},cr.prototype.ta=function(a){this.a.dispatchEvent(new ur(a))},cr.prototype.sa=function(){this.a.dispatchEvent("b")};var fr=_((function(a,b){function t(){}t.prototype=a.prototype;var e=new t;return a.apply(e,Array.prototype.slice.call(arguments,1)),e}),or);or.prototype.createWebChannel=or.prototype.a,sr.prototype.send=sr.prototype.Wa,sr.prototype.open=sr.prototype.Va,sr.prototype.close=sr.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",le.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Ct.prototype.listen=Ct.prototype.za,On.prototype.listenOnce=On.prototype.Aa,On.prototype.getLastError=On.prototype.Xa,On.prototype.getLastErrorCode=On.prototype.ya,On.prototype.getStatus=On.prototype.T,On.prototype.getResponseJson=On.prototype.Ua,On.prototype.getResponseText=On.prototype.aa,On.prototype.send=On.prototype.ca;var lr={createWebChannelTransport:fr,ErrorCode:ue,EventType:ce,WebChannel:le,XhrIo:On},pr=lr.createWebChannelTransport,dr=lr.ErrorCode,vr=lr.EventType,yr=lr.WebChannel,mr=lr.XhrIo;e.default=lr}.call(this,n(21))},787:function(t,e,n){"use strict";(function(t){var e=n(301),r=n.n(e);(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,t){a!=Array.prototype&&a!=Object.prototype&&(a[b]=t.value)};var o=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,a];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}return globalThis}(this);function c(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function h(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:c(a)}}!function(a,b){if(b){var t=o;a=a.split(".");for(var e=0;e<a.length-1;e++){var r=a[e];r in t||(t[r]={}),t=t[r]}(b=b(e=t[a=a[a.length-1]]))!=e&&null!=b&&n(t,a,{configurable:!0,writable:!0,value:b})}}("Promise",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{g(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function e(g){return g instanceof b?g:new b((function(t){t(g)}))}if(a)return a;t.prototype.b=function(g){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(g)};var n=o.setTimeout;t.prototype.c=function(g){n(g,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var t=0;t<g.length;++t){var e=g[t];g[t]=null;try{e()}catch(t){this.f(t)}}}this.a=null},t.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(p){return function(n){e||(e=!0,p.call(t,n))}}var t=this,e=!1;return{resolve:g(this.m),reject:g(this.g)}},b.prototype.m=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.s(g);else{t:switch(typeof g){case"object":var t=null!=g;break t;case"function":t=!0;break t;default:t=!1}t?this.u(g):this.h(g)}},b.prototype.u=function(g){var t=void 0;try{t=g.then}catch(t){return void this.g(t)}"function"==typeof t?this.w(t,g):this.h(g)},b.prototype.g=function(g){this.i(2,g)},b.prototype.h=function(g){this.i(1,g)},b.prototype.i=function(g,t){if(0!=this.b)throw Error("Cannot settle("+g+", "+t+"): Promise already settled in state"+this.b);this.b=g,this.c=t,this.l()},b.prototype.l=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)r.b(this.a[g]);this.a=null}};var r=new t;return b.prototype.s=function(g){var t=this.f();g.Oa(t.resolve,t.reject)},b.prototype.w=function(g,t){var e=this.f();try{g.call(t,e.resolve,e.reject)}catch(t){e.reject(t)}},b.prototype.then=function(g,t){function e(t,e){return"function"==typeof t?function(e){try{p(t(e))}catch(t){n(t)}}:e}var p,n,r=new b((function(t,e){p=t,n=e}));return this.Oa(e(g,p),e(t,n)),r},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.Oa=function(g,t){function e(){switch(p.b){case 1:g(p.c);break;case 2:t(p.c);break;default:throw Error("Unexpected state: "+p.b)}}var p=this;null==this.a?r.b(e):this.a.push(e)},b.resolve=e,b.reject=function(g){return new b((function(t,e){e(g)}))},b.race=function(g){return new b((function(t,n){for(var p=h(g),r=p.next();!r.done;r=p.next())e(r.value).Oa(t,n)}))},b.all=function(g){var t=h(g),n=t.next();return n.done?e([]):new b((function(p,r){function o(t){return function(e){c[t]=e,0==--h&&p(c)}}var c=[],h=0;do{c.push(void 0),h++,e(n.value).Oa(o(c.length-1),r),n=t.next()}while(!n.done)}))},b}));var f=f||{},l=this||self,d=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function m(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function w(a){var b=m(a);return"array"==b||"object"==b&&"number"==typeof a.length}function I(a){return"function"==m(a)}function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function E(a){return Object.prototype.hasOwnProperty.call(a,_)&&a[_]||(a[_]=++T)}var _="closure_uid_"+(1e9*Math.random()>>>0),T=0;function A(a,b,t){return a.call.apply(a.bind,arguments)}function N(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function S(a,b,t){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?A:N).apply(null,arguments)}function k(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var O=Date.now||function(){return+new Date};function D(a,b){function t(){}t.prototype=b.prototype,a.Za=b.prototype,a.prototype=new t,a.prototype.constructor=a}function u(a,b,t){this.code=P+a,this.message=b||x[a]||"",this.a=t||null}function C(a){var b=a&&a.code;return b?new u(b.substring(P.length),a.message,a.serverResponse):null}D(u,Error),u.prototype.v=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},u.prototype.toJSON=function(){return this.v()};var R,P="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},L={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function M(a){for(var b in L)if(L[b].id===a)return{firebaseEndpoint:(a=L[b]).Ra,secureTokenEndpoint:a.Xa,identityPlatformEndpoint:a.Ua};return null}function U(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(t){return!1}}function j(a){if(Error.captureStackTrace)Error.captureStackTrace(this,j);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function F(a,b){for(var t="",e=(a=a.split("%s")).length-1,n=0;n<e;n++)t+=a[n]+(n<b.length?b[n]:"%s");j.call(this,t+a[e])}function V(a,b){throw new F("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function G(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function B(a,b){a.f(b),100>a.b&&(a.b++,b.next=a.a,a.a=b)}function H(){this.b=this.a=null}R=M("__EID__")?"__EID__":void 0,D(j,Error),j.prototype.name="CustomError",D(F,j),F.prototype.name="AssertionError",G.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var z=new G((function(){return new K}),(function(a){a.reset()}));function W(){var a=Ae,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function K(){this.next=this.b=this.a=null}H.prototype.add=function(a,b){var t=z.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},K.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var Y=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},J=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};var X=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=[],n=0,r="string"==typeof a?a.split(""):a,g=0;g<t;g++)if(g in r){var o=r[g];b.call(void 0,o,g,a)&&(e[n++]=o)}return e},Q=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=Array(t),n="string"==typeof a?a.split(""):a,r=0;r<t;r++)r in n&&(e[r]=b.call(void 0,n[r],r,a));return e},$=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a))return!0;return!1};function Z(a,b){return 0<=Y(a,b)}function tt(a,b){var t;return(t=0<=(b=Y(a,b)))&&Array.prototype.splice.call(a,b,1),t}function et(a,b){!function(a,b){for(var t="string"==typeof a?a.split(""):a,e=a.length-1;0<=e;--e)e in t&&b.call(void 0,t[e],e,a)}(a,(function(t,e){b.call(void 0,t,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&0}))}function nt(a){return Array.prototype.concat.apply([],arguments)}function it(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}var ot,st=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},at=/&/g,ut=/</g,ct=/>/g,ht=/"/g,ft=/'/g,lt=/\x00/g,pt=/[\x00&<>"']/;function vt(a,b){return-1!=a.indexOf(b)}function yt(a,b){return a<b?-1:a>b?1:0}t:{var mt=l.navigator;if(mt){var gt=mt.userAgent;if(gt){ot=gt;break t}}ot=""}function wt(a){return vt(ot,a)}function bt(a,b){for(var t in a)b.call(void 0,a[t],t,a)}function It(a){for(var b in a)return!1;return!0}function Et(a){var t,b={};for(t in a)b[t]=a[t];return b}var _t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tt(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<_t.length;r++)t=_t[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function At(a,b){t:{try{var t=a&&a.ownerDocument,e=t&&(t.defaultView||t.parentWindow);if((e=e||l).Element&&e.Location){var n=e;break t}}catch(t){}n=null}if(n&&void 0!==n[b]&&(!a||!(a instanceof n[b])&&(a instanceof n.Location||a instanceof n.Element))){if(q(a))try{var r=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(t){r="<object could not be stringified>"}else r=void 0===a?"undefined":null===a?"null":typeof a;V("Argument is not a %s (or a non-Element, non-Location mock); got: %s",b,r)}}function Nt(a,b){this.a=a===Ot&&b||"",this.b=kt}function St(a){return a instanceof Nt&&a.constructor===Nt&&a.b===kt?a.a:(V("expected object of type Const, got '"+a+"'"),"type_error:Const")}Nt.prototype.ra=!0,Nt.prototype.qa=function(){return this.a},Nt.prototype.toString=function(){return"Const{"+this.a+"}"};var kt={},Ot={},Dt=new Nt(Ot,"");function Ct(a,b){this.a=a===Ut&&b||"",this.b=Mt}function Rt(a){return a instanceof Ct&&a.constructor===Ct&&a.b===Mt?a.a:(V("expected object of type TrustedResourceUrl, got '"+a+"' of type "+m(a)),"type_error:TrustedResourceUrl")}function Pt(a,b){var t=St(a);if(!Lt.test(t))throw Error("Invalid TrustedResourceUrl format: "+t);return a=t.replace(xt,(function(e,n){if(!Object.prototype.hasOwnProperty.call(b,n))throw Error('Found marker, "'+n+'", in format string, "'+t+'", but no valid label mapping found in args: '+JSON.stringify(b));return(e=b[n])instanceof Nt?St(e):encodeURIComponent(String(e))})),new Ct(Ut,a)}Ct.prototype.ra=!0,Ct.prototype.qa=function(){return this.a.toString()},Ct.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var xt=/%{(\w+)}/g,Lt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Mt={},Ut={};function jt(a,b){this.a=a===Bt&&b||"",this.b=Gt}function Ft(a){return a instanceof jt&&a.constructor===jt&&a.b===Gt?a.a:(V("expected object of type SafeUrl, got '"+a+"' of type "+m(a)),"type_error:SafeUrl")}jt.prototype.ra=!0,jt.prototype.qa=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Vt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function qt(a){return a instanceof jt?a:(a="object"==typeof a&&a.ra?a.qa():String(a),Vt.test(a)||(a="about:invalid#zClosurez"),new jt(Bt,a))}var Gt={},Bt={};function Ht(){this.a="",this.b=Wt}function zt(a){return a instanceof Ht&&a.constructor===Ht&&a.b===Wt?a.a:(V("expected object of type SafeHtml, got '"+a+"' of type "+m(a)),"type_error:SafeHtml")}Ht.prototype.ra=!0,Ht.prototype.qa=function(){return this.a.toString()},Ht.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Wt={};function Kt(a){var b=new Ht;return b.a=a,b}Kt("<!DOCTYPE html>");var Yt=Kt("");function Jt(a,b){for(var t=a.split("%s"),e="",n=Array.prototype.slice.call(arguments,1);n.length&&1<t.length;)e+=t.shift()+n.shift();return e+t.join("%s")}function Xt(a){return pt.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(at,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(ut,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(ct,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ht,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(ft,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(lt,"&#0;"))),a}function Qt(a){return Qt[" "](a),a}Kt("<br>"),Qt[" "]=y;var $t,a,Zt=wt("Opera"),te=wt("Trident")||wt("MSIE"),ee=wt("Edge"),ne=ee||te,re=wt("Gecko")&&!(vt(ot.toLowerCase(),"webkit")&&!wt("Edge"))&&!(wt("Trident")||wt("MSIE"))&&!wt("Edge"),ie=vt(ot.toLowerCase(),"webkit")&&!wt("Edge");function oe(){var a=l.document;return a?a.documentMode:void 0}t:{var se="",ae=(a=ot,re?/rv:([^\);]+)(\)|;)/.exec(a):ee?/Edge\/([\d\.]+)/.exec(a):te?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):ie?/WebKit\/(\S+)/.exec(a):Zt?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(ae&&(se=ae?ae[1]:""),te){var ue=oe();if(null!=ue&&ue>parseFloat(se)){$t=String(ue);break t}}$t=se}var ce,he={};function fe(a){return function(a,b){var t=he;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=st(String($t)).split("."),e=st(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var g=t[r]||"",o=e[r]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==g[0].length&&0==o[0].length)break;b=yt(0==g[1].length?0:parseInt(g[1],10),0==o[1].length?0:parseInt(o[1],10))||yt(0==g[2].length,0==o[2].length)||yt(g[2],o[2]),g=g[3],o=o[3]}while(0==b)}return 0<=b}))}ce=l.document&&te?oe():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(a){}var le=!te||9<=Number(ce);function pe(a){var b=document;return"string"==typeof a?b.getElementById(a):a}function de(a,b){bt(b,(function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?a.style.cssText=t:"class"==e?a.className=t:"for"==e?a.htmlFor=t:me.hasOwnProperty(e)?a.setAttribute(me[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,t):a[e]=t}))}var ve,ye,me={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(a,b,t){function e(g){g&&b.appendChild("string"==typeof g?a.createTextNode(g):g)}for(var n=2;n<t.length;n++){var r=t[n];!w(r)||q(r)&&0<r.nodeType?e(r):J(be(r)?it(r):r,e)}}function we(a,b){return b=String(b),"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase()),a.createElement(b)}function be(a){if(a&&"number"==typeof a.length){if(q(a))return"function"==typeof a.item||"string"==typeof a.item;if(I(a))return"function"==typeof a.item}return!1}function Ie(a){l.setTimeout((function(){throw a}),0)}function Ee(){var a=l.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!wt("Presto")&&(a=function(){var t=we(document,"IFRAME");t.style.display="none",function(a){var b=new Ct(Ut,St(Dt));At(a,"HTMLIFrameElement"),a.src=Rt(b).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(zt(Yt)),t.close();var g="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=S((function(t){"*"!=n&&t.origin!=n||t.data!=g||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(g,n)}}}),void 0!==a&&!wt("Trident")&&!wt("MSIE")){var b=new a,t={},e=t;return b.port1.onmessage=function(){if(void 0!==t.next){var e=(t=t.next).Db;t.Db=null,e()}},function(t){e.next={Db:t},e=e.next,b.port2.postMessage(0)}}return function(t){l.setTimeout(t,0)}}function _e(a,b){ye||function(){if(l.Promise&&l.Promise.resolve){var a=l.Promise.resolve(void 0);ye=function(){a.then(Ne)}}else ye=function(){var b=Ne;!I(l.setImmediate)||l.Window&&l.Window.prototype&&!wt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ve||(ve=Ee()),ve(b)):l.setImmediate(b)}}(),Te||(ye(),Te=!0),Ae.add(a,b)}var Te=!1,Ae=new H;function Ne(){for(var a;a=W();){try{a.a.call(a.b)}catch(t){Ie(t)}B(z,a)}Te=!1}function Se(a,b){if(this.a=ke,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=y)try{var t=this;a.call(b,(function(e){Ve(t,Oe,e)}),(function(e){if(!(e instanceof Ke))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Ve(t,De,e)}))}catch(t){Ve(this,De,t)}}var ke=0,Oe=2,De=3;function Ce(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ce.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Re=new G((function(){return new Ce}),(function(a){a.reset()}));function Pe(a,b,t){var e=Re.get();return e.g=a,e.b=b,e.f=t,e}function xe(a){if(a instanceof Se)return a;var b=new Se(y);return Ve(b,Oe,a),b}function Le(a){return new Se((function(b,t){t(a)}))}function Me(a,b,t){qe(a,b,t,null)||_e(k(b,a))}function Ue(a){return new Se((function(b){var t=a.length,e=[];if(t)for(var n=function(n,r,p){t--,e[n]=r?{Mb:!0,value:p}:{Mb:!1,reason:p},0==t&&b(e)},r=0;r<a.length;r++)Me(a[r],k(n,r,!0),k(n,r,!1));else b(e)}))}function je(a,b){a.b||a.a!=Oe&&a.a!=De||Ge(a),a.f?a.f.next=b:a.b=b,a.f=b}function Fe(a,b,t,e){var n=Pe(null,null,null);return n.a=new Se((function(r,g){n.g=b?function(t){try{var n=b.call(e,t);r(n)}catch(t){g(t)}}:r,n.b=t?function(n){try{var o=t.call(e,n);void 0===o&&n instanceof Ke?g(n):r(o)}catch(t){g(t)}}:g})),n.a.c=a,je(a,n),n.a}function Ve(a,b,t){a.a==ke&&(a===t&&(b=De,t=new TypeError("Promise cannot resolve to itself")),a.a=1,qe(t,a.Yc,a.Zc,a)||(a.i=t,a.a=b,a.c=null,Ge(a),b!=De||t instanceof Ke||function(a,b){a.g=!0,_e((function(){a.g&&We.call(null,b)}))}(a,t)))}function qe(a,b,t,e){if(a instanceof Se)return je(a,Pe(b||y,t||null,e)),!0;if(U(a))return a.then(b,t,e),!0;if(q(a))try{var n=a.then;if(I(n))return function(a,b,t,e,n){function r(t){o||(o=!0,e.call(n,t))}var o=!1;try{b.call(a,(function(e){o||(o=!0,t.call(n,e))}),r)}catch(t){r(t)}}(a,n,b,t,e),!0}catch(n){return t.call(e,n),!0}return!1}function Ge(a){a.h||(a.h=!0,_e(a.ec,a))}function Be(a){var b=null;return a.b&&(b=a.b,a.b=b.next,b.next=null),a.b||(a.f=null),b}function He(a,b,t,e){if(t==De&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,ze(b,t,e);else try{b.c?b.g.call(b.f):ze(b,t,e)}catch(t){We.call(null,t)}B(Re,b)}function ze(a,b,t){b==Oe?a.g.call(a.f,t):a.b&&a.b.call(a.f,t)}Se.prototype.then=function(a,b,t){return Fe(this,I(a)?a:null,I(b)?b:null,t)},Se.prototype.$goog_Thenable=!0,(e=Se.prototype).ma=function(a,b){return(a=Pe(a,a,b)).c=!0,je(this,a),this},e.o=function(a,b){return Fe(this,null,a,b)},e.cancel=function(a){if(this.a==ke){var b=new Ke(a);_e((function(){!function t(a,b){if(a.a==ke)if(a.c){var e=a.c;if(e.b){for(var n=0,r=null,o=null,g=e.b;g&&(g.c||(n++,g.a==a&&(r=g),!(r&&1<n)));g=g.next)r||(o=g);r&&(e.a==ke&&1==n?t(e,b):(o?((n=o).next==e.f&&(e.f=n),n.next=n.next.next):Be(e),He(e,r,De,b)))}a.c=null}else Ve(a,De,b)}(this,b)}),this)}},e.Yc=function(a){this.a=ke,Ve(this,Oe,a)},e.Zc=function(a){this.a=ke,Ve(this,De,a)},e.ec=function(){for(var a;a=Be(this);)He(this,a,this.a,this.i);this.h=!1};var We=Ie;function Ke(a){j.call(this,a)}function Ye(){0!=Je&&(Xe[E(this)]=this),this.wa=this.wa,this.na=this.na}D(Ke,j),Ke.prototype.name="cancel";var Je=0,Xe={};function Qe(a){if(!a.wa&&(a.wa=!0,a.Ba(),0!=Je)){var b=E(a);if(0!=Je&&a.na&&0<a.na.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Xe[b]}}Ye.prototype.wa=!1,Ye.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var $e=Object.freeze||function(a){return a},Ze=!te||9<=Number(ce),tn=te&&!fe("9"),en=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{l.addEventListener("test",y,b),l.removeEventListener("test",y,b)}catch(t){}return a}();function nn(a,b){this.type=a,this.b=this.target=b,this.defaultPrevented=!1}function rn(a,b){if(nn.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=b,b=a.relatedTarget){if(re){t:{try{Qt(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:on[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}nn.prototype.preventDefault=function(){this.defaultPrevented=!0},D(rn,nn);var on=$e({2:"touch",3:"pen",4:"mouse"});rn.prototype.preventDefault=function(){rn.Za.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,tn)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}},rn.prototype.f=function(){return this.a};var sn="closure_listenable_"+(1e6*Math.random()|0),an=0;function un(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.Ta=n,this.key=++an,this.ua=this.Na=!1}function cn(a){a.ua=!0,a.listener=null,a.proxy=null,a.src=null,a.Ta=null}function dd(a){this.src=a,this.a={},this.b=0}function hn(a,b){var t=b.type;t in a.a&&tt(a.a[t],b)&&(cn(b),0==a.a[t].length&&(delete a.a[t],a.b--))}function fn(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.ua&&r.listener==b&&r.capture==!!t&&r.Ta==e)return n}return-1}dd.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var g=fn(a,b,e,n);return-1<g?(b=a[g],t||(b.Na=!1)):((b=new un(b,this.src,r,!!e,n)).Na=t,a.push(b)),b};var ln="closure_lm_"+(1e6*Math.random()|0),pn={};function dn(a,b,t,e,n){if(e&&e.once)yn(a,b,t,e,n);else if(Array.isArray(b))for(var r=0;r<b.length;r++)dn(a,b[r],t,e,n);else t=Tn(t),a&&a[sn]?Nn(a,b,t,q(e)?!!e.capture:!!e,n):vn(a,b,t,!1,e,n)}function vn(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var g=q(n)?!!n.capture:!!n,o=En(a);if(o||(a[ln]=o=new dd(a)),!(t=o.add(b,t,e,g,r)).proxy){if(e=function(){var a=In,b=Ze?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)en||(n=g),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(gn(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}0}}function yn(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)yn(a,b[r],t,e,n);else t=Tn(t),a&&a[sn]?Sn(a,b,t,q(e)?!!e.capture:!!e,n):vn(a,b,t,!0,e,n)}function td(a,b,t,e,n){if(Array.isArray(b))for(var r=0;r<b.length;r++)td(a,b[r],t,e,n);else e=q(e)?!!e.capture:!!e,t=Tn(t),a&&a[sn]?(a=a.u,(b=String(b).toString())in a.a&&(-1<(t=fn(r=a.a[b],t,e,n))&&(cn(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete a.a[b],a.b--)))):a&&(a=En(a))&&(b=a.a[b.toString()],a=-1,b&&(a=fn(b,t,e,n)),(t=-1<a?b[a]:null)&&mn(t))}function mn(a){if("number"!=typeof a&&a&&!a.ua){var b=a.src;if(b&&b[sn])hn(b.u,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(gn(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=En(b))?(hn(t,a),0==t.b&&(t.src=null,b[ln]=null)):cn(a)}}}function gn(a){return a in pn?pn[a]:pn[a]="on"+a}function wn(a,b,t,e){var n=!0;if((a=En(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var r=b[a];r&&r.capture==t&&!r.ua&&(r=bn(r,e),n=n&&!1!==r)}return n}function bn(a,b){var t=a.listener,e=a.Ta||a.src;return a.Na&&mn(a),t.call(e,b)}function In(a,b){if(a.ua)return!0;if(!Ze){if(!b)t:{b=["window","event"];for(var t=l,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}if(b=new rn(e=b,this),t=!0,!(0>e.keyCode||null!=e.returnValue)){t:{var n=!1;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(t){n=!0}(n||null==e.returnValue)&&(e.returnValue=!0)}for(e=[],n=b.b;n;n=n.parentNode)e.push(n);for(a=a.type,n=e.length-1;0<=n;n--){b.b=e[n];var r=wn(e[n],a,!0,b);t=t&&r}for(n=0;n<e.length;n++)b.b=e[n],r=wn(e[n],a,!1,b),t=t&&r}return t}return bn(a,new rn(b,this))}function En(a){return(a=a[ln])instanceof dd?a:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(a){return I(a)?a:(a[_n]||(a[_n]=function(b){return a.handleEvent(b)}),a[_n])}function An(){Ye.call(this),this.u=new dd(this),this.Yb=this,this.eb=null}function Nn(a,b,t,e,n){a.u.add(String(b),t,!1,e,n)}function Sn(a,b,t,e,n){a.u.add(String(b),t,!0,e,n)}function kn(a,b,t,e){if(!(b=a.u.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var g=b[r];if(g&&!g.ua&&g.capture==t){var o=g.listener,c=g.Ta||g.src;g.Na&&hn(a.u,g),n=!1!==o.call(c,e)&&n}}return n&&!e.defaultPrevented}function On(a,b,t){if(I(a))t&&(a=S(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=S(a.handleEvent,a)}return 2147483647<Number(b)?-1:l.setTimeout(a,b||0)}function Dn(a){var b=null;return new Se((function(t,e){-1==(b=On((function(){t(void 0)}),a))&&e(Error("Failed to schedule timer."))})).o((function(t){throw l.clearTimeout(b),t}))}function Cn(a){if(a.V&&"function"==typeof a.V)return a.V();if("string"==typeof a)return a.split("");if(w(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}function Rn(a){if(a.X&&"function"==typeof a.X)return a.X();if(!a.V||"function"!=typeof a.V){if(w(a)||"string"==typeof a){var b=[];a=a.length;for(var t=0;t<a;t++)b.push(t);return b}for(var e in b=[],t=0,a)b[t++]=e;return b}}function Pn(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Pn)for(t=a.X(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function xn(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Ln(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Ln(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Ln(a,b){return Object.prototype.hasOwnProperty.call(a,b)}D(An,Ye),An.prototype[sn]=!0,An.prototype.addEventListener=function(a,b,t,e){dn(this,a,b,t,e)},An.prototype.removeEventListener=function(a,b,t,e){td(this,a,b,t,e)},An.prototype.dispatchEvent=function(a){var b,t=this.eb;if(t)for(b=[];t;t=t.eb)b.push(t);t=this.Yb;var e=a.type||a;if("string"==typeof a)a=new nn(a,t);else if(a instanceof nn)a.target=a.target||t;else{var n=a;Tt(a=new nn(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var g=a.b=b[r];n=kn(g,e,!0,a)&&n}if(n=kn(g=a.b=t,e,!0,a)&&n,n=kn(g,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=kn(g=a.b=b[r],e,!1,a)&&n;return n},An.prototype.Ba=function(){if(An.Za.Ba.call(this),this.u){var t,a=this.u;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)cn(e[n]);delete a.a[t],a.b--}}this.eb=null},(e=Pn.prototype).V=function(){xn(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},e.X=function(){return xn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(a,b){return Ln(this.b,a)?this.b[a]:b},e.set=function(a,b){Ln(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},e.forEach=function(a,b){for(var t=this.X(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Un(a,b){var t;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,a instanceof Un?(this.h=void 0!==b?b:a.h,jn(this,a.f),this.i=a.i,this.b=a.b,Fn(this,a.l),this.c=a.c,Vn(this,sr(a.a)),this.g=a.g):a&&(t=String(a).match(Mn))?(this.h=!!b,jn(this,t[1]||"",!0),this.i=zn(t[2]||""),this.b=zn(t[3]||"",!0),Fn(this,t[4]),this.c=zn(t[5]||"",!0),Vn(this,t[6]||"",!0),this.g=zn(t[7]||"")):(this.h=!!b,this.a=new Zn(null,this.h))}function jn(a,b,t){a.f=t?zn(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Fn(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.l=b}else a.l=null}function Vn(a,b,t){b instanceof Zn?(a.a=b,function(a,b){b&&!a.f&&(er(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(rr(this,e),or(this,n,t))}),a)),a.f=b}(a.a,a.h)):(t||(b=Wn(b,Qn)),a.a=new Zn(b,a.h))}function qn(a,b,t){a.a.set(b,t)}function Gn(a,b){return a.a.get(b)}function Bn(a){return a instanceof Un?new Un(a):new Un(a,void 0)}function Hn(a,b){var t=new Un(null,void 0);return jn(t,"https"),a&&(t.b=a),b&&(t.c=b),t}function zn(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Wn(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,Kn),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Kn(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Un.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Wn(b,Yn,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.i)&&a.push(Wn(b,Yn,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.l)&&a.push(":",String(t))),(t=this.c)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Wn(t,"/"==t.charAt(0)?Xn:Jn,!0))),(t=this.a.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Wn(t,$n)),a.join("")},Un.prototype.resolve=function(a){var b=new Un(this),t=!!a.f;t?jn(b,a.f):t=!!a.i,t?b.i=a.i:t=!!a.b,t?b.b=a.b:t=null!=a.l;var e=a.c;if(t)Fn(b,a.l);else if(t=!!a.c){if("/"!=e.charAt(0))if(this.b&&!this.c)e="/"+e;else{var n=b.c.lastIndexOf("/");-1!=n&&(e=b.c.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(vt(n,"./")||vt(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],g=0;g<n.length;){var o=n[g++];"."==o?e&&g==n.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&g==n.length&&r.push("")):(r.push(o),e=!0)}e=r.join("/")}else e=n}return t?b.c=e:t=""!==a.a.toString(),t?Vn(b,sr(a.a)):t=!!a.g,t&&(b.g=a.g),b};var Yn=/[#\/\?@]/g,Jn=/[#\?:]/g,Xn=/[#\?]/g,Qn=/[#\?@]/g,$n=/#/g;function Zn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function er(a){a.a||(a.a=new Pn,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function nr(a){var b=Rn(a);if(void 0===b)throw Error("Keys are undefined");var t=new Zn(null,void 0);a=Cn(a);for(var e=0;e<b.length;e++){var n=b[e],r=a[e];Array.isArray(r)?or(t,n,r):t.add(n,r)}return t}function rr(a,b){er(a),b=ar(a,b),Ln(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Ln((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&xn(a)))}function ir(a,b){return er(a),b=ar(a,b),Ln(a.a.b,b)}function or(a,b,t){rr(a,b),0<t.length&&(a.c=null,a.a.set(ar(a,b),it(t)),a.b+=t.length)}function sr(a){var b=new Zn;return b.c=a.c,a.a&&(b.a=new Pn(a.a),b.b=a.b),b}function ar(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function ur(a){var b=[];return function t(a,b,e){if(null==b)e.push("null");else{if("object"==typeof b){if(Array.isArray(b)){var n=b;b=n.length,e.push("[");for(var r="",o=0;o<b;o++)e.push(r),t(a,n[o],e),r=",";return void e.push("]")}if(!(b instanceof String||b instanceof Number||b instanceof Boolean)){for(n in e.push("{"),r="",b)Object.prototype.hasOwnProperty.call(b,n)&&("function"!=typeof(o=b[n])&&(e.push(r),pr(n,e),e.push(":"),t(a,o,e),r=","));return void e.push("}")}b=b.valueOf()}switch(typeof b){case"string":pr(b,e);break;case"number":e.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":e.push(String(b));break;case"function":e.push("null");break;default:throw Error("Unknown type: "+typeof b)}}}(new cr,a,b),b.join("")}function cr(){}(e=Zn.prototype).add=function(a,b){er(this),this.c=null,a=ar(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(a,b){er(this),this.a.forEach((function(t,e){J(t,(function(t){a.call(b,t,e,this)}),this)}),this)},e.X=function(){er(this);for(var a=this.a.V(),b=this.a.X(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},e.V=function(a){er(this);var b=[];if("string"==typeof a)ir(this,a)&&(b=nt(b,this.a.get(ar(this,a))));else{a=this.a.V();for(var t=0;t<a.length;t++)b=nt(b,a[t])}return b},e.set=function(a,b){return er(this),this.c=null,ir(this,a=ar(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},e.get=function(a,b){return a&&0<(a=this.V(a)).length?String(a[0]):b},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.X(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.V(e);for(var r=0;r<e.length;r++){var g=n;""!==e[r]&&(g+="="+encodeURIComponent(String(e[r]))),a.push(g)}}return this.c=a.join("&")};var fr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function pr(a,b){b.push('"',a.replace(lr,(function(t){var e=fr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),fr[t]=e),e})),'"')}function dr(){var a=xr();return te&&!!ce&&11==ce||/Edge\/\d+/.test(a)}function vr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function yr(a,b){b=b||l.window;var t="about:blank";a&&(t=Ft(qt(a))),b.location.href=t}function mr(a){return!!((a=(a||xr()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function gr(a){a=a||l.window;try{a.close()}catch(t){}}function wr(a,b,t){var e=Math.floor(1e9*Math.random()).toString();b=b||500,t=t||600;var n=(window.screen.availHeight-t)/2,r=(window.screen.availWidth-b)/2;for(g in b={width:b,height:t,top:0<n?n:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},t=xr().toLowerCase(),e&&(b.target=e,vt(t,"crios/")&&(b.target="_blank")),Cr(xr())==Or&&(a=a||"http://localhost",b.scrollbars=!0),t=a||"",(a=b)||(a={}),e=window,b=t instanceof jt?t:qt(void 0!==t.href?t.href:String(t)),t=a.target||t.target,n=[],a)switch(g){case"width":case"height":case"top":case"left":n.push(g+"="+a[g]);break;case"target":case"noopener":case"noreferrer":break;default:n.push(g+"="+(a[g]?1:0))}var g=n.join(",");if((wt("iPhone")&&!wt("iPod")&&!wt("iPad")||wt("iPad")||wt("iPod"))&&e.navigator&&e.navigator.standalone&&t&&"_self"!=t?(At(g=we(document,"A"),"HTMLAnchorElement"),b instanceof jt||b instanceof jt||(b="object"==typeof b&&b.ra?b.qa():String(b),Vt.test(b)||(b="about:invalid#zClosurez"),b=new jt(Bt,b)),g.href=Ft(b),g.setAttribute("target",t),a.noreferrer&&g.setAttribute("rel","noreferrer"),(a=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,e,1),g.dispatchEvent(a),g={}):a.noreferrer?(g=e.open("",t,g),a=Ft(b),g&&(ne&&vt(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),g.opener=null,a=Kt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Xt(a)+'">'),e=g.document)&&(e.write(zt(a)),e.close())):(g=e.open(Ft(b),t,g))&&a.noopener&&(g.opener=null),g)try{g.focus()}catch(t){}return g}var Ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Er=/^[^@]+@[^@]+$/;function _r(){var a=null;return new Se((function(b){"complete"==l.document.readyState?b():(a=function(){b()},yn(window,"load",a))})).o((function(b){throw td(window,"load",a),b}))}function Tr(a){return a=a||xr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ar(){var a=l.window;try{return!(!a||a==a.top)}catch(t){return!1}}function Nr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function Sr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":Nr()?"Worker":"Browser"}function kr(){var a=Sr();return"ReactNative"===a||"Node"===a}var Or="Firefox",Dr="Chrome";function Cr(a){var b=a.toLowerCase();return vt(b,"opera/")||vt(b,"opr/")||vt(b,"opios/")?"Opera":vt(b,"iemobile")?"IEMobile":vt(b,"msie")||vt(b,"trident/")?"IE":vt(b,"edge/")?"Edge":vt(b,"firefox/")?Or:vt(b,"silk/")?"Silk":vt(b,"blackberry")?"Blackberry":vt(b,"webos")?"Webos":!vt(b,"safari/")||vt(b,"chrome/")||vt(b,"crios/")||vt(b,"android")?!vt(b,"chrome/")&&!vt(b,"crios/")||vt(b,"edge/")?vt(b,"android")?"Android":(a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length?a[1]:"Other":Dr:"Safari"}var Rr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Pr(a,b){b=b||[];var t,e=[],n={};for(t in Rr)n[Rr[t]]=!0;for(t=0;t<b.length;t++)void 0!==n[b[t]]&&(delete n[b[t]],e.push(b[t]));return e.sort(),(b=e).length||(b=["FirebaseCore-web"]),"Browser"===(e=Sr())?e=Cr(n=xr()):"Worker"===e&&(e=Cr(n=xr())+"-"+e),e+"/JsCore/"+a+"/"+b.join(",")}function xr(){return l.navigator&&l.navigator.userAgent||""}function Lr(a,b){a=a.split("."),b=b||l;for(var t=0;t<a.length&&"object"==typeof b&&null!=b;t++)b=b[a[t]];return t!=a.length&&(b=void 0),b}function Mr(){try{var a=l.localStorage,b=Hr();if(a)return a.setItem(b,"1"),a.removeItem(b),!dr()||!!l.indexedDB}catch(t){return Nr()&&!!l.indexedDB}return!1}function Ur(){return(jr()||"chrome-extension:"===Fr()||Tr())&&!kr()&&Mr()&&!Nr()}function jr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return l.location&&l.location.protocol||null}function Vr(a){return!mr(a=a||xr())&&Cr(a)!=Or}function qr(a){return void 0===a?null:ur(a)}function Gr(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&null!==a[t]&&void 0!==a[t]&&(b[t]=a[t]);return b}function Br(a){if(null!==a)return JSON.parse(a)}function Hr(a){return a||Math.floor(1e9*Math.random()).toString()}function zr(a){return"Safari"!=Cr(a=a||xr())&&!a.toLowerCase().match(/iphone|ipad|ipod/)}function Wr(){var a=l.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var t=0;t<a.CP.length;t++)a.CP[t]=null}function Kr(a,b){if(a>b)throw Error("Short delay should be less than long delay!");this.a=a,this.c=b,a=xr(),b=Sr(),this.b=mr(a)||"ReactNative"===b}function Yr(){var a=l.document;return!a||void 0===a.visibilityState||"visible"==a.visibilityState}function Jr(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(t){}return null}function Xr(){return!(!Lr("fireauth.oauthhelper",l)&&!Lr("fireauth.iframe",l))}Kr.prototype.get=function(){var a=l.navigator;return!a||"boolean"!=typeof a.onLine||!jr()&&"chrome-extension:"!==Fr()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,$r={};function Zr(a){$r[a]||($r[a]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(a))}try{var ti={};Object.defineProperty(ti,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ti,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==ti.abcd}catch(a){Qr=!1}function ei(a,b,t){Qr?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:t}):a[b]=t}function ni(a,b){if(b)for(var t in b)b.hasOwnProperty(t)&&ei(a,t,b[t])}function ri(a){var b={};return ni(b,a),b}function ii(a){var b=a;if("object"==typeof a&&null!=a)for(var t in b="length"in a?[]:{},a)ei(b,t,ii(a[t]));return b}function oi(a){var b=a&&(a[hi]?"phone":null);if(!(b&&a&&a[ci]))throw new u("internal-error","Internal assert: invalid MultiFactorInfo object");ei(this,"uid",a[ci]),ei(this,"displayName",a[ai]||null);var t=null;a[ui]&&(t=new Date(a[ui]).toUTCString()),ei(this,"enrollmentTime",t),ei(this,"factorId",b)}function si(a){try{var b=new fi(a)}catch(t){b=null}return b}oi.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",ui="enrolledAt",ci="mfaEnrollmentId",hi="phoneInfo";function fi(a){oi.call(this,a),ei(this,"phoneNumber",a[hi])}function pi(a){var b={},t=a[mi],e=a[wi],n=a[bi];if(a=si(a[gi]),!n||n!=vi&&n!=yi&&!t||n==yi&&!e||n==di&&!a)throw Error("Invalid checkActionCode response!");n==yi?(b[Ei]=t||null,b[Ti]=t||null,b[Ii]=e):(b[Ei]=e||null,b[Ti]=e||null,b[Ii]=t||null),b[_i]=a||null,ei(this,Ni,n),ei(this,Ai,ii(b))}D(fi,oi),fi.prototype.v=function(){var a=fi.Za.v.call(this);return a.phoneNumber=this.phoneNumber,a};var di="REVERT_SECOND_FACTOR_ADDITION",vi="EMAIL_SIGNIN",yi="VERIFY_AND_CHANGE_EMAIL",mi="email",gi="mfaInfo",wi="newEmail",bi="requestType",Ii="email",Ei="fromEmail",_i="multiFactorInfo",Ti="previousEmail",Ai="data",Ni="operation";function Si(a){var b=Gn(a=Bn(a),ki)||null,t=Gn(a,Oi)||null,e=Gn(a,Ri)||null;if(e=e&&xi[e]||null,!b||!t||!e)throw new u("argument-error",ki+", "+Oi+"and "+Ri+" are required in a valid action code URL.");ni(this,{apiKey:b,operation:e,code:t,continueUrl:Gn(a,Di)||null,languageCode:Gn(a,Ci)||null,tenantId:Gn(a,Pi)||null})}var ki="apiKey",Oi="oobCode",Di="continueUrl",Ci="languageCode",Ri="mode",Pi="tenantId",xi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:di,signIn:vi,verifyAndChangeEmail:yi,verifyEmail:"VERIFY_EMAIL"};function Li(a){try{return new Si(a)}catch(t){return null}}function Mi(a){var b=a[qi];if(void 0===b)throw new u("missing-continue-uri");if("string"!=typeof b||"string"==typeof b&&!b.length)throw new u("invalid-continue-uri");this.h=b,this.b=this.a=null,this.g=!1;var t=a[Ui];if(t&&"object"==typeof t){b=t[Hi];var e=t[Gi];if(t=t[Bi],"string"==typeof b&&b.length){if(this.a=b,void 0!==e&&"boolean"!=typeof e)throw new u("argument-error",Gi+" property must be a boolean when specified.");if(this.g=!!e,void 0!==t&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new u("argument-error",Bi+" property must be a non empty string when specified.");this.b=t||null}else{if(void 0!==b)throw new u("argument-error",Hi+" property must be a non empty string when specified.");if(void 0!==e||void 0!==t)throw new u("missing-android-pkg-name")}}else if(void 0!==t)throw new u("argument-error",Ui+" property must be a non null object when specified.");if(this.f=null,(b=a[Vi])&&"object"==typeof b){if("string"==typeof(b=b[zi])&&b.length)this.f=b;else if(void 0!==b)throw new u("argument-error",zi+" property must be a non empty string when specified.")}else if(void 0!==b)throw new u("argument-error",Vi+" property must be a non null object when specified.");if(void 0!==(b=a[Fi])&&"boolean"!=typeof b)throw new u("argument-error",Fi+" property must be a boolean when specified.");if(this.c=!!b,void 0!==(a=a[ji])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new u("argument-error",ji+" property must be a non empty string when specified.");this.i=a||null}var Ui="android",ji="dynamicLinkDomain",Fi="handleCodeInApp",Vi="iOS",qi="url",Gi="installApp",Bi="minimumVersion",Hi="packageName",zi="bundleId";function Wi(a){var b={};for(var t in b.continueUrl=a.h,b.canHandleCodeInApp=a.c,(b.androidPackageName=a.a)&&(b.androidMinimumVersion=a.b,b.androidInstallApp=a.g),b.iOSBundleId=a.f,b.dynamicLinkDomain=a.i,b)null===b[t]&&delete b[t];return b}var Ki=null;function Yi(a){var b="";return function(a,b){function t(t){for(;e<a.length;){var p=a.charAt(e++),n=Ki[p];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return t}!function(){if(!Ki){Ki={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++)for(var e=a.concat(b[t].split("")),n=0;n<e.length;n++){var r=e[n];void 0===Ki[r]&&(Ki[r]=n)}}}();for(var e=0;;){var n=t(-1),r=t(0),g=t(64),o=t(64);if(64===o&&-1===n)break;b(n<<2|r>>4),64!=g&&(b(r<<4&240|g>>2),64!=o&&b(g<<6&192|o))}}(a,(function(t){b+=String.fromCharCode(t)})),b}function Ji(a){var b=Qi(a);if(!(b&&b.sub&&b.iss&&b.aud&&b.exp))throw Error("Invalid JWT");this.g=a,this.c=b.exp,this.h=b.sub,O(),this.a=b.provider_id||b.firebase&&b.firebase.sign_in_provider||null,this.f=b.firebase&&b.firebase.tenant||null,this.b=!!b.is_anonymous||"anonymous"==this.a}function Xi(a){try{return new Ji(a)}catch(t){return null}}function Qi(a){if(!a)return null;if(3!=(a=a.split(".")).length)return null;for(var b=(4-(a=a[1]).length%4)%4,t=0;t<b;t++)a+=".";try{return JSON.parse(Yi(a))}catch(t){}return null}Ji.prototype.S=function(){return this.f},Ji.prototype.i=function(){return this.b},Ji.prototype.toString=function(){return this.g};var $i="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Zi=["client_id","response_type","scope","redirect_uri","state"],to={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Zi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Zi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Zi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:$i},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function eo(a){for(var b in to)if(to[b].ea==a)return to[b];return null}function no(a){var b={};b["facebook.com"]=ao,b["google.com"]=co,b["github.com"]=uo,b["twitter.com"]=ho;var t=a&&a[io];try{if(t)return b[t]?new b[t](a):new so(a);if(void 0!==a[ro])return new oo(a)}catch(t){}return null}var ro="idToken",io="providerId";function oo(a){var b=a[io];if(!b&&a[ro]){var t=Xi(a[ro]);t&&t.a&&(b=t.a)}if(!b)throw Error("Invalid additional user info!");"anonymous"!=b&&"custom"!=b||(b=null),t=!1,void 0!==a.isNewUser?t=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(t=!0),ei(this,"providerId",b),ei(this,"isNewUser",t)}function so(a){oo.call(this,a),ei(this,"profile",ii((a=Br(a.rawUserInfo||"{}"))||{}))}function ao(a){if(so.call(this,a),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(a){if(so.call(this,a),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",this.profile&&this.profile.login||null)}function co(a){if(so.call(this,a),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ho(a){if(so.call(this,a),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ei(this,"username",a.screenName||null)}function fo(a){var b=Bn(a),t=Gn(b,"link"),e=Gn(Bn(t),"link");return b=Gn(b,"deep_link_id"),Gn(Bn(b),"link")||b||e||t||a}function lo(a,b){if(!a&&!b)throw new u("internal-error","Internal assert: no raw session string available");if(a&&b)throw new u("internal-error","Internal assert: unable to determine the session type");this.a=a||null,this.b=b||null,this.type=this.a?po:vo}D(so,oo),D(ao,so),D(uo,so),D(co,so),D(ho,so);var po="enroll",vo="signin";function yo(){}function mo(a,b){return a.then((function(t){if(t[na]){var e=Xi(t[na]);if(!e||b!=e.h)throw new u("user-mismatch");return t}throw new u("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==P+"user-not-found"?new u("user-mismatch"):t}))}function go(a,b){if(!b)throw new u("internal-error","failed to construct a credential");this.a=b,ei(this,"providerId",a),ei(this,"signInMethod",a)}function wo(a){return{pendingToken:a.a,requestUri:"http://localhost"}}function bo(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf("saml.")&&a.pendingToken)try{return new go(a.providerId,a.pendingToken)}catch(t){}return null}function Io(a,b,t){if(this.a=null,b.idToken||b.accessToken)b.idToken&&ei(this,"idToken",b.idToken),b.accessToken&&ei(this,"accessToken",b.accessToken),b.nonce&&!b.pendingToken&&ei(this,"nonce",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else{if(!b.oauthToken||!b.oauthTokenSecret)throw new u("internal-error","failed to construct a credential");ei(this,"accessToken",b.oauthToken),ei(this,"secret",b.oauthTokenSecret)}ei(this,"providerId",a),ei(this,"signInMethod",t)}function Eo(a){var b={};return a.idToken&&(b.id_token=a.idToken),a.accessToken&&(b.access_token=a.accessToken),a.secret&&(b.oauth_token_secret=a.secret),b.providerId=a.providerId,a.nonce&&!a.a&&(b.nonce=a.nonce),b={postBody:nr(b).toString(),requestUri:"http://localhost"},a.a&&(delete b.postBody,b.pendingToken=a.a),b}function _o(a){if(a&&a.providerId&&a.signInMethod){var b={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new Io(a.providerId,b,a.signInMethod)}catch(t){}}return null}function To(a,b){this.Oc=b||[],ni(this,{providerId:a,isOAuthProvider:!0}),this.Fb={},this.lb=(eo(a)||{}).Ha||null,this.kb=null}function Ao(a){if("string"!=typeof a||0!=a.indexOf("saml."))throw new u("argument-error",'SAML provider IDs must be prefixed with "saml."');To.call(this,a,[])}function No(a){To.call(this,a,Zi),this.a=[]}function So(){No.call(this,"facebook.com")}function ko(a){if(!a)throw new u("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return q(a)&&(b=a.accessToken),(new So).credential({accessToken:b})}function Oo(){No.call(this,"github.com")}function Do(a){if(!a)throw new u("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return q(a)&&(b=a.accessToken),(new Oo).credential({accessToken:b})}function Co(){No.call(this,"google.com"),this.Aa("profile")}function Ro(a,b){var t=a;return q(a)&&(t=a.idToken,b=a.accessToken),(new Co).credential({idToken:t,accessToken:b})}function Po(){To.call(this,"twitter.com",$i)}function xo(a,b){var t=a;if(q(t)||(t={oauthToken:a,oauthTokenSecret:b}),!t.oauthToken||!t.oauthTokenSecret)throw new u("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Io("twitter.com",t,"twitter.com")}function Lo(a,b,t){this.a=a,this.f=b,ei(this,"providerId","password"),ei(this,"signInMethod",t===Uo.EMAIL_LINK_SIGN_IN_METHOD?Uo.EMAIL_LINK_SIGN_IN_METHOD:Uo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Mo(a){return a&&a.email&&a.password?new Lo(a.email,a.password,a.signInMethod):null}function Uo(){ni(this,{providerId:"password",isOAuthProvider:!1})}function jo(a,b){if(!(b=Fo(b)))throw new u("argument-error","Invalid email link!");return new Lo(a,b.code,Uo.EMAIL_LINK_SIGN_IN_METHOD)}function Fo(a){return(a=Li(a=fo(a)))&&a.operation===vi?a:null}function Vo(a){if(!(a.bb&&a.ab||a.Ja&&a.da))throw new u("internal-error");this.a=a,ei(this,"providerId","phone"),this.ea="phone",ei(this,"signInMethod","phone")}function qo(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var b={};return J(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(t){a[t]&&(b[t]=a[t])})),new Vo(b)}return null}function Go(a){return a.a.Ja&&a.a.da?{temporaryProof:a.a.Ja,phoneNumber:a.a.da}:{sessionInfo:a.a.bb,code:a.a.ab}}function Bo(a){try{this.a=a||r.a.auth()}catch(t){throw new u("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ni(this,{providerId:"phone",isOAuthProvider:!1})}function Ho(a,b){if(!a)throw new u("missing-verification-id");if(!b)throw new u("missing-verification-code");return new Vo({bb:a,ab:b})}function zo(a){if(a.temporaryProof&&a.phoneNumber)return new Vo({Ja:a.temporaryProof,da:a.phoneNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var t=a&&a.oauthAccessToken,e=a&&a.oauthTokenSecret,n=a&&a.nonce,r=a&&a.oauthIdToken,g=a&&a.pendingToken;try{switch(b){case"google.com":return Ro(r,t);case"facebook.com":return ko(t);case"github.com":return Do(t);case"twitter.com":return xo(t,e);default:return t||e||r||g?g?0==b.indexOf("saml.")?new go(b,g):new Io(b,{pendingToken:g,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new No(b).credential({idToken:r,accessToken:t,rawNonce:n}):null}}catch(t){return null}}function Wo(a){if(!a.isOAuthProvider)throw new u("invalid-oauth-provider")}function Ko(a,b,t,e,n,r,g){if(this.c=a,this.b=b||null,this.g=t||null,this.f=e||null,this.i=r||null,this.h=g||null,this.a=n||null,!this.g&&!this.a)throw new u("invalid-auth-event");if(this.g&&this.a)throw new u("invalid-auth-event");if(this.g&&!this.f)throw new u("invalid-auth-event")}function Yo(a){return(a=a||{}).type?new Ko(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&C(a.error),a.postBody,a.tenantId):null}function Jo(){this.b=null,this.a=[]}lo.prototype.Fa=function(){return this.a?xe(this.a):xe(this.b)},lo.prototype.v=function(){return this.type==po?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},yo.prototype.ia=function(){},yo.prototype.b=function(){},yo.prototype.c=function(){},yo.prototype.v=function(){},go.prototype.ia=function(a){return Ea(a,wo(this))},go.prototype.b=function(a,b){var t=wo(this);return t.idToken=b,_a(a,t)},go.prototype.c=function(a,b){return mo(Ta(a,wo(this)),b)},go.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Io.prototype.ia=function(a){return Ea(a,Eo(this))},Io.prototype.b=function(a,b){var t=Eo(this);return t.idToken=b,_a(a,t)},Io.prototype.c=function(a,b){return mo(Ta(a,Eo(this)),b)},Io.prototype.v=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},To.prototype.Ia=function(a){return this.Fb=Et(a),this},D(Ao,To),D(No,To),No.prototype.Aa=function(a){return Z(this.a,a)||this.a.push(a),this},No.prototype.Nb=function(){return it(this.a)},No.prototype.credential=function(a,b){var t;if(!(t=q(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:b||null}).idToken&&!t.accessToken)throw new u("argument-error","credential failed: must provide the ID token and/or the access token.");return new Io(this.providerId,t,this.providerId)},D(So,No),ei(So,"PROVIDER_ID","facebook.com"),ei(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),D(Oo,No),ei(Oo,"PROVIDER_ID","github.com"),ei(Oo,"GITHUB_SIGN_IN_METHOD","github.com"),D(Co,No),ei(Co,"PROVIDER_ID","google.com"),ei(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),D(Po,To),ei(Po,"PROVIDER_ID","twitter.com"),ei(Po,"TWITTER_SIGN_IN_METHOD","twitter.com"),Lo.prototype.ia=function(a){return this.signInMethod==Uo.EMAIL_LINK_SIGN_IN_METHOD?ou(a,Ra,{email:this.a,oobCode:this.f}):ou(a,tu,{email:this.a,password:this.f})},Lo.prototype.b=function(a,b){return this.signInMethod==Uo.EMAIL_LINK_SIGN_IN_METHOD?ou(a,Pa,{idToken:b,email:this.a,oobCode:this.f}):ou(a,Wa,{idToken:b,email:this.a,password:this.f})},Lo.prototype.c=function(a,b){return mo(this.ia(a),b)},Lo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ni(Uo,{PROVIDER_ID:"password"}),ni(Uo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ni(Uo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Vo.prototype.ia=function(a){return a.cb(Go(this))},Vo.prototype.b=function(a,b){var t=Go(this);return t.idToken=b,ou(a,nu,t)},Vo.prototype.c=function(a,b){var t=Go(this);return t.operation="REAUTH",mo(a=ou(a,ru,t),b)},Vo.prototype.v=function(){var a={providerId:"phone"};return this.a.bb&&(a.verificationId=this.a.bb),this.a.ab&&(a.verificationCode=this.a.ab),this.a.Ja&&(a.temporaryProof=this.a.Ja),this.a.da&&(a.phoneNumber=this.a.da),a},Bo.prototype.cb=function(a,b){var t=this.a.b;return xe(b.verify()).then((function(e){if("string"!=typeof e)throw new u("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(b.type){case"recaptcha":var n=q(a)?a.session:null,r=q(a)?a.phoneNumber:a;return(n&&n.type==po?n.Fa().then((function(n){return function(a,b){return ou(a,Ya,b).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(t,{idToken:n,phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:e}})})):n&&n.type==vo?n.Fa().then((function(n){return function(a,b){return ou(a,Ja,b).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(t,{mfaPendingCredential:n,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}})})):function(a,b){return ou(a,Ha,b)}(t,{phoneNumber:r,recaptchaToken:e})).then((function(t){return"function"==typeof b.reset&&b.reset(),t}),(function(t){throw"function"==typeof b.reset&&b.reset(),t}));default:throw new u("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ni(Bo,{PROVIDER_ID:"phone"}),ni(Bo,{PHONE_SIGN_IN_METHOD:"phone"}),Ko.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join("-")},Ko.prototype.S=function(){return this.h},Ko.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Xo,Qo=null;function th(a){var b="unauthorized-domain",t=void 0,e=Bn(a);a=e.b,"chrome-extension"==(e=e.f)?t=Jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==e||"https"==e?t=Jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment",u.call(this,b,t)}function $o(a,b,t){u.call(this,a,t),(a=b||{}).Gb&&ei(this,"email",a.Gb),a.da&&ei(this,"phoneNumber",a.da),a.credential&&ei(this,"credential",a.credential),a.Wb&&ei(this,"tenantId",a.Wb)}function Zo(a){if(a.code){var b=a.code||"";0==b.indexOf(P)&&(b=b.substring(P.length));var t={credential:zo(a),Wb:a.tenantId};if(a.email)t.Gb=a.email;else if(a.phoneNumber)t.da=a.phoneNumber;else if(!t.credential)return new u(b,a.message||void 0);return new $o(b,t,a.message)}return null}function ts(){}function es(a){return a.c||(a.c=a.b())}function ns(){}function rs(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<b.length;t++){var e=b[t];try{return new ActiveXObject(e),a.f=e}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}function is(){}function os(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.oc,this),this.a.onerror=S(this.Pb,this),this.a.onprogress=S(this.pc,this),this.a.ontimeout=S(this.tc,this)}function ss(a,b){a.readyState=b,a.onreadystatechange&&a.onreadystatechange()}function as(a,b,t){this.reset(a,b,t,void 0,void 0)}D(th,u),D($o,u),$o.prototype.v=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var b=this.credential&&this.credential.v();return b&&Tt(a,b),a},$o.prototype.toJSON=function(){return this.v()},ts.prototype.c=null,D(ns,ts),ns.prototype.a=function(){var a=rs(this);return a?new ActiveXObject(a):new XMLHttpRequest},ns.prototype.b=function(){var a={};return rs(this)&&(a[0]=!0,a[1]=!0),a},Xo=new ns,D(is,ts),is.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new os;throw Error("Unsupported browser")},is.prototype.b=function(){return{}},(e=os.prototype).open=function(a,b,t){if(null!=t&&!t)throw Error("Only async requests are supported.");this.a.open(a,b)},e.send=function(a){if(a){if("string"!=typeof a)throw Error("Only string data is supported");this.a.send(a)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ss(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText="",ss(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,ss(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},as.prototype.a=null;function us(a){this.f=a,this.b=this.c=this.a=null}function cs(a,b){this.name=a,this.value=b}as.prototype.reset=function(a,b,t,e,n){"number"==typeof n||0,e||O(),delete this.a},cs.prototype.toString=function(){return this.name};var hs=new cs("SEVERE",1e3),fs=new cs("WARNING",900),ls=new cs("CONFIG",700),ps=new cs("FINE",500);us.prototype.log=function(a,b,t){if(a.value>=function t(a){return a.c?a.c:a.a?t(a.a):(V("Root logger has no level set."),null)}(this).value)for(I(b)&&(b=b()),a=new as(a,String(b),this.f),t&&(a.a=t),t=this;t;)t=t.a};var ds={},vs=null;function ys(a){var b;if(vs||(vs=new us(""),ds[""]=vs,vs.c=ls),!(b=ds[a])){b=new us(a);var t=a.lastIndexOf("."),e=a.substr(t+1);(t=ys(a.substr(0,t))).b||(t.b={}),t.b[e]=b,b.a=t,ds[a]=b}return b}function ms(a,b){a&&a.log(ps,b,void 0)}function gs(a){this.f=a}function ws(a){An.call(this),this.s=a,this.readyState=bs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ys("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}D(gs,ts),gs.prototype.a=function(){return new ws(this.f)},gs.prototype.b=function(a){return function(){return a}}({}),D(ws,An);var bs=0;function Is(a){a.c.read().then(a.nc.bind(a)).catch(a.Sa.bind(a))}function Es(a,b){b&&a.f&&(a.status=a.f.status,a.statusText=a.f.statusText),a.readyState=4,a.f=null,a.c=null,a.l=null,_s(a)}function _s(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function Ts(a){An.call(this),this.headers=new Pn,this.D=a||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=As,this.w=this.R=!1}(e=ws.prototype).open=function(a,b){if(this.readyState!=bs)throw this.abort(),Error("Error reopening a connection");this.m=a,this.g=b,this.readyState=1,_s(this)},e.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var b={headers:this.i,method:this.m,credentials:void 0,cache:void 0};a&&(b.body=a),this.s.fetch(new Request(this.g,b)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Es(this,!1)),this.readyState=bs},e.sc=function(a){this.a&&(this.f=a,this.b||(this.b=a.headers,this.readyState=2,_s(this)),this.a&&(this.readyState=3,_s(this),this.a&&("arraybuffer"===this.responseType?a.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.l=new TextDecoder,Is(this)):a.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(a){if(this.a){var b=this.l.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b),a.done?Es(this,!0):_s(this),3==this.readyState&&Is(this)}},e.rc=function(a){this.a&&(this.response=this.responseText=a,Es(this,!0))},e.qc=function(a){this.a&&(this.response=a,Es(this,!0))},e.Sa=function(a){var b=this.h;b&&b.log(fs,"Failed to fetch url "+this.g,a instanceof Error?a:Error(a)),this.a&&Es(this,!0)},e.setRequestHeader=function(a,b){this.i.append(a,b)},e.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.h)&&a.log(fs,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var a=this.h;return a&&a.log(fs,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}a=[];for(var b=this.b.entries(),t=b.next();!t.done;)t=t.value,a.push(t[0]+": "+t[1]),t=b.next();return a.join("\r\n")},D(Ts,An);var As="";Ts.prototype.b=ys("goog.net.XhrIo");var Ns=/^https?$/i,Ss=["POST","PUT"];function ks(a,b,t,e,n){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+b);t=t?t.toUpperCase():"GET",a.l=b,a.h="",a.P=t,a.N=!1,a.c=!0,a.a=a.D?a.D.a():Xo.a(),a.B=a.D?es(a.D):es(Xo),a.a.onreadystatechange=S(a.Sb,a);try{ms(a.b,Us(a,"Opening Xhr")),a.O=!0,a.a.open(t,String(b),!0),a.O=!1}catch(t){return ms(a.b,Us(a,"Error opening Xhr: "+t.message)),void Ds(a,t)}b=e||"";var r=new Pn(a.headers);n&&function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(w(a)||"string"==typeof a)J(a,b,void 0);else for(var t=Rn(a),e=Cn(a),n=e.length,r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}(n,(function(g,t){r.set(t,g)})),n=function(a){t:{for(var b=Os,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(r.X()),e=l.FormData&&b instanceof l.FormData,!Z(Ss,t)||n||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(g,t){this.a.setRequestHeader(t,g)}),a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.R&&(a.a.withCredentials=a.R);try{xs(a),0<a.g&&(a.w=function(a){return te&&fe(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),ms(a.b,Us(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.w)),a.w?(a.a.timeout=a.g,a.a.ontimeout=S(a.Ka,a)):a.s=On(a.Ka,a.g,a)),ms(a.b,Us(a,"Sending request")),a.i=!0,a.a.send(b),a.i=!1}catch(t){ms(a.b,Us(a,"Send error: "+t.message)),Ds(a,t)}}function Os(a){return"content-type"==a.toLowerCase()}function Ds(a,b){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=b,Cs(a),Ps(a)}function Cs(a){a.N||(a.N=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Rs(a){if(a.c&&void 0!==f)if(a.B[1]&&4==Ls(a)&&2==Ms(a))ms(a.b,Us(a,"Local request error detected and ignored"));else if(a.i&&4==Ls(a))On(a.Sb,0,a);else if(a.dispatchEvent("readystatechange"),4==Ls(a)){ms(a.b,Us(a,"Request complete")),a.c=!1;try{var t,b=Ms(a);t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.l).match(Mn)[1]||null;if(!r&&l.self&&l.self.location){var g=l.self.location.protocol;r=g.substr(0,g.length-1)}n=!Ns.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var o=2<Ls(a)?a.a.statusText:""}catch(t){ms(a.b,"Can not get status: "+t.message),o=""}a.h=o+" ["+Ms(a)+"]",Cs(a)}}finally{Ps(a)}}}function Ps(a,b){if(a.a){xs(a);var t=a.a,e=a.B[0]?y:null;a.a=null,a.B=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){(a=a.b)&&a.log(hs,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function xs(a){a.a&&a.w&&(a.a.ontimeout=null),a.s&&(l.clearTimeout(a.s),a.s=null)}function Ls(a){return a.a?a.a.readyState:0}function Ms(a){try{return 2<Ls(a)?a.a.status:-1}catch(t){return-1}}function Us(a,b){return b+" ["+a.P+" "+a.l+" "+Ms(a)+"]"}function li(a){var b=Ys;this.g=[],this.w=b,this.s=a||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function js(a,b,t){a.a=!0,a.c=t,a.f=!b,Gs(a)}function Fs(a){if(a.a){if(!a.u)throw new Bs(a);a.u=!1}}function Vs(a,b,t,e){a.g.push([b,t,e]),a.a&&Gs(a)}function qs(a){return $(a.g,(function(b){return I(b[1])}))}function Gs(a){if(a.h&&a.a&&qs(a)){var b=a.h,t=Ws[b];t&&(l.clearTimeout(t.a),delete Ws[b]),a.h=0}a.b&&(a.b.l--,delete a.b),b=a.c;for(var e=t=!1;a.g.length&&!a.i;){var n=a.g.shift(),r=n[0],g=n[1];if(n=n[2],r=a.f?g:r)try{var o=r.call(n||a.s,b);void 0!==o&&(a.f=a.f&&(o==b||o instanceof Error),a.c=b=o),(U(b)||"function"==typeof l.Promise&&b instanceof l.Promise)&&(e=!0,a.i=!0)}catch(e){b=e,a.f=!0,qs(a)||(t=!0)}}a.c=b,e&&(o=S(a.m,a,!0),e=S(a.m,a,!1),b instanceof li?(Vs(b,o,e),b.B=!0):b.then(o,e)),t&&(b=new zs(b),Ws[b.a]=b,a.h=b.a)}function Bs(){j.call(this)}function Hs(){j.call(this)}function zs(a){this.a=l.setTimeout(S(this.c,this),0),this.b=a}(e=Ts.prototype).Ka=function(){void 0!==f&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ms(this.b,Us(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ms(this.b,Us(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ps(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ps(this,!0)),Ts.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?Rs(this):this.Hc())},e.Hc=function(){Rs(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case As:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(hs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ms(this.b,"Can not get response: "+t.message),null}},li.prototype.cancel=function(a){if(this.a)this.c instanceof li&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b,a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(a=new Hs(this),Fs(this),js(this,!1,a))}},li.prototype.m=function(a,b){this.i=!1,js(this,a,b)},li.prototype.then=function(a,b,t){var e,n,r=new Se((function(g,t){e=g,n=t}));return Vs(this,e,(function(g){g instanceof Hs?r.cancel():n(g)})),r.then(a,b,t)},li.prototype.$goog_Thenable=!0,D(Bs,j),Bs.prototype.message="Deferred has already fired",Bs.prototype.name="AlreadyCalledError",D(Hs,j),Hs.prototype.message="Deferred was canceled",Hs.prototype.name="CanceledError",zs.prototype.c=function(){throw delete Ws[this.a],this.b};var Ws={};function Ks(a){var b={},t=b.document||document,e=Rt(a).toString(),n=we(document,"SCRIPT"),r={Tb:n,Ka:void 0},g=new li(r),o=null,c=null!=b.timeout?b.timeout:5e3;return 0<c&&(o=window.setTimeout((function(){Js(n,!0);var p=new $s(Qs,"Timeout reached for loading script "+e);Fs(g),js(g,!1,p)}),c),r.Ka=o),n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(Js(n,b.ud||!1,o),Fs(g),js(g,!0,null))},n.onerror=function(){Js(n,!0,o);var p=new $s(Xs,"Error while loading script "+e);Fs(g),js(g,!1,p)},Tt(r=b.attributes||{},{type:"text/javascript",charset:"UTF-8"}),de(n,r),function(a,b){At(a,"HTMLScriptElement"),a.src=Rt(b),null===v&&(v=(b=(b=l.document).querySelector&&b.querySelector("script[nonce]"))&&(b=b.nonce||b.getAttribute("nonce"))&&d.test(b)?b:""),(b=v)&&a.setAttribute("nonce",b)}(n,a),function(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement}(t).appendChild(n),g}function Ys(){if(this&&this.Tb){var a=this.Tb;a&&"SCRIPT"==a.tagName&&Js(a,!0,this.Ka)}}function Js(a,b,t){null!=t&&l.clearTimeout(t),a.onload=y,a.onerror=y,a.onreadystatechange=y,b&&window.setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),0)}var Xs=0,Qs=1;function $s(a,b){var t="Jsloader error (code #"+a+")";b&&(t+=": "+b),j.call(this,t),this.code=a}function Zs(a){this.f=a}function ta(a,b,t){if(this.c=a,a=b||{},this.u=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=a.secureTokenTimeout||ra,this.g=Et(a.secureTokenHeaders||ia),this.h=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=a.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=a.firebaseTimeout||oa,this.a=Et(a.firebaseHeaders||sa),t&&(this.a["X-Client-Version"]=t,this.g["X-Client-Version"]=t),t="Node"==Sr(),!(t=l.XMLHttpRequest||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!Nr())throw new u("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Nr()?this.f=new gs(self):kr()?this.f=new Zs(t):this.f=new is,this.b=null}D($s,j),D(Zs,ts),Zs.prototype.a=function(){return new this.f},Zs.prototype.b=function(){return{}};var ea,na="idToken",ra=new Kr(3e4,6e4),ia={"Content-Type":"application/x-www-form-urlencoded"},oa=new Kr(3e4,6e4),sa={"Content-Type":"application/json"};function aa(a,b){b?a.a["X-Firebase-Locale"]=b:delete a.a["X-Firebase-Locale"]}function ua(a,b){b?(a.a["X-Client-Version"]=b,a.g["X-Client-Version"]=b):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}function ca(a,b,t,e,n,r,g){(function(){var a=xr();return!((a=Cr(a)!=Dr?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a)&&(!te||!ce||9<ce)})()||Nr()?a=S(a.w,a):(ea||(ea=new Se((function(t,e){!function(a,b){if(((window.gapi||{}).client||{}).request)a();else{l[fa]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))},function(a,b){Vs(a,null,b,void 0)}(Ks(Pt(ha,{onload:fa})),(function(){b(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),a=S(a.s,a)),a(b,t,e,n,r,g)}ta.prototype.S=function(){return this.b},ta.prototype.w=function(a,b,t,e,n,r){if(Nr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new u("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var g=new Ts(this.f);if(r){g.g=Math.max(0,r);var o=setTimeout((function(){g.dispatchEvent("timeout")}),r)}Nn(g,"complete",(function(){o&&clearTimeout(o);var t=null;try{t=JSON.parse(function(a){try{return a.a?a.a.responseText:""}catch(t){return ms(a.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(e){t=null}b&&b(t)})),Sn(g,"ready",(function(){o&&clearTimeout(o),Qe(this)})),Sn(g,"timeout",(function(){o&&clearTimeout(o),Qe(this),b&&b(null)})),ks(g,a,t,e,n)};var ha=new Nt(Ot,"https://apis.google.com/js/client.js?onload=%{onload}"),fa="__fcb"+Math.floor(1e6*Math.random()).toString();function la(a,b,t,e,n,r,g){var o=Bn(b+t);qn(o,"key",a.c),g&&qn(o,"cb",O().toString());var c="GET"==e;if(c)for(var p in n)n.hasOwnProperty(p)&&qn(o,p,n[p]);return new Se((function(t,h){ca(a,o.toString(),(function(e){e?e.error?h(au(e,r||{})):t(e):h(new u("network-request-failed"))}),e,c?void 0:ur(Gr(n)),a.a,a.i.get())}))}function pa(a){if("string"!=typeof(a=a.email)||!Er.test(a))throw new u("invalid-email")}function da(a){"email"in a&&pa(a)}function va(a){if(!a[na]){if(a.mfaPendingCredential)throw new u("multi-factor-auth-required",null,Et(a));throw new u("internal-error")}}function ya(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new u("internal-error")}else{if(!a.sessionInfo)throw new u("missing-verification-id");if(!a.code)throw new u("missing-verification-code")}}ta.prototype.s=function(a,b,t,e,n){var r=this;ea.then((function(){window.gapi.client.setApiKey(r.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:t,body:e,headers:n,authType:"none",callback:function(t){window.gapi.auth.setToken(g),b&&b(t)}})})).o((function(g){b&&b({error:{message:g&&g.message||"CORS_UNSUPPORTED"}})}))},ta.prototype.vb=function(){return ou(this,Ka,{})},ta.prototype.xb=function(a,b){return ou(this,za,{idToken:a,email:b})},ta.prototype.yb=function(a,b){return ou(this,Wa,{idToken:a,password:b})};var ma={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(a){if(!a.phoneVerificationInfo)throw new u("internal-error");if(!a.phoneVerificationInfo.sessionInfo)throw new u("missing-verification-id");if(!a.phoneVerificationInfo.code)throw new u("missing-verification-code")}function wa(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new u("internal-error")}function ba(a,b){return b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf("oidc.")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&(ir(a=new Zn(a.postBody),"nonce")&&(b.nonce=a.get("nonce")))),b}function Ia(a){var b=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",b=Zo(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=Zo(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",b=Zo(a)):a.errorMessage&&(b=su(a.errorMessage)),b)throw b;va(a)}function Ea(a,b){return b.returnIdpCredential=!0,ou(a,Xa,b)}function _a(a,b){return b.returnIdpCredential=!0,ou(a,$a,b)}function Ta(a,b){return b.returnIdpCredential=!0,b.autoCreate=!1,ou(a,Qa,b)}function Aa(a){if(!a.oobCode)throw new u("invalid-action-code")}(e=ta.prototype).zb=function(a,b){var t={idToken:a},e=[];return bt(ma,(function(n,r){var g=b[r];null===g?e.push(n):r in b&&(t[r]=g)})),e.length&&(t.deleteAttribute=e),ou(this,za,t)},e.rb=function(a,b){return Tt(a={requestType:"PASSWORD_RESET",email:a},b),ou(this,Va,a)},e.sb=function(a,b){return Tt(a={requestType:"EMAIL_SIGNIN",email:a},b),ou(this,Ua,a)},e.qb=function(a,b){return Tt(a={requestType:"VERIFY_EMAIL",idToken:a},b),ou(this,ja,a)},e.Ab=function(a,b,t){return Tt(a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:b},t),ou(this,Fa,a)},e.cb=function(a){return ou(this,eu,a)},e.jb=function(a,b){return ou(this,Ba,{oobCode:a,newPassword:b})},e.Pa=function(a){return ou(this,Sa,{oobCode:a})},e.fb=function(a){return ou(this,Na,{oobCode:a})};var Na={endpoint:"setAccountInfo",A:Aa,Y:"email",C:!0},Sa={endpoint:"resetPassword",A:Aa,G:function(a){var b=a.requestType;if(!b||!a.email&&"EMAIL_SIGNIN"!=b&&"VERIFY_AND_CHANGE_EMAIL"!=b)throw new u("internal-error")},C:!0},ka={endpoint:"signupNewUser",A:function(a){if(pa(a),!a.password)throw new u("weak-password")},G:va,U:!0,C:!0},Oa={endpoint:"createAuthUri",C:!0},Da={endpoint:"deleteAccount",M:["idToken"]},Ca={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(a){if("array"!=m(a.deleteProvider))throw new u("internal-error")}},Ra={endpoint:"emailLinkSignin",M:["email","oobCode"],A:pa,G:va,U:!0,C:!0},Pa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:pa,G:va,U:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ga,G:va,C:!0,La:!0},La={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:va,C:!0,La:!0},Ma={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(a){if("EMAIL_SIGNIN"!=a.requestType)throw new u("internal-error");pa(a)},Y:"email",C:!0},ja={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new u("internal-error")},Y:"email",C:!0},Fa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(a){if("VERIFY_AND_CHANGE_EMAIL"!=a.requestType)throw new u("internal-error")},Y:"email",C:!0},Va={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(a){if("PASSWORD_RESET"!=a.requestType)throw new u("internal-error");pa(a)},Y:"email",C:!0},qa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ga={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(a){if(!a.recaptchaSiteKey)throw new u("internal-error")}},Ba={endpoint:"resetPassword",A:Aa,Y:"email",C:!0},Ha={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},za={endpoint:"setAccountInfo",M:["idToken"],A:da,U:!0},Wa={endpoint:"setAccountInfo",M:["idToken"],A:function(a){if(da(a),!a.password)throw new u("weak-password")},G:va,U:!0},Ka={endpoint:"signupNewUser",G:va,U:!0,C:!0},Ya={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(a){if(!a.phoneEnrollmentInfo)throw new u("internal-error");if(!a.phoneEnrollmentInfo.phoneNumber)throw new u("missing-phone-number");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new u("missing-app-credential")},G:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new u("internal-error")},C:!0,La:!0},Ja={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new u("missing-app-credential")},G:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new u("internal-error")},C:!0,La:!0},Xa={endpoint:"verifyAssertion",A:wa,Wa:ba,G:Ia,U:!0,C:!0},Qa={endpoint:"verifyAssertion",A:wa,Wa:ba,G:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new u("user-not-found");if(a.errorMessage)throw su(a.errorMessage);va(a)},U:!0,C:!0},$a={endpoint:"verifyAssertion",A:function(a){if(wa(a),!a.idToken)throw new u("internal-error")},Wa:ba,G:Ia,U:!0},Za={endpoint:"verifyCustomToken",A:function(a){if(!a.token)throw new u("invalid-custom-token")},G:va,U:!0,C:!0},tu={endpoint:"verifyPassword",A:function(a){if(pa(a),!a.password)throw new u("wrong-password")},G:va,U:!0,C:!0},eu={endpoint:"verifyPhoneNumber",A:ya,G:va,C:!0},nu={endpoint:"verifyPhoneNumber",A:function(a){if(!a.idToken)throw new u("internal-error");ya(a)},G:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",Zo(a);va(a)}},ru={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ya,G:va,C:!0},iu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(a){if(!!a[na]^!!a.refreshToken)throw new u("internal-error")},C:!0,La:!0};function ou(a,b,t){if(!function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var t=0;t<b.length;t++){var e=a[b[t]];if(null==e||""===e)return!1}return!0}(t,b.M))return Le(new u("internal-error"));var e,n=!!b.La,r=b.Rb||"POST";return xe(t).then(b.A).then((function(){return b.U&&(t.returnSecureToken=!0),b.C&&a.b&&void 0===t.tenantId&&(t.tenantId=a.b),la(a,n?a.l:a.h,b.endpoint,r,t,b.Eb,b.hb||!1)})).then((function(g){return e=g,b.Wa?b.Wa(t,e):e})).then(b.G).then((function(){if(!b.Y)return e;if(!(b.Y in e))throw new u("internal-error");return e[b.Y]}))}function su(a){return au({error:{errors:[{message:a}],code:400,message:a}})}function au(a,b){var t=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",e={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(t=e[t]?new u(e[t]):null)return t;for(var n in t=a.error&&a.error.message||"",Tt(e={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},b||{}),b=(b=t.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<b.length?b[1]:void 0,e)if(0===t.indexOf(n))return new u(e[n],b);return!b&&a&&(b=qr(a)),new u("internal-error",b)}function uu(a){this.b=a,this.a=null,this.nb=function(a){return(lu||(lu=new Se((function(a,b){function t(){Wr(),Lr("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Wr(),b(Error("Network Error"))},timeout:hu.get()})}if(Lr("gapi.iframes.Iframe"))a();else if(Lr("gapi.load"))t();else{var e="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[e]=function(){Lr("gapi.load")?t():b(Error("Network Error"))},xe(Ks(e=Pt(cu,{onload:e}))).o((function(){b(Error("Network Error"))}))}})).o((function(a){throw lu=null,a})))).then((function(){return new Se((function(b,t){Lr("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:Lr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(e){function n(){clearTimeout(r),b()}a.a=e,a.a.restyle({setHideOnLeave:!1});var r=setTimeout((function(){t(Error("Network Error"))}),fu.get());e.ping(n).then(n,(function(){t(Error("Network Error"))}))}))}))}))}(this)}var cu=new Nt(Ot,"https://apis.google.com/js/api.js?onload=%{onload}"),hu=new Kr(3e4,6e4),fu=new Kr(5e3,15e3),lu=null;function pu(a,b,t){this.i=a,this.g=b,this.h=t,this.f=null,this.a=Hn(this.i,"/__/auth/iframe"),qn(this.a,"apiKey",this.g),qn(this.a,"appName",this.h),this.b=null,this.c=[]}function du(a,b,t,e,n){this.s=a,this.m=b,this.c=t,this.u=e,this.i=this.g=this.l=null,this.a=n,this.h=this.f=null}function vu(a){try{return r.a.app(a).auth().Ea()}catch(t){return[]}}function yu(a,b,t,e,n){this.u=a,this.f=b,this.b=t,this.c=e||null,this.h=n||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function mu(a){var b=vr();return function(a){return ou(a,qa,{}).then((function(b){return b.authorizedDomains||[]}))}(a).then((function(t){t:{var e=Bn(b),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var g=t[r],o=e,c=n;if(0==g.indexOf("chrome-extension://")?o=Bn(g).b==o&&"chrome-extension"==c:"http"!=c&&"https"!=c?o=!1:Ir.test(g)?o=o==g:(g=g.split(".").join("\\."),o=new RegExp("^(.+\\."+g+"|"+g+")$","i").test(o)),o){t=!0;break t}}t=!1}if(!t)throw new th(vr())}))}function gu(a){return a.l||(a.l=_r().then((function(){if(!a.s){var b=a.c,t=a.h,e=vu(a.b),n=new pu(a.u,a.f,a.b);n.f=b,n.b=t,n.c=it(e||[]),a.s=n.toString()}a.i=new uu(a.s),function(a){if(!a.i)throw Error("IfcHandler must be initialized!");!function(a,b){a.nb.then((function(){a.a.register("authEvent",b,Lr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(a.i,(function(b){var t={};if(b&&b.authEvent){var e=!1;for(b=Yo(b.authEvent),t=0;t<a.g.length;t++)e=a.g[t](b)||e;return(t={}).status=e?"ACK":"ERROR",xe(t)}return t.status="ERROR",xe(t)}))}(a)}))),a.l}function wu(a){return a.m||(a.w=a.c?Pr(a.c,vu(a.b)):null,a.m=new ta(a.f,M(a.h),a.w)),a.m}function bu(a,b,t,e,n,r,g,o,c,p,h){return(a=new du(a,b,t,e,n)).l=r,a.g=g,a.i=o,a.b=Et(c||null),a.f=p,a.ub(h).toString()}function Iu(a){if(this.a=a||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new u("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Eu(a){this.b=a,this.a={},this.f=S(this.c,this)}pu.prototype.toString=function(){return this.f?qn(this.a,"v",this.f):rr(this.a.a,"v"),this.b?qn(this.a,"eid",this.b):rr(this.a.a,"eid"),this.c.length?qn(this.a,"fw",this.c.join(",")):rr(this.a.a,"fw"),this.a.toString()},du.prototype.ub=function(a){return this.h=a,this},du.prototype.toString=function(){var a=Hn(this.s,"/__/auth/handler");if(qn(a,"apiKey",this.m),qn(a,"appName",this.c),qn(a,"authType",this.u),this.a.isOAuthProvider){var b=this.a;try{var t=r.a.app(this.c).auth().ja()}catch(e){t=null}for(var e in b.kb=t,qn(a,"providerId",this.a.providerId),t=Gr((b=this.a).Fb))t[e]=t[e].toString();e=b.Oc,t=Et(t);for(var n=0;n<e.length;n++){var o=e[n];o in t&&delete t[o]}b.lb&&b.kb&&!t[b.lb]&&(t[b.lb]=b.kb),It(t)||qn(a,"customParameters",qr(t))}if("function"==typeof this.a.Nb&&((b=this.a.Nb()).length&&qn(a,"scopes",b.join(","))),this.l?qn(a,"redirectUrl",this.l):rr(a.a,"redirectUrl"),this.g?qn(a,"eventId",this.g):rr(a.a,"eventId"),this.i?qn(a,"v",this.i):rr(a.a,"v"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!Gn(a,g)&&qn(a,g,this.b[g]);return this.h?qn(a,"tid",this.h):rr(a.a,"tid"),this.f?qn(a,"eid",this.f):rr(a.a,"eid"),(g=vu(this.c)).length&&qn(a,"fw",g.join(",")),a.toString()},(e=yu.prototype).Lb=function(a,b,t){var e=new u("popup-closed-by-user"),n=new u("web-storage-unsupported"),r=this,g=!1;return this.ka().then((function(){(function(a){var b={type:"webStorageSupport"};return gu(a).then((function(){return function(a,b){return a.nb.then((function(){return new Se((function(t){a.a.send(b.type,b,t,Lr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(a.i,b)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(r).then((function(t){t||(a&&gr(a),b(n),g=!0)}))})).o((function(){})).then((function(){if(!g)return function(a){return new Se((function(b){return function t(){Dn(2e3).then((function(){if(a&&!a.closed)return t();b()}))}()}))}(a)})).then((function(){if(!g)return Dn(t).then((function(){b(e)}))}))},e.Ub=function(){var a=xr();return!Vr(a)&&!zr(a)},e.Qb=function(){return!1},e.Jb=function(a,b,t,e,n,r,g,o){if(!a)return Le(new u("popup-blocked"));if(g&&!Vr())return this.ka().o((function(p){gr(a),n(p)})),e(),xe();this.a||(this.a=mu(wu(this)));var c=this;return this.a.then((function(){var p=c.ka().o((function(t){throw gr(a),n(t),t}));return e(),p})).then((function(){(Wo(t),g)||yr(bu(c.u,c.f,c.b,b,t,null,r,c.c,void 0,c.h,o),a)})).o((function(p){throw"auth/network-request-failed"==p.code&&(c.a=null),p}))},e.Kb=function(a,b,t,e){this.a||(this.a=mu(wu(this)));var n=this;return this.a.then((function(){Wo(b),yr(bu(n.u,n.f,n.b,a,b,vr(),t,n.c,void 0,n.h,e))})).o((function(t){throw"auth/network-request-failed"==t.code&&(n.a=null),t}))},e.ka=function(){var a=this;return gu(this).then((function(){return a.i.nb})).o((function(){throw a.a=null,new u("network-request-failed")}))},e.Xb=function(){return!0},e.Ca=function(a){this.g.push(a)},e.Qa=function(a){et(this.g,(function(b){return b==a}))},(e=Iu.prototype).get=function(a){return xe(this.a.getItem(a)).then((function(b){return b&&Br(b)}))},e.set=function(a,b){return xe(this.a.setItem(a,qr(b)))},e.T=function(a){return xe(this.a.removeItem(a))},e.ba=function(){},e.ha=function(){};var _u,Tu=[];function Au(a,b,t){It(a.a)&&a.b.addEventListener("message",a.f),void 0===a.a[b]&&(a.a[b]=[]),a.a[b].push(t)}function Nu(a){this.a=a}function Su(a){this.c=a,this.b=!1,this.a=[]}function ku(a,b,t,e){var n,g,r,o,c=t||{},p=null;if(a.b)return Le(Error("connection_unavailable"));var h=e?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Se((function(t,e){f?(n=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),r=setTimeout((function(){e(Error("unsupported_event"))}),h),p={messageChannel:f,onMessage:g=function(c){c.data.eventId===n&&("ack"===c.data.status?(clearTimeout(r),o=setTimeout((function(){e(Error("timeout"))}),3e3)):"done"===c.data.status?(clearTimeout(o),void 0!==c.data.response?t(c.data.response):e(Error("unknown_error"))):(clearTimeout(r),clearTimeout(o),e(Error("invalid_response"))))}},a.a.push(p),f.port1.addEventListener("message",g),a.c.postMessage({eventType:b,eventId:n,data:c},[f.port2])):e(Error("connection_unavailable"))})).then((function(t){return Ou(a,p),t})).o((function(t){throw Ou(a,p),t}))}function Ou(a,b){if(b){var t=b.messageChannel,e=b.onMessage;t&&(t.port1.removeEventListener("message",e),t.port1.close()),et(a.a,(function(t){return t==b}))}}function Du(){if(!Pu())throw new u("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var a=this;Nr()&&self?(this.l=function(){var a=Nr()?self:null;if(J(Tu,(function(t){t.b==a&&(b=t)})),!b){var b=new Eu(a);Tu.push(b)}return b}(),Au(this.l,"keyChanged",(function(b,t){return ju(a).then((function(e){return 0<e.length&&J(a.a,(function(t){t(e)})),{keyProcessed:Z(e,t.key)}}))})),Au(this.l,"ping",(function(){return xe(["keyChanged"])}))):function(){var a=l.navigator;return a&&a.serviceWorker?xe().then((function(){return a.serviceWorker.ready})).then((function(b){return b.active||null})).o((function(){return null})):xe(null)}().then((function(b){(a.h=b)&&(a.g=new Su(new Nu(b)),ku(a.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Z(t[0].value,"keyChanged")&&(a.s=!0)})).o((function(){})))}))}function Cu(a){return new Se((function(b,t){var e=a.u.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(t){}t(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){t(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?b(e):function(a){return new Se((function(b,t){var e=a.u.deleteDatabase("firebaseLocalStorageDb");e.onsuccess=function(){b()},e.onerror=function(e){t(Error(e.target.error))}}))}(a).then((function(){return Cu(a)})).then((function(t){b(t)})).o((function(e){t(e)}))}}))}function Ru(a){return a.m||(a.m=Cu(a)),a.m}function Pu(){try{return!!l.indexedDB}catch(t){return!1}}function xu(a){return a.objectStore("firebaseLocalStorage")}function Lu(a,b){return a.transaction(["firebaseLocalStorage"],b?"readwrite":"readonly")}function Mu(a){return new Se((function(b,t){a.onsuccess=function(t){t&&t.target?b(t.target.result):b()},a.onerror=function(e){t(e.target.error)}}))}function Uu(a,b){return a.g&&a.h&&function(){var a=l.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.h?ku(a.g,"keyChanged",{key:b},a.s).then((function(){})).o((function(){})):xe()}function ju(a){return Ru(a).then((function(b){var t=xu(Lu(b,!1));return t.getAll?Mu(t.getAll()):new Se((function(e,n){var r=[],g=t.openCursor();g.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},g.onerror=function(t){n(t.target.error)}}))})).then((function(b){var t={},e=[];if(0==a.b){for(e=0;e<b.length;e++)t[b[e].fbase_key]=b[e].value;e=function t(a,b){var e,n=[];for(e in a)e in b?typeof a[e]!=typeof b[e]?n.push(e):"object"==typeof a[e]&&null!=a[e]&&null!=b[e]?0<t(a[e],b[e]).length&&n.push(e):a[e]!==b[e]&&n.push(e):n.push(e);for(e in b)e in a||n.push(e);return n}(a.c,t),a.c=t}return e}))}function Fu(a){a.i&&a.i.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function Vu(a){var b=this,t=null;this.a=[],this.type="indexedDB",this.c=a,this.b=xe().then((function(){if(Pu()){var e=Hr(),n="__sak"+e;return _u||(_u=new Du),(t=_u).set(n,e).then((function(){return t.get(n)})).then((function(r){if(r!==e)throw Error("indexedDB not supported!");return t.T(n)})).then((function(){return t})).o((function(){return b.c}))}return b.c})).then((function(t){return b.type=t.type,t.ba((function(t){J(b.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Gu(){if(!function(){var a="Node"==Sr();if(!(a=Bu()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new u("internal-error","The LocalStorage compatibility library was not found.");throw new u("web-storage-unsupported")}this.a=Bu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var a=l.localStorage,b=Hr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Hu(){this.type="nullStorage"}function zu(){if(!function(){var a="Node"==Sr();if(!(a=Wu()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new u("internal-error","The SessionStorage compatibility library was not found.");throw new u("web-storage-unsupported")}this.a=Wu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var a=l.sessionStorage,b=Hr();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Ku(){var a={};a.Browser=Xu,a.Node=Qu,a.ReactNative=$u,a.Worker=Zu,this.a=a[Sr()]}Eu.prototype.c=function(a){var b=a.data.eventType,t=a.data.eventId,e=this.a[b];if(e&&0<e.length){a.ports[0].postMessage({status:"ack",eventId:t,eventType:b,response:null});var n=[];J(e,(function(t){n.push(xe().then((function(){return t(a.origin,a.data.data)})))})),Ue(n).then((function(e){var g=[];J(e,(function(t){g.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),J(g,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),a.ports[0].postMessage({status:"done",eventId:t,eventType:b,response:g})}))}},Nu.prototype.postMessage=function(a,b){this.a.postMessage(a,b)},Su.prototype.close=function(){for(;0<this.a.length;)Ou(this,this.a[0]);this.b=!0},(e=Du.prototype).set=function(a,b){var t,e=!1,n=this;return Ru(this).then((function(e){return Mu((e=xu(Lu(t=e,!0))).get(a))})).then((function(r){var g=xu(Lu(t,!0));return r?(r.value=b,Mu(g.put(r))):(n.b++,e=!0,(r={}).fbase_key=a,r.value=b,Mu(g.add(r)))})).then((function(){return n.c[a]=b,Uu(n,a)})).ma((function(){e&&n.b--}))},e.get=function(a){return Ru(this).then((function(b){return Mu(xu(Lu(b,!1)).get(a))})).then((function(b){return b&&b.value}))},e.T=function(a){var b=!1,t=this;return Ru(this).then((function(e){return b=!0,t.b++,Mu(xu(Lu(e,!0)).delete(a))})).then((function(){return delete t.c[a],Uu(t,a)})).ma((function(){b&&t.b--}))},e.ba=function(a){0==this.a.length&&function(a){Fu(a),function b(){a.f=setTimeout((function(){a.i=ju(a).then((function(t){0<t.length&&J(a.a,(function(e){e(t)}))})).then((function(){b()})).o((function(t){"STOP_EVENT"!=t.message&&b()}))}),800)}()}(this),this.a.push(a)},e.ha=function(a){et(this.a,(function(b){return b==a})),0==this.a.length&&Fu(this)},(e=Vu.prototype).get=function(a){return this.b.then((function(b){return b.get(a)}))},e.set=function(a,b){return this.b.then((function(t){return t.set(a,b)}))},e.T=function(a){return this.b.then((function(b){return b.T(a)}))},e.ba=function(a){this.a.push(a)},e.ha=function(a){et(this.a,(function(b){return b==a}))},(e=qu.prototype).get=function(a){return xe(this.a[a])},e.set=function(a,b){return this.a[a]=b,xe()},e.T=function(a){return delete this.a[a],xe()},e.ba=function(){},e.ha=function(){},(e=Gu.prototype).get=function(a){var b=this;return xe().then((function(){return Br(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return xe().then((function(){var e=qr(b);null===e?t.T(a):t.a.setItem(a,e)}))},e.T=function(a){var b=this;return xe().then((function(){b.a.removeItem(a)}))},e.ba=function(a){l.window&&dn(l.window,"storage",a)},e.ha=function(a){l.window&&td(l.window,"storage",a)},(e=Hu.prototype).get=function(){return xe(null)},e.set=function(){return xe()},e.T=function(){return xe()},e.ba=function(){},e.ha=function(){},(e=zu.prototype).get=function(a){var b=this;return xe().then((function(){return Br(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return xe().then((function(){var e=qr(b);null===e?t.T(a):t.a.setItem(a,e)}))},e.T=function(a){var b=this;return xe().then((function(){b.a.removeItem(a)}))},e.ba=function(){},e.ha=function(){};var Yu,Ju,Xu={F:Gu,$a:zu},Qu={F:Gu,$a:zu},$u={F:Iu,$a:Hu},Zu={F:Gu,$a:Hu},tc={od:"local",NONE:"none",qd:"session"};function ec(){var a=!(zr(xr())||!Ar()),b=Vr(),t=Mr();this.m=a,this.h=b,this.l=t,this.a={},Yu||(Yu=new Ku),a=Yu;try{this.g=!dr()&&Xr()||!l.indexedDB?new a.a.F:new Vu(Nr()?new qu:new a.a.F)}catch(t){this.g=new qu,this.h=!0}try{this.i=new a.a.$a}catch(t){this.i=new qu}this.u=new qu,this.f=S(this.Vb,this),this.b={}}function nc(){return Ju||(Ju=new ec),Ju}function rc(a,b){switch(b){case"session":return a.i;case"none":return a.u;default:return a.g}}function ic(a,b){return"firebase:"+a.name+(b?":"+b:"")}function oc(a,b,t){return t=ic(b,t),"local"==b.F&&(a.b[t]=null),rc(a,b.F).T(t)}function sc(a){a.c&&(clearInterval(a.c),a.c=null)}function ac(a){this.a=a,this.b=nc()}(e=ec.prototype).get=function(a,b){return rc(this,a.F).get(ic(a,b))},e.set=function(a,b,t){var e=ic(a,t),n=this,r=rc(this,a.F);return r.set(e,b).then((function(){return r.get(e)})).then((function(g){"local"==a.F&&(n.b[e]=g)}))},e.addListener=function(a,b,t){a=ic(a,b),this.l&&(this.b[a]=l.localStorage.getItem(a)),It(this.a)&&(rc(this,"local").ba(this.f),this.h||(dr()||!Xr())&&l.indexedDB||!this.l||function(a){sc(a),a.c=setInterval((function(){for(var b in a.a){var t=l.localStorage.getItem(b),e=a.b[b];t!=e&&(a.b[b]=t,t=new rn({type:"storage",key:b,target:window,oldValue:e,newValue:t,a:!0}),a.Vb(t))}}),1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(t)},e.removeListener=function(a,b,t){a=ic(a,b),this.a[a]&&(et(this.a[a],(function(e){return e==t})),0==this.a[a].length&&delete this.a[a]),It(this.a)&&(rc(this,"local").ha(this.f),sc(this))},e.Vb=function(a){if(a&&a.f){var b=a.a.key;if(null==b)for(var t in this.a){var e=this.b[t];void 0===e&&(e=null);var n=l.localStorage.getItem(t);n!==e&&(this.b[t]=n,this.ib(t))}else if(0==b.indexOf("firebase:")&&this.a[b]){if(void 0!==a.a.a?rc(this,"local").ha(this.f):sc(this),this.m)if(t=l.localStorage.getItem(b),(e=a.a.newValue)!==t)null!==e?l.localStorage.setItem(b,e):l.localStorage.removeItem(b);else if(this.b[b]===e&&void 0===a.a.a)return;var r=this;t=function(){void 0===a.a.a&&r.b[b]===l.localStorage.getItem(b)||(r.b[b]=l.localStorage.getItem(b),r.ib(b))},te&&ce&&10==ce&&l.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(t,10):t()}}else J(a,S(this.ib,this))},e.ib=function(a){this.a[a]&&J(this.a[a],(function(b){b()}))};var uc,cc={name:"authEvent",F:"local"};function hc(){this.a=nc()}function fc(a,b){this.b=lc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=b,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===uc&&(uc=l.Int32Array?new Int32Array(gc):gc),this.reset()}D(fc,(function(){this.b=-1}));for(var lc=64,dl=lc-1,pc=[],dc=0;dc<dl;dc++)pc[dc]=0;var vc=nt(128,pc);function yc(a){for(var b=a.f,t=a.l,e=0,n=0;n<b.length;)t[e++]=b[n]<<24|b[n+1]<<16|b[n+2]<<8|b[n+3],n=4*e;for(b=16;64>b;b++){n=0|t[b-15],e=0|t[b-2];var r=(0|t[b-16])+((n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3)|0,g=(0|t[b-7])+((e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)|0;t[b]=r+g|0}e=0|a.a[0],n=0|a.a[1];var o=0|a.a[2],c=0|a.a[3],p=0|a.a[4],h=0|a.a[5],f=0|a.a[6];for(r=0|a.a[7],b=0;64>b;b++){var l=((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+(e&n^e&o^n&o)|0;g=(r=r+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))|0)+((g=(g=p&h^~p&f)+(0|uc[b])|0)+(0|t[b])|0)|0,r=f,f=h,h=p,p=c+g|0,c=o,o=n,n=e,e=g+l|0}a.a[0]=a.a[0]+e|0,a.a[1]=a.a[1]+n|0,a.a[2]=a.a[2]+o|0,a.a[3]=a.a[3]+c|0,a.a[4]=a.a[4]+p|0,a.a[5]=a.a[5]+h|0,a.a[6]=a.a[6]+f|0,a.a[7]=a.a[7]+r|0}function mc(a,b,t){void 0===t&&(t=b.length);var e=0,n=a.c;if("string"==typeof b)for(;e<t;)a.f[n++]=b.charCodeAt(e++),n==a.b&&(yc(a),n=0);else{if(!w(b))throw Error("message must be string or array");for(;e<t;){var r=b[e++];if(!("number"==typeof r&&0<=r&&255>=r&&r==(0|r)))throw Error("message must be a byte array");a.f[n++]=r,n==a.b&&(yc(a),n=0)}}a.c=n,a.g+=t}fc.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):it(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function wc(){fc.call(this,8,bc)}D(wc,fc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(a,b,t,e,n){this.u=a,this.i=b,this.l=t,this.m=e||null,this.s=n||null,this.h=b+":"+t,this.w=new hc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(a){return new u("invalid-cordova-configuration",a)}function ol(a){var b=new wc;mc(b,a),a=[];var t=8*b.g;56>b.c?mc(b,vc,56-b.c):mc(b,vc,b.b-(b.c-56));for(var e=63;56<=e;e--)b.f[e]=255&t,t/=256;for(yc(b),e=t=0;e<b.i;e++)for(var n=24;0<=n;n-=8)a[t++]=b.a[e]>>n&255;return function(a){return Q(a,(function(b){return 1<(b=b.toString(16)).length?b:"0"+b})).join("")}(a)}function _c(a,b){for(var t=0;t<a.b.length;t++)try{a.b[t](b)}catch(t){}}function Tc(a){return a.f||(a.f=a.ka().then((function(){return new Se((function(b){a.Ca((function t(e){return b(e),a.Qa(t),!1})),function(a){function b(g){e=!0,n&&n.cancel(),Ac(a).then((function(e){var n=t;if(e&&g&&g.url){var p=null;-1!=(n=fo(g.url)).indexOf("/__/auth/callback")&&(p=(p="object"==typeof(p=Br(Gn(p=Bn(n),"firebaseError")||null))?C(p):null)?new Ko(e.c,e.b,null,null,p,null,e.S()):new Ko(e.c,e.b,n,e.f,null,null,e.S())),n=p||t}_c(a,n)}))}var t=new Ko("unknown",null,null,null,new u("no-auth-event")),e=!1,n=Dn(500).then((function(){return Ac(a).then((function(){e||_c(a,t)}))})),r=l.handleOpenURL;l.handleOpenURL=function(g){if(0==g.toLowerCase().indexOf(Lr("BuildInfo.packageName",l).toLowerCase()+"://")&&b({url:g}),"function"==typeof r)try{r(g)}catch(t){console.error(t)}},Qo||(Qo=new Jo),function(a){var b=Qo;b.a.push(a),b.b||(b.b=function(t){for(var e=0;e<b.a.length;e++)b.a[e](t)},"function"==typeof(a=Lr("universalLinks.subscribe",l))&&a(null,b.b))}(b)}(a)}))}))),a.f}function Ac(a){var b=null;return function(a){return a.b.get(cc,a.a).then((function(b){return Yo(b)}))}(a.g).then((function(t){return b=t,oc((t=a.g).b,cc,t.a)})).then((function(){return b}))}function ul(a){this.a=a,this.b=nc()}(e=Ic.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(Tr(void 0)?_r().then((function(){return new Se((function(a,b){var t=l.document,e=setTimeout((function(){b(Error("Cordova framework is not ready."))}),1e3);t.addEventListener("deviceready",(function(){clearTimeout(e),a()}),!1)}))})):Le(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Lr("universalLinks.subscribe",l))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Lr("BuildInfo.packageName",l))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Lr("cordova.plugins.browsertab.openUrl",l))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Lr("cordova.InAppBrowser.open",l))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new u("cordova-not-ready")}))},e.Lb=function(a,b){return b(new u("operation-not-supported-in-this-environment")),xe()},e.Jb=function(){return Le(new u("operation-not-supported-in-this-environment"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(a,b,t,e){if(this.c)return Le(new u("redirect-operation-pending"));var n=this,r=l.document,g=null,o=null,c=null,p=null;return this.c=xe().then((function(){return Wo(b),Tc(n)})).then((function(){return function(a,b,t,e,n){var r=function(){for(var a=20,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}(),g=new Ko(b,e,null,r,new u("no-auth-event"),null,n),o=Lr("BuildInfo.packageName",l);if("string"!=typeof o)throw new u("invalid-cordova-configuration");var c=Lr("BuildInfo.displayName",l),p={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=o;else{if(!xr().toLowerCase().match(/android/))return Le(new u("operation-not-supported-in-this-environment"));p.apn=o}c&&(p.appDisplayName=c),r=ol(r),p.sessionId=r;var h=bu(a.u,a.i,a.l,b,t,null,e,a.m,p,a.s,n);return a.ka().then((function(){var t=a.h;return a.w.a.set(cc,g.v(),t)})).then((function(){var t=Lr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new u("invalid-cordova-configuration");var e=null;t((function(t){if(t){if("function"!=typeof(e=Lr("cordova.plugins.browsertab.openUrl",l)))throw new u("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=Lr("cordova.InAppBrowser.open",l)))throw new u("invalid-cordova-configuration");t=xr(),a.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(n,a,b,t,e)})).then((function(){return new Se((function(t,e){o=function(){var e=Lr("cordova.plugins.browsertab.close",l);return t(),"function"==typeof e&&e(),n.a&&"function"==typeof n.a.close&&(n.a.close(),n.a=null),!1},n.Ca(o),c=function(){g||(g=Dn(2e3).then((function(){e(new u("redirect-cancelled-by-user"))})))},p=function(){Yr()&&c()},r.addEventListener("resume",c,!1),xr().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",p,!1)})).o((function(t){return Ac(n).then((function(){throw t}))}))})).ma((function(){c&&r.removeEventListener("resume",c,!1),p&&r.removeEventListener("visibilitychange",p,!1),g&&g.cancel(),o&&n.Qa(o),n.c=null}))},e.Ca=function(a){this.b.push(a),Tc(this).o((function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new Ko("unknown",null,null,null,new u("no-auth-event")),a(b))}))},e.Qa=function(a){et(this.b,(function(b){return b==a}))};var Nc={name:"pendingRedirect",F:"session"};function Sc(a){return oc(a.b,Nc,a.a)}function kc(a,b,t){this.i={},this.w=0,this.D=a,this.u=b,this.m=t,this.h=[],this.f=!1,this.l=S(this.s,this),this.b=new Gc,this.B=new Kc,this.g=new ul(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Oc(this.D,this.u,this.m,R)}function Oc(a,b,t,e){var n=r.a.SDK_VERSION||null;return Tr()?new Ic(a,b,t,n,e):new yu(a,b,t,n,e)}function Dc(a){a.f||(a.f=!0,a.a.Ca(a.l));var b=a.a;return a.a.ka().o((function(t){throw a.a==b&&a.reset(),t}))}function Cc(a){a.a.Ub()&&Dc(a).o((function(b){var t=new Ko("unknown",null,null,null,new u("operation-not-supported-in-this-environment"));Uc(b)&&a.s(t)})),a.a.Qb()||Bc(a.b)}function Rc(a,b){Z(a.h,b)||a.h.push(b),a.f||function(a){return a.b.get(Nc,a.a).then((function(b){return"pending"==b}))}(a.g).then((function(t){t?Sc(a.g).then((function(){Dc(a).o((function(t){var e=new Ko("unknown",null,null,null,new u("operation-not-supported-in-this-environment"));Uc(t)&&a.s(e)}))})):Cc(a)})).o((function(){Cc(a)}))}function Pc(a,b){et(a.h,(function(t){return t==b}))}kc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Oc(this.D,this.u,this.m),this.i={}},kc.prototype.s=function(a){if(!a)throw new u("invalid-auth-event");if(6e5<=O()-this.w&&(this.i={},this.w=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var b=!1,t=0;t<this.h.length;t++){var e=this.h[t];if(e.Cb(a.c,a.b)){(b=this.c[a.c])&&(b.h(a,e),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.w=O())),b=!0;break}}return Bc(this.b),b};var xc=new Kr(2e3,1e4),Lc=new Kr(3e4,6e4);function Mc(a,b,t,e,n,r,g){return a.a.Jb(b,t,e,(function(){a.f||(a.f=!0,a.a.Ca(a.l))}),(function(){a.reset()}),n,r,g)}function Uc(a){return!(!a||"auth/cordova-not-ready"!=a.code)}function jc(a,b,t,e,n){var r;return function(a){return a.b.set(Nc,"pending",a.a)}(a.g).then((function(){return a.a.Kb(b,t,e,n).o((function(g){if(Uc(g))throw new u("operation-not-supported-in-this-environment");return r=g,Sc(a.g).then((function(){throw r}))})).then((function(){return a.a.Xb()?new Se((function(){})):Sc(a.g).then((function(){return a.pa()})).then((function(){})).o((function(){}))}))}))}function Fc(a,b,t,e,n){return a.a.Lb(e,(function(e){b.la(t,null,e,n)}),xc.get())}kc.prototype.pa=function(){return this.b.pa()};var Vc={};function qc(a,b,t){var e=b+":"+t;return Vc[e]||(Vc[e]=new kc(a,b,t)),Vc[e]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(a){a.g||(a.g=!0,Wc(a,!1,null,null))}function Hc(a){a.g&&!a.i&&Wc(a,!1,null,null)}function zc(a,b){if(a.b=function(){return xe(b)},a.f.length)for(var t=0;t<a.f.length;t++)a.f[t](b)}function Wc(a,b,t,e){b?e?function(a,b){if(a.b=function(){return Le(b)},a.c.length)for(var t=0;t<a.c.length;t++)a.c[t](b)}(a,e):zc(a,t):zc(a,{user:null}),a.f=[],a.c=[]}function Kc(){}function Yc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(a){this.Bb=a},enumerable:!1})}function Jc(a,b){this.a=b,ei(this,"verificationId",a)}function Xc(a,b,t,e){return new Bo(a).cb(b,t).then((function(t){return new Jc(t,e)}))}function Qc(a){var b=Qi(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new u("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ni(this,{token:a,expirationTime:Jr(1e3*b.exp),authTime:Jr(1e3*b.auth_time),issuedAtTime:Jr(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,signInSecondFactor:b.firebase&&b.firebase.sign_in_second_factor?b.firebase.sign_in_second_factor:null,claims:b})}function $c(a,b,t){var e=b&&b[eh];if(!e)throw new u("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=a,this.f=Et(b),this.g=t,this.c=new lo(null,e),this.b=[];var n=this;J(b[Zc]||[],(function(t){(t=si(t))&&n.b.push(t)})),ei(this,"auth",this.a),ei(this,"session",this.c),ei(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(a,b){if(a){this.reset(),this.g=!0;var t=a.c,e=a.b,n=a.a&&"auth/web-storage-unsupported"==a.a.code,r=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.i=!(!n&&!r),"unknown"!=t||n||r?a.a?(Wc(this,!0,null,a.a),xe()):b.Da(t,e)?function(a,b,t){t=t.Da(b.c,b.b);var e=b.g,n=b.f,r=b.i,g=b.S(),o=!!b.c.match(/Redirect$/);t(e,n,g,r).then((function(t){Wc(a,o,t,null)})).o((function(t){Wc(a,o,null,t)}))}(this,a,b):Le(new u("invalid-auth-event")):(Wc(this,!1,null,null),xe())}else Le(new u("invalid-auth-event"))},Gc.prototype.pa=function(){var a=this;return new Se((function(b,t){a.b?a.b().then(b,t):(a.f.push(b),a.c.push(t),function(a){var b=new u("timeout");a.a&&a.a.cancel(),a.a=Dn(Lc.get()).then((function(){a.b||(a.g=!0,Wc(a,!0,null,b))}))}(a))}))},Kc.prototype.h=function(a,b){if(a){var t=a.c,e=a.b;a.a?(b.la(a.c,null,a.a,a.b),xe()):b.Da(t,e)?function(a,b){var t=a.b,e=a.c;b.Da(e,t)(a.g,a.f,a.S(),a.i).then((function(n){b.la(e,n,null,t)})).o((function(n){b.la(e,null,n,t)}))}(a,b):Le(new u("invalid-auth-event"))}else Le(new u("invalid-auth-event"))},Jc.prototype.confirm=function(a){return a=Ho(this.verificationId,a),this.a(a)};var Zc="mfaInfo",eh="mfaPendingCredential";function nh(a,b,t,e){u.call(this,"multi-factor-auth-required",e,b),this.b=new $c(a,b,t),ei(this,"resolver",this.b)}function em(a,b,t){if(a&&q(a.serverResponse)&&"auth/multi-factor-auth-required"===a.code)try{return new nh(b,a.serverResponse,t,a.message)}catch(t){}return null}function rh(){}function ih(a){ei(this,"factorId",a.ea),this.a=a}function oh(a){if(ih.call(this,a),this.a.ea!=Bo.PROVIDER_ID)throw new u("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function sh(a,b){for(var t in nn.call(this,a),b)this[t]=b[t]}function ah(a,b){this.a=a,this.b=[],this.c=S(this.wc,this),dn(this.a,"userReloaded",this.c);var t=[];b&&b.multiFactor&&b.multiFactor.enrolledFactors&&J(b.multiFactor.enrolledFactors,(function(e){var n=null,r={};if(e){e.uid&&(r[ci]=e.uid),e.displayName&&(r[ai]=e.displayName),e.enrollmentTime&&(r[ui]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[hi]=e.phoneNumber);try{n=new fi(r)}catch(t){}e=n}else e=null;e&&t.push(e)})),uh(this,t)}function uh(a,b){a.b=b,ei(a,"enrolledFactors",b)}function ch(a,b,t){if(this.h=a,this.i=b,this.g=t,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function hh(a){this.c=a,this.b=this.a=null}function fh(a){return a.b&&1e3*a.b.c||0}function lh(a,b){var t=b.refreshToken;a.b=Xi(b[na]||""),a.a=t}function ph(a,b){return function(a,b){return new Se((function(t,e){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?ca(a,a.u+"?key="+encodeURIComponent(a.c),(function(n){n?n.error?e(au(n)):n.access_token&&n.refresh_token?t(n):e(new u("internal-error")):e(new u("network-request-failed"))}),"POST",nr(b).toString(),a.g,a.m.get()):e(new u("internal-error"))}))}(a.c,b).then((function(t){return a.b=Xi(t.access_token),a.a=t.refresh_token,{accessToken:a.b.toString(),refreshToken:a.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(a.a=null),t}))}function dh(a,b){this.a=a||null,this.b=b||null,ni(this,{lastSignInTime:Jr(b||null),creationTime:Jr(a||null)})}function vh(a,b,t,e,n,r){ni(this,{uid:a,displayName:e||null,photoURL:n||null,email:t||null,phoneNumber:r||null,providerId:b})}function yh(a,b,t){this.N=[],this.l=a.apiKey,this.m=a.appName,this.s=a.authDomain||null,a=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION):null,this.a=new ta(this.l,M(R),a),this.b=new hh(this.a),_h(this,b[na]),lh(this.b,b),ei(this,"refreshToken",this.b.a),Nh(this,t||{}),An.call(this),this.P=!1,this.s&&Ur()&&(this.i=qc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(a){return new ch((function(){return a.I(!0)}),(function(b){return!(!b||"auth/network-request-failed"!=b.code)}),(function(){var b=fh(a.b)-O()-3e5;return 0<b?b:0}))}(this),this.Z=S(this.Ma,this);var e=this;this.oa=null,this.za=function(t){e.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){gh(e,t.c)},this.$=null,this.O=new ah(this,t),ei(this,"multiFactor",this.O)}function mh(a,b){a.aa&&td(a.aa,"languageCodeChanged",a.za),(a.aa=b)&&dn(b,"languageCodeChanged",a.za)}function gh(a,b){a.W=b,ua(a.a,r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,a.W):null)}function wh(a,b){a.$&&td(a.$,"frameworkChanged",a.ya),(a.$=b)&&dn(b,"frameworkChanged",a.ya)}function bh(a){try{return r.a.app(a.m).auth()}catch(t){throw new u("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function Ih(a){a.D||a.B.b||(a.B.start(),td(a,"tokenChanged",a.Z),dn(a,"tokenChanged",a.Z))}function Eh(a){td(a,"tokenChanged",a.Z),a.B.stop()}function _h(a,b){a.xa=b,ei(a,"_lat",b)}function Th(a){for(var b=[],t=0;t<a.R.length;t++)b.push(a.R[t](a));return Ue(b).then((function(){return a}))}function Ah(a){a.i&&!a.P&&(a.P=!0,Rc(a.i,a))}function Nh(a,b){ni(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,tenantId:b.tenantId||null,metadata:new dh(b.createdAt,b.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Sh(){}function kh(a){return xe().then((function(){if(a.D)throw new u("app-deleted")}))}function Oh(a){return Q(a.providerData,(function(b){return b.providerId}))}function Dh(a,b){b&&(Ch(a,b.providerId),a.providerData.push(b))}function Ch(a,b){et(a.providerData,(function(t){return t.providerId==b}))}function Rh(a,b,t){("uid"!=b||t)&&a.hasOwnProperty(b)&&ei(a,b,t)}function Ph(a,b){a!=b&&(ni(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,tenantId:b.tenantId,providerData:[]}),b.metadata?ei(a,"metadata",function(a){return new dh(a.a,a.b)}(b.metadata)):ei(a,"metadata",new dh),J(b.providerData,(function(t){Dh(a,t)})),function(a,b){a.b=b.b,a.a=b.a}(a.b,b.b),ei(a,"refreshToken",a.b.a),uh(a.O,b.O.b))}function xh(a){return a.I().then((function(b){var t=a.isAnonymous;return function(a,b){return ou(a.a,Ma,{idToken:b}).then(S(a.Ic,a))}(a,b).then((function(){return t||Rh(a,"isAnonymous",!1),b}))}))}function Lh(a,b){b[na]&&a.xa!=b[na]&&(lh(a.b,b),a.dispatchEvent(new sh("tokenChanged")),_h(a,b[na]),Rh(a,"refreshToken",a.b.a))}function Mh(a,b){return xh(a).then((function(){if(Z(Oh(a),b))return Th(a).then((function(){throw new u("provider-already-linked")}))}))}function Uh(a,b,t){return ri({user:a,credential:zo(b),additionalUserInfo:b=no(b),operationType:t})}function jh(a,b){return Lh(a,b),a.reload().then((function(){return a}))}function Fh(a,b,t,e,n){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));if(a.h&&!n)return Le(a.h);var o=eo(t.providerId),g=Hr(a.uid+":::"),c=null;(!Vr()||Ar())&&a.s&&t.isOAuthProvider&&(c=bu(a.s,a.l,a.m,b,t,null,g,r.a.SDK_VERSION||null,null,null,a.tenantId));var h=wr(c,o&&o.ta,o&&o.sa);return e=e().then((function(){if(qh(a),!n)return a.I().then((function(){}))})).then((function(){return Mc(a.i,h,b,t,g,!!c,a.tenantId)})).then((function(){return new Se((function(p,t){a.la(b,null,new u("cancelled-popup-request"),a.g||null),a.f=p,a.w=t,a.g=g,a.c=Fc(a.i,a,b,h,g)}))})).then((function(p){return h&&gr(h),p?ri(p):null})).o((function(p){throw h&&gr(h),p})),Gh(a,e,n)}function Vh(a,b,t,e,n){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));if(a.h&&!n)return Le(a.h);var r=null,g=Hr(a.uid+":::");return e=e().then((function(){if(qh(a),!n)return a.I().then((function(){}))})).then((function(){return a.fa=g,Th(a)})).then((function(t){return a.ga&&(t=(t=a.ga).b.set(zh,a.v(),t.a)),t})).then((function(){return jc(a.i,b,t,g,a.tenantId)})).o((function(t){if(r=t,a.ga)return Wh(a.ga);throw r})).then((function(){if(r)throw r})),Gh(a,e,n)}function qh(a){if(!a.i||!a.P){if(a.i&&!a.P)throw new u("internal-error");throw new u("auth-domain-config-required")}}function Gh(a,b,t){var e=function(a,b,t){return a.h&&!t?(b.cancel(),Le(a.h)):b.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(a.h||a.dispatchEvent(new sh("userInvalidated")),a.h=t),t}))}(a,b,t);return a.N.push(e),e.ma((function(){tt(a.N,e)})),e.o((function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=em(t.v(),bh(a),S(a.hc,a))),e||t}))}function Bh(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},t={};if(!a.stsTokenManager||!a.stsTokenManager.accessToken)return null;t[na]=a.stsTokenManager.accessToken,t.refreshToken=a.stsTokenManager.refreshToken||null;var e=new yh(b,t,a);return a.providerData&&J(a.providerData,(function(t){t&&Dh(e,ri(t))})),a.redirectEventId&&(e.fa=a.redirectEventId),e}function Hh(a){this.a=a,this.b=nc()}$c.prototype.Pc=function(a){var b=this;return a.ob(this.a.b,this.c).then((function(t){var e=Et(b.f);return delete e[Zc],delete e[eh],Tt(e,t),b.g(e)}))},D(nh,u),rh.prototype.ob=function(a,b,t){return b.type==po?function(a,b,t,e){return t.Fa().then((function(t){return t={idToken:t},void 0!==e&&(t.displayName=e),Tt(t,{phoneVerificationInfo:Go(a.a)}),ou(b,xa,t)}))}(this,a,b,t):function(a,b,t){return t.Fa().then((function(t){return Tt(t={mfaPendingCredential:t},{phoneVerificationInfo:Go(a.a)}),ou(b,La,t)}))}(this,a,b)},D(ih,rh),D(oh,ih),D(sh,nn),(e=ah.prototype).wc=function(a){uh(this,function(a){var b=[];return J(a.mfaInfo||[],(function(t){(t=si(t))&&b.push(t)})),b}(a.ed))},e.Ob=function(){return this.a.I().then((function(a){return new lo(a,null)}))},e.dc=function(a,b){var t=this,e=this.a.a;return this.Ob().then((function(t){return a.ob(e,t,b)})).then((function(e){return Lh(t.a,e),t.a.reload()}))},e.$c=function(a){var b=this,t="string"==typeof a?a:a.uid,e=this.a.a;return this.a.I().then((function(n){return ou(e,iu,{idToken:n,mfaEnrollmentId:t})})).then((function(e){var n=X(b.b,(function(g){return g.uid!=t}));return uh(b,n),Lh(b.a,e),b.a.reload().o((function(g){if("auth/user-token-expired"!=g.code)throw g}))}))},e.v=function(){return{multiFactor:{enrolledFactors:Q(this.b,(function(a){return a.v()}))}}},ch.prototype.start=function(){this.a=this.c,function t(a,b){a.stop(),a.b=Dn(function(a,b){return b?(a.a=a.c,a.g()):(b=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),b)}(a,b)).then((function(){return function(){var a=l.document,b=null;return Yr()||!a?xe():new Se((function(t){b=function(){Yr()&&(a.removeEventListener("visibilitychange",b,!1),t())},a.addEventListener("visibilitychange",b,!1)})).o((function(t){throw a.removeEventListener("visibilitychange",b,!1),t}))}()})).then((function(){return a.h()})).then((function(){t(a,!0)})).o((function(e){a.i(e)&&t(a,!1)}))}(this,!0)},ch.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},hh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:fh(this)}},hh.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?Le(new u("user-token-expired")):a||!this.b||O()>fh(this)-3e4?this.a?ph(this,{grant_type:"refresh_token",refresh_token:this.a}):xe(null):xe({accessToken:this.b.toString(),refreshToken:this.a})},dh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},D(yh,An),yh.prototype.va=function(a){this.oa=a,aa(this.a,a)},yh.prototype.ja=function(){return this.oa},yh.prototype.Ea=function(){return it(this.W)},yh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},ei(yh.prototype,"providerId","firebase"),(e=yh.prototype).reload=function(){var a=this;return Gh(this,kh(this).then((function(){return xh(a).then((function(){return Th(a)})).then(Sh)})))},e.mc=function(a){return this.I(a).then((function(b){return new Qc(b)}))},e.I=function(a){var b=this;return Gh(this,kh(this).then((function(){return b.b.getToken(a)})).then((function(t){if(!t)throw new u("internal-error");return t.accessToken!=b.xa&&(_h(b,t.accessToken),b.dispatchEvent(new sh("tokenChanged"))),Rh(b,"refreshToken",t.refreshToken),t.accessToken})))},e.Ic=function(a){if(!(a=a.users)||!a.length)throw new u("internal-error");Nh(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var b=function(a){return(a=a.providerUserInfo)&&a.length?Q(a,(function(b){return new vh(b.rawId,b.providerId,b.email,b.displayName,b.photoUrl,b.phoneNumber)})):[]}(a),t=0;t<b.length;t++)Dh(this,b[t]);Rh(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new sh("userReloaded",{ed:a}))},e.Jc=function(a){return Zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(a)},e.pb=function(a){var b=this,t=null;return Gh(this,a.c(this.a,this.uid).then((function(e){return Lh(b,e),t=Uh(b,e,"reauthenticate"),b.h=null,b.reload()})).then((function(){return t})),!0)},e.Ac=function(a){return Zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(a)},e.mb=function(a){var b=this,t=null;return Gh(this,Mh(this,a.providerId).then((function(){return b.I()})).then((function(t){return a.b(b.a,t)})).then((function(e){return t=Uh(b,e,"link"),jh(b,e)})).then((function(){return t})))},e.Bc=function(a,b){var t=this;return Gh(this,Mh(this,"phone").then((function(){return Xc(bh(t),a,b,S(t.mb,t))})))},e.Kc=function(a,b){var t=this;return Gh(this,xe().then((function(){return Xc(bh(t),a,b,S(t.pb,t))})),!0)},e.xb=function(a){var b=this;return Gh(this,this.I().then((function(t){return b.a.xb(t,a)})).then((function(t){return Lh(b,t),b.reload()})))},e.cd=function(a){var b=this;return Gh(this,this.I().then((function(t){return a.b(b.a,t)})).then((function(t){return Lh(b,t),b.reload()})))},e.yb=function(a){var b=this;return Gh(this,this.I().then((function(t){return b.a.yb(t,a)})).then((function(t){return Lh(b,t),b.reload()})))},e.zb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return kh(this);var b=this;return Gh(this,this.I().then((function(t){return b.a.zb(t,{displayName:a.displayName,photoUrl:a.photoURL})})).then((function(t){return Lh(b,t),Rh(b,"displayName",t.displayName||null),Rh(b,"photoURL",t.photoUrl||null),J(b.providerData,(function(t){"password"===t.providerId&&(ei(t,"displayName",b.displayName),ei(t,"photoURL",b.photoURL))})),Th(b)})).then(Sh))},e.ad=function(a){var b=this;return Gh(this,xh(this).then((function(t){return Z(Oh(b),a)?function(a,b,t){return ou(a,Ca,{idToken:b,deleteProvider:t})}(b.a,t,[a]).then((function(t){var e={};return J(t.providerUserInfo||[],(function(t){e[t.providerId]=!0})),J(Oh(b),(function(t){e[t]||Ch(b,t)})),e[Bo.PROVIDER_ID]||ei(b,"phoneNumber",null),Th(b)})):Th(b).then((function(){throw new u("no-such-provider")}))})))},e.delete=function(){var a=this;return Gh(this,this.I().then((function(b){return ou(a.a,Da,{idToken:b})})).then((function(){a.dispatchEvent(new sh("userDeleted"))}))).then((function(){for(var b=0;b<a.N.length;b++)a.N[b].cancel("app-deleted");mh(a,null),wh(a,null),a.N=[],a.D=!0,Eh(a),ei(a,"refreshToken",null),a.i&&Pc(a.i,a)}))},e.Cb=function(a,b){return!!("linkViaPopup"==a&&(this.g||null)==b&&this.f||"reauthViaPopup"==a&&(this.g||null)==b&&this.f||"linkViaRedirect"==a&&(this.fa||null)==b||"reauthViaRedirect"==a&&(this.fa||null)==b)},e.la=function(a,b,t,e){"linkViaPopup"!=a&&"reauthViaPopup"!=a||e!=(this.g||null)||(t&&this.w?this.w(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(a,b){return"linkViaPopup"==a&&b==(this.g||null)?S(this.Hb,this):"reauthViaPopup"==a&&b==(this.g||null)?S(this.Ib,this):"linkViaRedirect"==a&&(this.fa||null)==b?S(this.Hb,this):"reauthViaRedirect"==a&&(this.fa||null)==b?S(this.Ib,this):null},e.Cc=function(a){var b=this;return Fh(this,"linkViaPopup",a,(function(){return Mh(b,a.providerId).then((function(){return Th(b)}))}),!1)},e.Lc=function(a){return Fh(this,"reauthViaPopup",a,(function(){return xe()}),!0)},e.Dc=function(a){var b=this;return Vh(this,"linkViaRedirect",a,(function(){return Mh(b,a.providerId)}),!1)},e.Mc=function(a){return Vh(this,"reauthViaRedirect",a,(function(){return xe()}),!0)},e.Hb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Gh(this,this.I().then((function(g){return _a(n.a,{requestUri:a,postBody:e,sessionId:b,idToken:g})})).then((function(g){return r=Uh(n,g,"link"),jh(n,g)})).then((function(){return r})))},e.Ib=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Gh(this,xe().then((function(){return mo(Ta(n.a,{requestUri:a,sessionId:b,postBody:e,tenantId:t}),n.uid)})).then((function(t){return r=Uh(n,t,"reauthenticate"),Lh(n,t),n.h=null,n.reload()})).then((function(){return r})),!0)},e.qb=function(a){var b=this,t=null;return Gh(this,this.I().then((function(e){return t=e,void 0===a||It(a)?{}:Wi(new Mi(a))})).then((function(e){return b.a.qb(t,e)})).then((function(t){if(b.email!=t)return b.reload()})).then((function(){})))},e.Ab=function(a,b){var t=this,e=null;return Gh(this,this.I().then((function(t){return e=t,void 0===b||It(b)?{}:Wi(new Mi(b))})).then((function(n){return t.a.Ab(e,a,n)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.hc=function(a){var b=null,t=this;return Gh(this,a=mo(xe(a),t.uid).then((function(e){return b=Uh(t,e,"reauthenticate"),Lh(t,e),t.h=null,t.reload()})).then((function(){return b})),!0)},e.toJSON=function(){return this.v()},e.v=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&Tt(a,this.metadata.v()),J(this.providerData,(function(b){a.providerData.push(function(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&(b[t]=a[t]);return b}(b))})),Tt(a,this.O.v()),a};var zh={name:"redirectUser",F:"session"};function Wh(a){return oc(a.b,zh,a.a)}function Kh(a){this.a=a,this.b=nc(),this.c=null,this.f=function(a){var b=Xh("local"),t=Xh("session"),e=Xh("none");return function(a,b,t){var e=ic(b,t),n=rc(a,b.F);return a.get(b,t).then((function(r){var g=null;try{g=Br(l.localStorage.getItem(e))}catch(t){}if(g&&!r)return l.localStorage.removeItem(e),a.set(b,g,t);g&&r&&"localStorage"!=n.type&&l.localStorage.removeItem(e)}))}(a.b,b,a.a).then((function(){return a.b.get(t,a.a)})).then((function(n){return n?t:a.b.get(e,a.a).then((function(t){return t?e:a.b.get(b,a.a).then((function(g){return g?b:a.b.get(Jh,a.a).then((function(t){return t?Xh(t):b}))}))}))})).then((function(t){return a.c=t,Yh(a,t.F)})).o((function(){a.c||(a.c=b)}))}(this),this.b.addListener(Xh("local"),this.a,S(this.g,this))}function Yh(a,b){var t,e=[];for(t in tc)tc[t]!==b&&e.push(oc(a.b,Xh(tc[t]),a.a));return e.push(oc(a.b,Jh,a.a)),function(a){return new Se((function(b,t){var e=a.length,n=[];if(e)for(var r=function(p,t){e--,n[p]=t,0==e&&b(n)},g=function(p){t(p)},o=0;o<a.length;o++)Me(a[o],k(r,o),g);else b(n)}))}(e)}Kh.prototype.g=function(){var a=this,b=Xh("local");tf(this,(function(){return xe().then((function(){return a.c&&"local"!=a.c.F?a.b.get(b,a.a):null})).then((function(t){if(t)return Yh(a,"local").then((function(){a.c=b}))}))}))};var Jh={name:"persistence",F:"session"};function Xh(a){return{name:"authUser",F:a}}function Qh(a,b){return tf(a,(function(){return a.b.set(a.c,b.v(),a.a)}))}function $h(a){return tf(a,(function(){return oc(a.b,a.c,a.a)}))}function Zh(a,b){return tf(a,(function(){return a.b.get(a.c,a.a).then((function(t){return t&&b&&(t.authDomain=b),Bh(t||{})}))}))}function tf(a,b){return a.f=a.f.then(b,b),a.f}function ef(a){if(this.l=!1,ei(this,"settings",new Yc),ei(this,"app",a),!hf(this).options||!hf(this).options.apiKey)throw new u("invalid-api-key");a=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION):null,this.b=new ta(hf(this).options&&hf(this).options.apiKey,M(R),a),this.P=[],this.m=[],this.O=[],this.$b=r.a.INTERNAL.createSubscribe(S(this.xc,this)),this.W=void 0,this.ac=r.a.INTERNAL.createSubscribe(S(this.yc,this)),uf(this,null),this.i=new Kh(hf(this).options.apiKey+":"+hf(this).name),this.B=new Hh(hf(this).options.apiKey+":"+hf(this).name),this.Z=df(this,function(a){var b=hf(a).options.authDomain,t=function(a){var b=function(a,b){return a.b.get(zh,a.a).then((function(t){return t&&b&&(t.authDomain=b),Bh(t||{})}))}(a.B,hf(a).options.authDomain).then((function(t){return(a.D=t)&&(t.ga=a.B),Wh(a.B)}));return df(a,b)}(a).then((function(){return Zh(a.i,b)})).then((function(t){return t?(t.ga=a.B,a.D&&(a.D.fa||null)==(t.fa||null)?t:t.reload().then((function(){return Qh(a.i,t).then((function(){return t}))})).o((function(e){return"auth/network-request-failed"==e.code?t:$h(a.i)}))):null})).then((function(t){uf(a,t||null)}));return df(a,t)}(this)),this.h=df(this,function(a){return a.Z.then((function(){return sf(a)})).o((function(){})).then((function(){if(!a.l)return a.oa()})).o((function(){})).then((function(){if(!a.l){a.aa=!0;var b=a.i;b.b.addListener(Xh("local"),b.a,a.oa)}}))}(this)),this.aa=!1,this.oa=S(this.Xc,this),this.Ma=S(this.ca,this),this.xa=S(this.jc,this),this.ya=S(this.uc,this),this.za=S(this.vc,this),this.a=null,function(a){var b=hf(a).options.authDomain,t=hf(a).options.apiKey;b&&Ur()&&(a.Zb=a.Z.then((function(){if(!a.l){if(a.a=qc(b,t,hf(a).name),Rc(a.a,a),ff(a)&&Ah(ff(a)),a.D){Ah(a.D);var e=a.D;e.va(a.ja()),mh(e,a),gh(e=a.D,a.N),wh(e,a),a.D=null}return a.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.Ec,this),this.s=0,An.call(this),function(a){Object.defineProperty(a,"lc",{get:function(){return this.ja()},set:function(b){this.va(b)},enumerable:!1}),a.$=null,Object.defineProperty(a,"ti",{get:function(){return this.S()},set:function(b){this.ub(b)},enumerable:!1}),a.R=null}(this),this.N=[]}function nf(a){nn.call(this,"languageCodeChanged"),this.g=a}function rf(a){nn.call(this,"frameworkChanged"),this.c=a}function of(a){return a.Zb||Le(new u("auth-domain-config-required"))}function sf(a){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));var b=of(a).then((function(){return a.a.pa()})).then((function(t){return t?ri(t):null}));return df(a,b)}function af(a,b){var t={};return t.apiKey=hf(a).options.apiKey,t.authDomain=hf(a).options.authDomain,t.appName=hf(a).name,a.Z.then((function(){return function(a,b,t,e){var n=new yh(a,b);return t&&(n.ga=t),e&&gh(n,e),n.reload().then((function(){return n}))}(t,b,a.B,a.Ea())})).then((function(t){return ff(a)&&t.uid==ff(a).uid?(Ph(ff(a),t),a.ca(t)):(uf(a,t),Ah(t),a.ca(t))})).then((function(){pf(a)}))}function uf(a,b){ff(a)&&(function(a,b){et(a.R,(function(t){return t==b}))}(ff(a),a.Ma),td(ff(a),"tokenChanged",a.xa),td(ff(a),"userDeleted",a.ya),td(ff(a),"userInvalidated",a.za),Eh(ff(a))),b&&(b.R.push(a.Ma),dn(b,"tokenChanged",a.xa),dn(b,"userDeleted",a.ya),dn(b,"userInvalidated",a.za),0<a.s&&Ih(b)),ei(a,"currentUser",b),b&&(b.va(a.ja()),mh(b,a),gh(b,a.N),wh(b,a))}function cf(a,b){var t=null,e=null;return df(a,b.then((function(n){return t=zo(n),e=no(n),af(a,n)}),(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=em(t.v(),a,S(a.ic,a))),e||t})).then((function(){return ri({user:ff(a),credential:t,additionalUserInfo:e,operationType:"signIn"})})))}function hf(a){return a.app}function ff(a){return a.currentUser}function lf(a){return ff(a)&&ff(a)._lat||null}function pf(a){if(a.aa){for(var b=0;b<a.m.length;b++)a.m[b]&&a.m[b](lf(a));if(a.W!==a.getUid()&&a.O.length)for(a.W=a.getUid(),b=0;b<a.O.length;b++)a.O[b]&&a.O[b](lf(a))}}function df(a,b){return a.P.push(b),b.ma((function(){tt(a.P,b)})),b}function vf(){}function yf(){this.a={},this.b=1e12}Kh.prototype.tb=function(a){var b=null,t=this;return function(a){var b=new u("invalid-persistence-type"),t=new u("unsupported-persistence-type");t:{for(e in tc)if(tc[e]==a){var e=!0;break t}e=!1}if(!e||"string"!=typeof a)throw b;switch(Sr()){case"ReactNative":if("session"===a)throw t;break;case"Node":if("none"!==a)throw t;break;default:if(!Mr()&&"none"!==a)throw t}}(a),tf(this,(function(){return a!=t.c.F?t.b.get(t.c,t.a).then((function(e){return b=e,Yh(t,a)})).then((function(){if(t.c=Xh(a),b)return t.b.set(t.c,b,t.a)})):xe()}))},D(ef,An),D(nf,nn),D(rf,nn),(e=ef.prototype).tb=function(a){return df(this,a=this.i.tb(a))},e.va=function(a){this.$===a||this.l||(this.$=a,aa(this.b,this.$),this.dispatchEvent(new nf(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var a=l.navigator;this.va(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},e.Ec=function(a){this.N.push(a),ua(this.b,r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,this.N):null),this.dispatchEvent(new rf(this.N))},e.Ea=function(){return it(this.N)},e.ub=function(a){this.R===a||this.l||(this.R=a,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:hf(this).options.apiKey,authDomain:hf(this).options.authDomain,appName:hf(this).name,currentUser:ff(this)&&ff(this).v()}},e.Cb=function(a,b){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==b&&!!this.f;default:return!1}},e.la=function(a,b,t,e){"signInViaPopup"==a&&this.g==e&&(t&&this.w?this.w(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.g==b&&this.f?S(this.gc,this):null},e.gc=function(a,b,t,e){var n=this,r={requestUri:a,postBody:e,sessionId:b,tenantId:t};return this.c&&(this.c.cancel(),this.c=null),n.Z.then((function(){return cf(n,Ea(n.b,r))}))},e.Vc=function(a){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));var b=this,t=eo(a.providerId),e=Hr(),n=null;(!Vr()||Ar())&&hf(this).options.authDomain&&a.isOAuthProvider&&(n=bu(hf(this).options.authDomain,hf(this).options.apiKey,hf(this).name,"signInViaPopup",a,null,e,r.a.SDK_VERSION||null,null,null,this.S()));var o=wr(n,t&&t.ta,t&&t.sa);return df(this,t=of(this).then((function(g){return Mc(g,o,"signInViaPopup",a,e,!!n,b.S())})).then((function(){return new Se((function(g,t){b.la("signInViaPopup",null,new u("cancelled-popup-request"),b.g),b.f=g,b.w=t,b.g=e,b.c=Fc(b.a,b,"signInViaPopup",o,e)}))})).then((function(g){return o&&gr(o),g?ri(g):null})).o((function(g){throw o&&gr(o),g})))},e.Wc=function(a){if(!Ur())return Le(new u("operation-not-supported-in-this-environment"));var b=this;return df(this,of(this).then((function(){return function(a){return tf(a,(function(){return a.b.set(Jh,a.c.F,a.a)}))}(b.i)})).then((function(){return jc(b.a,"signInViaRedirect",a,void 0,b.S())})))},e.pa=function(){var a=this;return sf(this).then((function(b){return a.a&&Hc(a.a.b),b})).o((function(b){throw a.a&&Hc(a.a.b),b}))},e.bd=function(a){if(!a)return Le(new u("null-user"));if(this.R!=a.tenantId)return Le(new u("tenant-id-mismatch"));var b=this,t={};t.apiKey=hf(this).options.apiKey,t.authDomain=hf(this).options.authDomain,t.appName=hf(this).name;var e=function(a,b,t,e){var n=a.b,r={};return r[na]=n.b&&n.b.toString(),r.refreshToken=n.a,b=new yh(b||{apiKey:a.l,authDomain:a.s,appName:a.m},r),t&&(b.ga=t),e&&gh(b,e),Ph(b,a),b}(a,t,b.B,b.Ea());return df(this,this.h.then((function(){if(hf(b).options.apiKey!=a.l)return e.reload()})).then((function(){return ff(b)&&a.uid==ff(b).uid?(Ph(ff(b),a),b.ca(a)):(uf(b,e),Ah(e),b.ca(e))})).then((function(){pf(b)})))},e.wb=function(){var a=this;return df(this,this.h.then((function(){return a.a&&Hc(a.a.b),ff(a)?(uf(a,null),$h(a.i).then((function(){pf(a)}))):xe()})))},e.Xc=function(){var a=this;return Zh(this.i,hf(this).options.authDomain).then((function(b){if(!a.l){var t;if(t=ff(a)&&b){t=ff(a).uid;var e=b.uid;t=null!=t&&""!==t&&null!=e&&""!==e&&t==e}if(t)return Ph(ff(a),b),ff(a).I();(ff(a)||b)&&(uf(a,b),b&&(Ah(b),b.ga=a.B),a.a&&Rc(a.a,a),pf(a))}}))},e.ca=function(a){return Qh(this.i,a)},e.jc=function(){pf(this),this.ca(ff(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(a){var b=this;return this.h.then((function(){return cf(b,xe(a))}))},e.xc=function(a){var b=this;this.addAuthTokenListener((function(){a.next(ff(b))}))},e.yc=function(a){var b=this;!function(a,b){a.O.push(b),df(a,a.h.then((function(){!a.l&&Z(a.O,b)&&a.W!==a.getUid()&&(a.W=a.getUid(),b(lf(a)))})))}(this,(function(){a.next(ff(b))}))},e.Gc=function(a,b,t){var e=this;return this.aa&&Promise.resolve().then((function(){I(a)?a(ff(e)):I(a.next)&&a.next(ff(e))})),this.$b(a,b,t)},e.Fc=function(a,b,t){var e=this;return this.aa&&Promise.resolve().then((function(){e.W=e.getUid(),I(a)?a(ff(e)):I(a.next)&&a.next(ff(e))})),this.ac(a,b,t)},e.kc=function(a){var b=this;return df(this,this.h.then((function(){return ff(b)?ff(b).I(a).then((function(t){return{accessToken:t}})):null})))},e.Rc=function(a){var b=this;return this.h.then((function(){return cf(b,ou(b.b,Za,{token:a}))})).then((function(t){var e=t.user;return Rh(e,"isAnonymous",!1),b.ca(e),t}))},e.Sc=function(a,b){var t=this;return this.h.then((function(){return cf(t,ou(t.b,tu,{email:a,password:b}))}))},e.cc=function(a,b){var t=this;return this.h.then((function(){return cf(t,ou(t.b,ka,{email:a,password:b}))}))},e.Ya=function(a){var b=this;return this.h.then((function(){return cf(b,a.ia(b.b))}))},e.Qc=function(a){return Zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(a)},e.vb=function(){var a=this;return this.h.then((function(){var b=ff(a);if(b&&b.isAnonymous){var t=ri({providerId:null,isNewUser:!1});return ri({user:b,credential:null,additionalUserInfo:t,operationType:"signIn"})}return cf(a,a.b.vb()).then((function(t){var e=t.user;return Rh(e,"isAnonymous",!0),a.ca(e),t}))}))},e.getUid=function(){return ff(this)&&ff(this).uid||null},e.bc=function(a){this.addAuthTokenListener(a),this.s++,0<this.s&&ff(this)&&Ih(ff(this))},e.Nc=function(a){var b=this;J(this.m,(function(t){t==a&&b.s--})),0>this.s&&(this.s=0),0==this.s&&ff(this)&&Eh(ff(this)),this.removeAuthTokenListener(a)},e.addAuthTokenListener=function(a){var b=this;this.m.push(a),df(this,this.h.then((function(){b.l||Z(b.m,a)&&a(lf(b))})))},e.removeAuthTokenListener=function(a){et(this.m,(function(b){return b==a}))},e.delete=function(){this.l=!0;for(var a=0;a<this.P.length;a++)this.P[a].cancel("app-deleted");return this.P=[],this.i&&(a=this.i).b.removeListener(Xh("local"),a.a,this.oa),this.a&&(Pc(this.a,this),Hc(this.a.b)),Promise.resolve()},e.fc=function(a){return df(this,function(a,b){return ou(a,Oa,{identifier:b,continueUri:jr()?vr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,a))},e.zc=function(a){return!!Fo(a)},e.sb=function(a,b){var t=this;return df(this,xe().then((function(){var t=new Mi(b);if(!t.c)throw new u("argument-error",Fi+" must be true when sending sign in link to email");return Wi(t)})).then((function(e){return t.b.sb(a,e)})).then((function(){})))},e.fd=function(a){return this.Pa(a).then((function(b){return b.data.email}))},e.jb=function(a,b){return df(this,this.b.jb(a,b).then((function(){})))},e.Pa=function(a){return df(this,this.b.Pa(a).then((function(b){return new pi(b)})))},e.fb=function(a){return df(this,this.b.fb(a).then((function(){})))},e.rb=function(a,b){var t=this;return df(this,xe().then((function(){return void 0===b||It(b)?{}:Wi(new Mi(b))})).then((function(e){return t.b.rb(a,e)})).then((function(){})))},e.Uc=function(a,b){return df(this,Xc(this,a,b,S(this.Ya,this)))},e.Tc=function(a,b){var t=this;return df(this,xe().then((function(){var e=b||vr(),n=jo(a,e);if(!(e=Fo(e)))throw new u("argument-error","Invalid email link!");if(e.tenantId!==t.S())throw new u("tenant-id-mismatch");return t.Ya(n)})))},vf.prototype.render=function(){},vf.prototype.reset=function(){},vf.prototype.getResponse=function(){},vf.prototype.execute=function(){};var mf=null;function gf(a,b){return(b=wf(b))&&a.a[b]||null}function wf(a){return(a=void 0===a?1e12:a)?a.toString():null}function bf(a,b){this.g=!1,this.c=b,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=pe(a);var t=this;this.i=function(){t.execute()},this.h?this.execute():dn(this.f,"click",this.i)}function If(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function Ef(){}function _f(){}yf.prototype.render=function(a,b){return this.a[this.b.toString()]=new bf(a,b),this.b++},yf.prototype.reset=function(a){var b=gf(this,a);a=wf(a),b&&a&&(b.delete(),delete this.a[a])},yf.prototype.getResponse=function(a){return(a=gf(this,a))?a.getResponse():null},yf.prototype.execute=function(a){(a=gf(this,a))&&a.execute()},bf.prototype.getResponse=function(){return If(this),this.b},bf.prototype.execute=function(){If(this);var a=this;this.a||(this.a=setTimeout((function(){a.b=function(){for(var a=50,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}();var b=a.c.callback,t=a.c["expired-callback"];if(b)try{b(a.b)}catch(t){}a.a=setTimeout((function(){if(a.a=null,a.b=null,t)try{t()}catch(t){}a.h&&a.execute()}),6e4)}),500))},bf.prototype.delete=function(){If(this),this.g=!0,clearTimeout(this.a),this.a=null,td(this.f,"click",this.i)},ei(Ef,"FACTOR_ID","phone"),_f.prototype.g=function(){return mf||(mf=new yf),xe(mf)},_f.prototype.c=function(){};var Tf=null;function Af(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nf=new Nt(Ot,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sf=new Kr(3e4,6e4);Af.prototype.g=function(a){var b=this;return new Se((function(t,e){var n=setTimeout((function(){e(new u("network-request-failed"))}),Sf.get());!l.grecaptcha||a!==b.f&&!b.b?(l[b.a]=function(){if(l.grecaptcha){b.f=a;var g=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=g(t,e),b.b++,t},clearTimeout(n),t(l.grecaptcha)}else clearTimeout(n),e(new u("internal-error"));delete l[b.a]},xe(Ks(Pt(Nf,{onload:b.a,hl:a||""}))).o((function(){clearTimeout(n),e(new u("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(n),t(l.grecaptcha))}))},Af.prototype.c=function(){this.b--};var kf=null;function Of(a,b,t,e,n,r,g){if(ei(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=b,this.g=null,g?(Tf||(Tf=new _f),g=Tf):(kf||(kf=new Af),g=kf),this.m=g,this.a=t||{theme:"light",type:"image"},this.h=[],this.a[Rf])throw new u("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Pf],!l.document)throw new u("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!pe(b)||!this.i&&pe(b).hasChildNodes())throw new u("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ta(a,r||null,n||null),this.w=e||function(){return null};var o=this;this.l=[];var c=this.a[Df];this.a[Df]=function(t){if(xf(o,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Lr(c,l);"function"==typeof e&&e(t)}};var p=this.a[Cf];this.a[Cf]=function(){if(xf(o,null),"function"==typeof p)p();else if("string"==typeof p){var t=Lr(p,l);"function"==typeof t&&t()}}}var Df="callback",Cf="expired-callback",Rf="sitekey",Pf="size";function xf(a,b){for(var t=0;t<a.l.length;t++)try{a.l[t](b)}catch(t){}}function Lf(a,b){return a.h.push(b),b.ma((function(){tt(a.h,b)})),b}function Mf(a){if(a.D)throw new u("internal-error","RecaptchaVerifier instance has been destroyed.")}function Uf(a,b,t){var e=!1;try{this.b=t||r.a.app()}catch(t){throw new u("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new u("invalid-api-key");t=this.b.options.apiKey;var n=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{e=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=r.a.SDK_VERSION?Pr(r.a.SDK_VERSION,o):null,Of.call(this,t,a,b,(function(){try{var g=n.b.auth().ja()}catch(t){g=null}return g}),o,M(R),e)}function jf(a,b,t,e){t:{t=Array.prototype.slice.call(t);for(var n=0,r=!1,g=0;g<b.length;g++)if(b[g].optional)r=!0;else{if(r)throw new u("internal-error","Argument validator encountered a required argument after an optional argument.");n++}if(r=b.length,t.length<n||r<t.length)e="Expected "+(n==r?1==n?"1 argument":n+" arguments":n+"-"+r+" arguments")+" but got "+t.length+".";else{for(n=0;n<t.length;n++)if(r=b[n].optional&&void 0===t[n],!b[n].K(t[n])&&!r){if(b=b[n],0>n||n>=Ff.length)throw new u("internal-error","Argument validator received an unsupported number of arguments.");t=Ff[n],e=(e?"":t+" argument ")+(b.name?'"'+b.name+'" ':"")+"must be "+b.J+".";break t}e=null}}if(e)throw new u("argument-error",a+" failed: "+e)}(e=Of.prototype).Ga=function(){var a=this;return this.f?this.f:this.f=Lf(this,xe().then((function(){if(jr()&&!Nr())return _r();throw new u("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return a.m.g(a.w())})).then((function(b){return a.g=b,ou(a.s,Ga,{})})).then((function(b){a.a[Rf]=b.recaptchaSiteKey})).o((function(b){throw a.f=null,b})))},e.render=function(){Mf(this);var a=this;return Lf(this,this.Ga().then((function(){if(null===a.c){var b=a.u;if(!a.i){var t=pe(b);b=function(a,b,t){var e=arguments,n=document,r=String(e[0]),g=e[1];if(!le&&g&&(g.name||g.type)){if(r=["<",r],g.name&&r.push(' name="',Xt(g.name),'"'),g.type){r.push(' type="',Xt(g.type),'"');var o={};Tt(o,g),delete o.type,g=o}r.push(">"),r=r.join("")}return r=we(n,r),g&&("string"==typeof g?r.className=g:Array.isArray(g)?r.className=g.join(" "):de(r,g)),2<e.length&&ge(n,r,e),r}("DIV"),t.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c})))},e.verify=function(){Mf(this);var a=this;return Lf(this,this.render().then((function(b){return new Se((function(t){var e=a.g.getResponse(b);if(e)t(e);else{var n=function(e){e&&(function(a,b){et(a.l,(function(t){return t==b}))}(a,n),t(e))};a.l.push(n),a.i&&a.g.execute(a.c)}}))})))},e.reset=function(){Mf(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Mf(this),this.D=!0,this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){a=pe(this.u);for(var b;b=a.firstChild;)a.removeChild(b)}},D(Uf,Of);var Ff="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vf(a,b){return{name:a||"",J:"a valid string",optional:!!b,K:function(t){return"string"==typeof t}}}function qf(a,b){return{name:a||"",J:"a boolean",optional:!!b,K:function(t){return"boolean"==typeof t}}}function Gf(a,b){return{name:a||"",J:"a valid object",optional:!!b,K:q}}function Bf(a,b){return{name:a||"",J:"a function",optional:!!b,K:I}}function Hf(a,b){return{name:a||"",J:"null",optional:!!b,K:function(t){return null===t}}}function zf(a){return{name:a?a+"Credential":"credential",J:a?"a valid "+a+" credential":"a valid credential",optional:!1,K:function(b){if(!b)return!1;var t=!a||b.providerId===a;return!(!b.ia||!t)}}}function Wf(a,b){return q(a)&&"string"==typeof a.type&&a.type===b&&I(a.Fa)}function Kf(a){return q(a)&&"string"==typeof a.uid}function Yf(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(a){return!(!a||"string"!=typeof a.type||!I(a.verify))}}}function Jf(a,b,t,e){return{name:t||"",J:a.J+" or "+b.J,optional:!!e,K:function(t){return a.K(t)||b.K(t)}}}function Xf(a,b){for(var t in b){var e=b[t].name;a[e]=Zf(e,a[t],b[t].j)}}function Qf(a,b){for(var t in b){var e=b[t].name;e!==t&&Object.defineProperty(a,e,{get:k((function(t){return this[t]}),t),set:k((function(t,e,g,n){jf(t,[g],[n],!0),this[e]=n}),e,t,b[t].gb),enumerable:!0})}}function $f(a,b,t,e){a[b]=Zf(b,t,e)}function Zf(a,b,t){function e(){var g=Array.prototype.slice.call(arguments);return jf(r,t,g),b.apply(this,g)}if(!t)return b;var n,r=function(a){return(a=a.split("."))[a.length-1]}(a);for(n in b)e[n]=b[n];for(n in b.prototype)e.prototype[n]=b.prototype[n];return e}Xf(ef.prototype,{fb:{name:"applyActionCode",j:[Vf("code")]},Pa:{name:"checkActionCode",j:[Vf("code")]},jb:{name:"confirmPasswordReset",j:[Vf("code"),Vf("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Vf("email"),Vf("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Vf("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Vf("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Jf(Gf(),Bf(),"nextOrObserver"),Bf("opt_error",!0),Bf("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Jf(Gf(),Bf(),"nextOrObserver"),Bf("opt_error",!0),Bf("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Vf("email"),Jf(Gf("opt_actionCodeSettings",!0),Hf(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Vf("email"),Gf("actionCodeSettings")]},tb:{name:"setPersistence",j:[Vf("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[zf()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[zf()]},Rc:{name:"signInWithCustomToken",j:[Vf("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Vf("email"),Vf("password")]},Tc:{name:"signInWithEmailLink",j:[Vf("email"),Vf("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Vf("phoneNumber"),Yf()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Jf({name:"user",J:"an instance of Firebase User",optional:!1,K:function(b){return!!(b&&b instanceof yh)}},Hf(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vf(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Vf("code")]}}),Qf(ef.prototype,{lc:{name:"languageCode",gb:Jf(Vf(),Hf(),"languageCode")},ti:{name:"tenantId",gb:Jf(Vf(),Hf(),"tenantId")}}),ef.Persistence=tc,ef.Persistence.LOCAL="local",ef.Persistence.SESSION="session",ef.Persistence.NONE="none",Xf(yh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[qf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qf("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[zf()]},mb:{name:"linkWithCredential",j:[zf()]},Bc:{name:"linkWithPhoneNumber",j:[Vf("phoneNumber"),Yf()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[zf()]},pb:{name:"reauthenticateWithCredential",j:[zf()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Vf("phoneNumber"),Yf()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Jf(Gf("opt_actionCodeSettings",!0),Hf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vf(null,!0)]},ad:{name:"unlink",j:[Vf("provider")]},xb:{name:"updateEmail",j:[Vf("email")]},yb:{name:"updatePassword",j:[Vf("password")]},cd:{name:"updatePhoneNumber",j:[zf("phone")]},zb:{name:"updateProfile",j:[Gf("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Vf("email"),Jf(Gf("opt_actionCodeSettings",!0),Hf(null,!0),"opt_actionCodeSettings",!0)]}}),Xf(yf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xf(vf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xf(Se.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qf(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:qf("appVerificationDisabledForTesting")}}),Xf(Jc.prototype,{confirm:{name:"confirm",j:[Vf("verificationCode")]}}),$f(yo,"fromJSON",(function(a){a="string"==typeof a?JSON.parse(a):a;for(var b,t=[_o,Mo,qo,bo],e=0;e<t.length;e++)if(b=t[e](a))return b;return null}),[Jf(Vf(),Gf(),"json")]),$f(Uo,"credential",(function(a,b){return new Lo(a,b)}),[Vf("email"),Vf("password")]),Xf(Lo.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(So.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},Ia:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),$f(So,"credential",ko,[Jf(Vf(),Gf(),"token")]),$f(Uo,"credentialWithLink",jo,[Vf("email"),Vf("emailLink")]),Xf(Oo.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},Ia:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),$f(Oo,"credential",Do,[Jf(Vf(),Gf(),"token")]),Xf(Co.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},Ia:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),$f(Co,"credential",Ro,[Jf(Vf(),Jf(Gf(),Hf()),"idToken"),Jf(Vf(),Hf(),"accessToken",!0)]),Xf(Po.prototype,{Ia:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),$f(Po,"credential",xo,[Jf(Vf(),Gf(),"token"),Vf("secret",!0)]),Xf(No.prototype,{Aa:{name:"addScope",j:[Vf("scope")]},credential:{name:"credential",j:[Jf(Vf(),Jf(Gf(),Hf()),"optionsOrIdToken"),Jf(Vf(),Hf(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),Xf(Io.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(go.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),$f(Bo,"credential",Ho,[Vf("verificationId"),Vf("verificationCode")]),Xf(Bo.prototype,{cb:{name:"verifyPhoneNumber",j:[Jf(Vf(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Wf(t.session,po)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wf(t.session,vo)&&Kf(t.multiFactorHint):t.session&&t.multiFactorUid?Wf(t.session,vo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Yf()]}}),Xf(Vo.prototype,{v:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(u.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf($o.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(th.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf(nh.prototype,{toJSON:{name:"toJSON",j:[Vf(null,!0)]}}),Xf($c.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.ob}}]}}),Xf(ah.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(a){return!!a&&!!a.ob}},Vf("displayName",!0)]},$c:{name:"unenroll",j:[Jf({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Kf},Vf(),"multiFactorInfoIdentifier")]}}),Xf(Uf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),$f(Si,"parseLink",Li,[Vf("link")]),$f(Ef,"assertion",(function(a){return new oh(a)}),[zf("phone")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:di,VERIFY_AND_CHANGE_EMAIL:yi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ef,AuthCredential:yo,Error:u};$f(a,"EmailAuthProvider",Uo,[]),$f(a,"FacebookAuthProvider",So,[]),$f(a,"GithubAuthProvider",Oo,[]),$f(a,"GoogleAuthProvider",Co,[]),$f(a,"TwitterAuthProvider",Po,[]),$f(a,"OAuthProvider",No,[Vf("providerId")]),$f(a,"SAMLAuthProvider",Ao,[Vf("providerId")]),$f(a,"PhoneAuthProvider",Bo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(a){return!!(a&&a instanceof ef)}}]),$f(a,"RecaptchaVerifier",Uf,[Jf(Vf(),{name:"",J:"an HTML element",optional:!1,K:function(a){return!!(a&&a instanceof Element)}},"recaptchaContainer"),Gf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(a){return!!(a&&a instanceof r.a.app.App)}}]),$f(a,"ActionCodeURL",Si,[]),$f(a,"PhoneMultiFactorGenerator",Ef,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(b){return new ef(b=b.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(b){return{getUid:S((b=b.getProvider("auth").getImmediate()).getUid,b),getToken:S(b.kc,b),addAuthTokenListener:S(b.bc,b),removeAuthTokenListener:S(b.Nc,b)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.14.1"),r.a.INTERNAL.extendNamespace({User:yh})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(21))}}]);